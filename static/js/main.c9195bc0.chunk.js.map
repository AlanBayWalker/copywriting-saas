{"version":3,"sources":["assets/logo.png","assets/profile-background.png","assets/profile-avatar.jpg","assets/item-thumbnail.png","projects sync /^/.//.*/.json$","utility/history.js","components/Typography/Typography.js","components/Link/Link.js","components/NavLink/NavLink.js","components/SearchBar/styles.js","components/SearchBar/SearchBar.js","utility/context.js","components/MainNav/MainNav.js","components/BrowsingOptions/styles.js","components/BrowsingOptions/BrowsingOptions.js","components/BrowseItem/styles.js","components/ItemModalHeader/styles.js","components/ItemModalHeader/ItemModalHeader.js","components/BrowseItemModal/BrowseItemModal.js","components/BrowseItem/BrowseItem.js","utility/projects.js","components/BrowseGrid/BrowseGrid.js","components/ExploreProjects/ExploreProjects.js","components/UserProfile/styles.js","components/UserProfile/UserProfile.js","components/canvas/Arrow.js","components/canvas/CanvasObjects.js","components/workflow/link/Link.js","components/workflow/link/CurvedLink.js","components/canvas/Canvas.js","components/imagemap/styles.js","components/imagemap/ImageMapFooterToolbar.js","components/ColorPicker/Colorpicker.js","components/imagemap/ImageMapItems.js","components/imagemap/ImageMapPreview.js","components/BrandStory/BrandStory.js","components/BrainStorm/BrainStorm.js","components/SelectedProject/SelectedProject.js","components/WorkspaceBrowser/WorkspaceBrowser.js","components/imagemap/ImageMapConfigurations.js","components/imagemap/ImageMapEditor.js","components/LogIn/styles.js","components/LogIn/LogIn.js","utility/password.js","components/SwipeFolder/SwipeFolder.js","components/SelectedSwipeFolder/SelectedSwipeFolder.js","components/Routes/Routes.js","components/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","map","./ad-writer.json","./annual-dinner.json","./car-guru.json","./ez-pay.json","./gratify.json","./main-event.json","./nike-slogan.json","./radio-show.json","./zona.json","webpackContext","req","id","webpackContextResolve","o","e","Error","code","keys","Object","resolve","customHistory","createBrowserHistory","Typography","styled","Text","_templateObject","_ref","color","length","colorHandler","_ref2","values","_values$split","split","_values$split2","slicedToArray","topMargin","bottomMargin","concat","gutterHandler","gutter","TextElement","_ref3","component","rest","objectWithoutProperties","react_default","a","createElement","Typography_Typography","assign","Link","RouterLink","Link_templateObject","NavLink","NavLink_templateObject","Container","Grid","styles_templateObject","SearchIcon","Search","_templateObject2","SearchBar","container","item","xs","InputBase","placeholder","inputProps","aria-label","defaultContext","isAuthenticated","Context","React","createContext","contextHandler","withContext","Component","props","Consumer","state","context","Provider","children","_useState","useState","_useState2","contextValue","setContextValue","change","prevState","objectSpread","value","AuthButtons","justify","Link_Link","to","Button","variant","UserMenu","menuState","setMenuState","menuCloseHandler","Fragment","aria-controls","aria-haspopup","onClick","currentTarget","AccountCircle_default","Menu","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","AppBar","position","Toolbar","sm","alignItems","spacing","src","Logo","alt","NavLink_NavLink","components_Typography_Typography","style","marginTop","components_SearchBar_SearchBar","MainNav_UserMenu","MainNav_AuthButtons","BrowsingOptions_styles_templateObject","FormContainer","FormControl","styles_templateObject2","SelectInput","Select","_templateObject3","BrowsingOptions","selectState","setSelectState","_useState3","_useState4","gridEl","setGridEl","_useState5","_useState6","filterDialogState","setFilterDialogState","filterDialogClose","styles_Container","onChange","target","input","OutlinedInput","name","FilterList_default","marginRight","Dialog","aria-labelledby","DialogTitle","align","DialogContent","FormLabel","FormGroup","FormControlLabel","control","Checkbox","checked","label","DialogActions","marginLeft","Apps_default","selected","backgroundColor","ButtonGroup","size","VideoLabel_default","CardImage","CardMedia","BrowseItem_styles_templateObject","CardInfoBar","CardActions","BrowseItem_styles_templateObject2","CardContainer","Card","styles_templateObject3","ItemModalHeader_styles_templateObject","ItemModalHeader","title","ItemModalHeader_styles_Container","display","flexDirection","Bookmark_default","Favorite_default","BrowseItemModal","dialogStatus","dialogCloseHandler","path","thumbnail","description","link","categories","pathHandler","originalProject","cloneProject","components_ItemModalHeader_ItemModalHeader","height","marginBottom","width","Chip","margin","DialogContentText","justifyContent","padding","BrowseItem","author","setDialogStatus","CardActionArea","image","texColor","components_BrowseItemModal_BrowseItemModal","imageUrl","projects","BrowseGrid","maxWidth","config","components_BrowseItem_BrowseItem","projectsRender","linkMatch","_projects$filter","filter","result","_","times","push","projectCopyRender","ExploreProjects","pathname","location","components_MainNav_MainNav","components_BrowsingOptions_BrowsingOptions","components_BrowseGrid_BrowseGrid","Header","header","UserProfile_styles_templateObject","ProfileBackground","HeaderContent","div","UserProfile_styles_templateObject2","EditProfileButton","UserProfile_styles_templateObject3","ProfileAvatar","img","_templateObject4","HireButton","_templateObject5","ProjectsContainer","_templateObject6","UserProfile","ProfileAvatarImage","Container_Container","index","md","Arrow","fabric","util","createClass","Line","type","superType","initialize","points","options","this","callSuper","_render","ctx","save","xDiff","x2","x1","yDiff","y2","y1","angle","Math","atan2","translate","rotate","beginPath","moveTo","lineTo","closePath","fillStyle","stroke","fill","restore","fromObject","callback","CanvasObjects","mergedObjects","defaultOptions","fabricObjects","group","create","objects","option","Group","i-text","text","IText","textbox","Textbox","triangle","Triangle","circle","Circle","rect","Rect","_ref4","imgElement","Image","crossOrigin","video","_ref5","videoElement","polygon","_ref6","Polygon","perPixelTargetFind","line","_ref7","arrow","_ref8","fromNode","fromPort","toNode","toPort","coords","left","top","set","strokeWidth","uuidv4","originX","originY","lockScalingX","lockScalingY","lockRotation","hasRotatingPoint","hasControls","hasBorders","lockMovementX","lockMovementY","selectable","setPort","links","setPortEnabled","node","port","enabled","descriptor","outPortType","forEach","fromPortIndex","configuration","outputCount","toObject","object","extend","get","CurvedLink","lineStyle","fp","x","y","sp","bezierCurveTo","defaultCanvasOption","preserveObjectStacking","selection","defaultCursor","defaultWorkareaOption","workareaWidth","workareaHeight","scaleX","scaleY","hoverCursor","layout","tooltip","isElement","defaultKeyboardEvent","move","all","copy","paste","esc","del","clipboard","transaction","Canvas","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","uuid","attachEventListener","canvas","wrapperEl","tabIndex","document","addEventListener","eventHandlers","keydown","keyup","onmousedown","contextmenu","keyEvent","detachEventListener","removeEventListener","handlers","centerObject","obj","centered","setCoords","setByPartial","getZoom","viewportTransform","add","arguments","undefined","loaded","editable","workarea","createdObj","newOption","addGroup","groupOption","addImage","isElementType","addElement","addSVG","on","mousedown","getObjects","animation","autoplay","animationHandlers","play","onAdd","linkHandlers","dbclick","mousedblclick","portHandlers","iconButton","_this$props","gridOption","setShadow","nodeHandlers","highlightingNode","gridHandlers","child","_this$props2","file","otherOption","createImage","onload","reader","FileReader","readAsDataURL","assertThisInitialized","_this$props3","videoHandlers","elementHandlers","getSVGElements","groupSVGElements","_this$props4","loadType","loadSVGFromString","svg","loadSVGFromURL","remove","activeObject","getActiveObject","prevTarget","deleted","discardActiveObject","removeById","removeStyleById","removeScriptById","removeOriginById","activeObjects","_objects","some","onRemove","findObject","findById","duplicate","_this$props5","propertiesToInclude","_this$props5$gridOpti","grid","cloned","clone","clonedObj","evented","forEachObject","setActiveObject","requestRenderAll","duplicateById","_this$props6","_this$props6$gridOpti","copyToClipboard","textarea","body","appendChild","select","execCommand","removeChild","focus","linkTarget","fromNodeIndex","findIndex","compObj","toNodeIndex","nodeClazz","properties","iconName","icon","JSON","stringify","setState","_this$props7","_this$props7$gridOpti","linkObjects","linkObject","activeSelection","ActiveSelection","renderAll","newClipboard","key","onModified","setObject","setByObject","setById","loadImage","source","setPatternFill","repeat","setElement","setImage","uid","setImageById","find","exist","console","warn","allSelect","filteredObjects","lock","selectById","selectByObject","originScaleToResize","scaleToResize","importJSON","json","parse","prevLeft","prevTop","setBackgroundColor","canvasOption","workareaExist","workareaHandlers","init","setTimeout","canvasWidth","getWidth","canvasHeight","getHeight","_this$workarea","leftRatio","topRatio","diffLeft","diffTop","setZoom","exportJSON","toDatalessJSON","bringForward","bringToFront","sendBackwards","sendToBack","clear","ids","reduce","prev","curr","removeByIds","toGroup","onSelect","toActiveSelection","getOriginObjects","findOriginById","findOriginByIdWithIndex","i","splice","saveImage","targetObject","dataUrl","format","quality","toDataURL","href","download","click","saveCanvasImage","cropHandlers","validType","start","interactionMode","cropObject","_this$cropObject","cropRect","finish","_this$cropRect","croppedImg","cancel","resize","opt","_opt$transform","transform","original","corner","_this$cropObject2","cropLeft","cropTop","cropWidth","cropHeight","cropScaleX","cropScaleY","round","diffRightRatio","getBoundingRect","diffBottomRatio","diffTopRatio","diffLeftRatio","moving","_this$cropObject$getB","movedTop","max","modeHandlers","ret","grab","drawing","delta","Point","movementX","movementY","relativePan","anime","restart","instance","getAnimation","pause","stop","initAnimation","opacity","originOpacity","bounce","originTop","originLeft","shake","originScaleX","originScaleY","originAngle","originFill","originStroke","origniStroke","_obj$animation","_obj$animation$delay","delay","_obj$animation$durati","duration","_obj$animation$autopl","_obj$animation$loop","loop","other","targets","direction","begin","update","animations","currentValue","complete","_other$opacity","easing","_other$offset","offset","_other$offset2","elasticity","_other$scale","scale","_other$fill","_other$stroke","muted","_obj$getBoundingRect","makeElement","preload","controls","zoom","wrapElement","current","draggable","load","requestAnimFrame","render","newSrc","createIFrame","_obj$getBoundingRect2","element","html","css","js","styleElement","innerHTML","head","script","_obj$getBoundingRect3","iframeElement","iframe","findScriptById","getElementById","findStyleById","el","setPosition","setAttribute","setSize","setScale","interact","restrict","restriction","onmove","dx","dy","parseFloat","getAttribute","webkitTransform","onend","workareaOption","mergedWorkareaOption","setLayout","_this$workarea2","_element","isFixed","isResponsive","isFullscreen","objScaleX","objScaleY","objWidth","objHeight","player","setPlayerSize","center","getCenter","point","zoomHandlers","zoomToPoint","setViewportTransform","setResponsiveImage","_assertThisInitialize8","imageFromUrl","fromURL","_assertThisInitialize9","getNodePath","nodes","selectByPath","targetObjects","fromIndex","toIndex","isAnimated","blur","nodeId","deselect","highlightingByPath","nonTargetObjects","lastObject","highlightingLink","animate","ease","easeInOutQuad","shadow","onComplete","createToPort","activeLine","class","errorFill","hoverFill","createFromPort","toCoords","fromCoords","leftDiff","topDiff","recreate","ports","removeWithUpdate","op","np","generate","removeFrom","portLink","removeTo","removeAll","exception","alreadyConnect","alreadyDrawing","drawingHandlers","pointArray","lineArray","activeShape","addPoint","absolutePointer","radius","getPointer","activeShapePoints","polyPoint","objectCaching","createResize","parentId","removeResize","movingResize","diffPoints","orthogonal","curve","alignmentHandlers","activeObjectLeft","right","_this$props8","onZoom","minZoom","maxZoom","zoomRatio","_obj$getBoundingRect4","zoomOneToOne","zoomToFit","zoomIn","zoomOut","tooltipHandlers","show","debounce","asyncToGenerator","regenerator_default","mark","_callee","onTooltip","clientHeight","_target$getBoundingRe","_this$canvas$calcOffs","objWidthDiff","objHeightDiff","calcLeft","calcTop","wrap","_context","next","tooltipRef","hasChildNodes","firstChild","className","sent","abrupt","ReactDOM","classList","calcOffset","_offset","clientWidth","offsetWidth","_x","apply","hide","contextmenuHandlers","_callee2","onContext","_context2","contextmenuRef","clientX","clientY","_x2","_x3","guidelineHandlers","getSelectionContext","aligningLineOffset","aligningLineMargin","aligningLineWidth","aligningLineColor","verticalLines","horizontalLines","drawVerticalLine","drawLine","drawHorizontalLine","_assertThisInitialize10","lineWidth","strokeStyle","isInRange","v1","v2","len","movingGuidelines","canvasObjects","activeObjectCenter","getCenterPoint","activeObjectTop","activeObjectBoundingRect","activeObjectHeight","activeObjectWidth","horizontalInTheRange","verticalInTheRange","_currentTransform","objectCenter","objectLeft","objectTop","objectBoundingRect","objectHeight","objectWidth","setPositionByOrigin","scalingGuidelines","gridLength","lineOptions","horizontalGridLines","verticalGridLines","distance","fhorizontal","shorizontal","fvertical","svertical","_this$props$gridOptio","snapToGrid","onLink","onDblClick","modified","guidelineOption","moved","scaling","rotating","arrowmoving","keyCode","mousewheel","zoomEnabled","deltaY","preventDefault","stopPropagation","ctrlKey","panning","selectedStroke","mousemove","log","pointer","mouseup","shiftKey","mouseout","_this$props9","beforeRender","clearContext","afterRender","currentWidth","currentHeight","nextWidth","nextHeight","setWidth","setHeight","diffWidth","diffHeight","deltaPoint","_obj$getBoundingRect5","diffScaleX","diffScaleY","newScaleX","newScaleY","activeElement","window","event","clipboardData","types","clipboardType","textPlain","getData","_this$props$gridOptio2","Array","isArray","error","includes","transactionHandlers","undo","redo","_this$props10","findTarget","redos","undos","pop","createRef","_this$props11","mergedCanvasOption","bind","_this$eventHandlers","object:modified","object:scaling","object:moving","object:moved","object:rotating","mouse:wheel","mouse:down","mouse:move","mouse:up","selection:cleared","selection:created","selection:updated","before:render","after:render","mouse:out","prevProps","_this$props$canvasOpt","_prevProps$canvasOpti","prevWidth","prevHeight","off","_this2","_this$eventHandlers2","ref","propsTypes","PropTypes","bool","any","number","array","func","defaultProps","WorkspaceSideMenu","imagemap_styles_templateObject","FooterToolbarContainer","imagemap_styles_templateObject2","VerticalDivider","span","imagemap_styles_templateObject3","Content","styles_templateObject4","FormatButton","styles_templateObject5","active","styles_templateObject6","IconStyles","_templateObject7","DeleteIcon","Delete","_templateObject8","SaveIcon","Save","_templateObject9","FormatBoldIcon","FormatBold","_templateObject10","FormatItalicIcon","FormatItalic","_templateObject11","FormatStrikethroughIcon","FormatStrikethrough","_templateObject12","FormatUnderlinedIcon","FormatUnderlined","_templateObject13","FormatAlignCenterIcon","FormatAlignCenter","_templateObject14","FormatAlignLeftIcon","FormatAlignLeft","_templateObject15","FormatAlignRightIcon","FormatAlignRight","_templateObject16","FormatAlignJustifyIcon","FormatAlignJustify","_templateObject17","FormatColorTextIcon","FormatColorText","_templateObject18","ImageMapFooterToolbar","preview","previewInputHandler","waitForCanvasRender","canvasRef","events","onChangePreview","_this$handlers","zoomValue","parseInt","toFixed","Tooltip","NearMe_default","PanTool_default","ZoomOut_default","ZoomIn_default","ZoomOutMap_default","MenuListComposition","button","onChangeComplete","_React$useState","_React$useState2","setOpen","anchorRef","useRef","handleClose","contains","prevOpen","Popper","transition","TransitionProps","placement","Grow","transformOrigin","Paper","ClickAwayListener","onClickAway","lib","ImageMapItems","warning","warningMessage","colorPickerMenu","onDragEnter","onDragOver","onDragLeave","onDrop","onAddItem","onSVGModalVisible","materialUI","warningOpenHandler","onDragStart","dataTransfer","dropEffect","_e","layerX","layerY","dt","files","from","newItem","onDragEnd","warningCloseHandler","colorPickerMenuOpenHandler","colorPickerMenuCloseHandler","textHandlers","fontSizeHandler","selectedItem","fontSize","getTextValue","fontWeightHandler","fontWeight","fontStyleHandler","fontStyle","lineThroughHandler","linethrough","underlineHandler","underline","textAlignHandler","textAlign","opacityHandler","fontColorHandler","hex","checkTextValue","charSpacing","fontFamily","lineHeight","_this$events","_this$state","onSaveImage","onDeleteText","prefix","textValues","fontFormatItems","bold","Icon","property","italic","alignFontItems","alignCenter","alignJustify","alignLeft","alignRight","renderItems","items","res","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","aria-describedby","message","TextField","InputProps","min","step","InputLabelProps","shrink","disabled","ImageMapPreview","canvasRect","resizeSensor","ResizeSensor","currentCanvasRect","_this3","background","c","canvas_Canvas","Close_default","BrandStory","BrainStorm","multiline","rows","rowsMax","fullWidth","SelectedProject","sectionState","setSectionState","Tabs","Tab","components_BrandStory_BrandStory","components_BrainStorm_BrainStorm","WorkspaceBrowser","ItemRender","ImageMapConfigurations","checkMapValue","mapHandler","allData","urlHandler","imageLoadType","url","components_SelectedProject_SelectedProject","components_WorkspaceBrowser_WorkspaceBrowser","strokeUniform","resource","dashboard","template","userProperty","trigger","effect","ImageMapEditor","loading","progress","styles","dataSources","editing","descriptors","uploadDialog","canvasHandlers","changeEditing","changedValues","allValues","changedKey","changedValue","onChangeWokarea","_changedValue$Object$","unicode","uni","String","fromCodePoint","random","data","onProgress","onImport","showLoading","onprogress","lengthComputable","total","_JSON$parse","onloadend","onerror","readAsText","onUpload","inputEl","accept","hidden","onchange","onDownload","_this$state2","exportDatas","encodeURIComponent","onChangeAnimations","onChangeStyles","onChangeDataSources","transformList","require","_this$state3","_this$canvasHandlers","imagemap_ImageMapItems","itemsRef","imagemap_ImageMapFooterToolbar","imagemap_ImageMapPreview","imagemap_ImageMapConfigurations","LogIn_styles_templateObject","usernameState","setUsernameState","passwordState","setPasswordState","react_router","styles_FormContainer","paragraph","startAdornment","InputAdornment","Person_default","Lock_default","createData","itemCount","created","SwipeFolder","paddingTop","Table","TableHead","TableRow","TableCell","TableBody","scope","Folder_default","Delete_default","SelectedSwipeFolder","PrivateRoute","Routes","react_router_dom","history","exact","LogIn","theme","createMuiTheme","palette","primary","main","contrastText","secondary","default","typography","join","App","context_Provider","ThemeProvider","StylesProvider","injectFirst","CssBaseline","components_Routes_Routes","hostname","match","App_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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QAAQ8Y,IAAImM,EAActiC,EAAQwnC,EAAS,gBAG7CC,WAAa,WAAM,IAAAjwB,EACkB9D,EAAKrU,MAAhCijC,EADS9qB,EACT8qB,aACFtiC,EAAS,CACbiC,IACE,4GAEEulC,EAAU,CACd7xB,SAAU,CACR+xB,cAAe,MACfzlC,IAAK,GACL0lC,IAAK,MAGT5jC,EAbiByT,EACKzT,UAYbu+B,EAActiC,EAAQwnC,GAC/BnqB,QAAQ8Y,IAAImM,EAActiC,EAAQwnC,EAAS,wFAGpC,IA4DcpgC,EAAiBC,EA5D/B4Q,EAC6CvM,KAAKrM,MAAdyH,GADpCmR,EACClU,SADDkU,EACWqqB,aADXrqB,EACyBumB,UADzBvmB,EACoCnR,MAIjC4E,KAAK47B,cAAc,QACjB57B,KAAK47B,cAAc,UACpB57B,KAAK47B,cAAc,SAClB57B,KAAK47B,cAAc,UAKrB57B,KAAK43B,eAAe,UACtB53B,KAAK43B,eAAe,QACpB53B,KAAK43B,eAAe,QACpB53B,KAAK43B,eAAe,QACrB53B,KAAK43B,eAAe,OAChB53B,KAAK43B,eAAe,WACtB53B,KAAK43B,eAAe,SAGd53B,KAAK43B,eAAe,eACrB53B,KAAK43B,eAAe,cACtB53B,KAAK43B,eAAe,YACnB53B,KAAK43B,eAAe,aACnB53B,KAAK43B,eAAe,cACpB53B,KAAK43B,eAAe,cACnB53B,KAAK43B,eAAe,eACtB53B,KAAK43B,eAAe,aACpB53B,KAAK43B,eAAe,aAGzB53B,KAAK43B,eAAe,QACjB53B,KAAK43B,eAAe,WACrB53B,KAAK43B,eAAe,UACf53B,KAAK43B,eAAe,eA2BnC,OACEjmC,EAAAC,EAAAC,cAAC69B,GAAD,MAJmBh0B,EAKJ/J,EAAAC,EAAAC,cAACqqC,GAAD,MALqBvgC,EAKAhK,EAAAC,EAAAC,cAACsqC,GAAD,CAAkB/gC,KAAMA,IAJrC,WAAvBA,EAAKtK,MAAM,KAAK,GAAkB6K,EAAeD,WAtHlBhI,aCI/Bya,GAAsB,CAC1B,KACA,OACA,OACA,OACA,MACA,OACA,UACA,YACA,SACA,gBACA,iBACA,gBACA,W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","file":"static/js/main.c9195bc0.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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YgpUWBRT+Dc0kRQsz9kHlwAAAg9pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczpwZGY9J2h0dHA6Ly9ucy5hZG9iZS5jb20vcGRmLzEuMy8nPgogIDxwZGY6QXV0aG9yPmFsYW4gYWxsZW48L3BkZjpBdXRob3I+CiA8L3JkZjpEZXNjcmlwdGlvbj4KCiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0nJwogIHhtbG5zOnhtcD0naHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyc+CiAgPHhtcDpDcmVhdG9yVG9vbD5DYW52YTwveG1wOkNyZWF0b3JUb29sPgogPC9yZGY6RGVzY3JpcHRpb24+CjwvcmRmOlJERj4KPC94OnhtcG1ldGE+Cjw/eHBhY2tldCBlbmQ9J3InPz70PihdAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/profile-background.a73f8825.png\";","module.exports = __webpack_public_path__ + \"static/media/profile-avatar.370a9c96.jpg\";","module.exports = __webpack_public_path__ + \"static/media/item-thumbnail.af82c420.png\";","var map = {\n\t\"./ad-writer.json\": 413,\n\t\"./annual-dinner.json\": 414,\n\t\"./car-guru.json\": 415,\n\t\"./ez-pay.json\": 416,\n\t\"./gratify.json\": 417,\n\t\"./main-event.json\": 418,\n\t\"./nike-slogan.json\": 419,\n\t\"./radio-show.json\": 420,\n\t\"./zona.json\": 421\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 412;","import { createBrowserHistory } from 'history';\n\nconst customHistory = createBrowserHistory();\nexport default customHistory;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Typography as Text } from '@material-ui/core';\n\nconst colorHandler = color => {\n  switch (true) {\n    case color === 'light':\n      return '#b7c0c6';\n    case color === 'bold':\n      return '#3f4a4d';\n    case color === 'contrast':\n      return '#fff';\n    case color && color.length > 0:\n      return color;\n    default:\n      return '#6d7383';\n  }\n};\n\nconst gutterHandler = values => {\n  if (values) {\n    const [topMargin, bottomMargin] = values.split(' ');\n    return `${topMargin} 0 ${bottomMargin || ''}`;\n  }\n  return '1rem 0';\n};\n\nconst Typography = styled(Text)`\n  color: ${({ color }) => colorHandler(color)};\n  margin: ${({ gutter }) => gutterHandler(gutter)};\n`;\n\nconst TextElement = ({ component: Component, color: color, ...rest }) => (\n  <Typography color={color} {...rest} />\n);\n\nexport default TextElement;\n","import { Link as RouterLink } from 'react-router-dom';\nimport styled from 'styled-components';\n\nconst Link = styled(RouterLink)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nexport default Link;\n","import { NavLink as Link } from 'react-router-dom';\nimport styled from 'styled-components';\n\nconst NavLink = styled(Link)`\n  color: inherit;\n  text-decoration: none;\n`;\n\nexport default NavLink;\n","import styled from 'styled-components';\nimport { Grid } from '@material-ui/core';\nimport Search from '@material-ui/icons/Search';\n\nexport const Container = styled(Grid)`\n  width: 250px;\n`;\n\nexport const SearchIcon = styled(Search)`\n  margin: 0 1rem -13px 0;\n`;\n","import React from 'react';\nimport { Grid, InputBase } from '@material-ui/core';\nimport { Container, SearchIcon } from './styles';\n\nconst SearchBar = () => (\n  <Container container>\n    <Grid item xs={2}>\n      <SearchIcon />\n    </Grid>\n    <Grid item xs={10}>\n      <InputBase\n        placeholder=\"Search\"\n        inputProps={{ 'aria-label': 'search' }}\n      />\n    </Grid>\n  </Container>\n);\n\nexport default SearchBar;\n","import React, { useState } from 'react';\n\nconst defaultContext = {\n  isAuthenticated: false,\n};\nconst Context = React.createContext(defaultContext);\n\nlet contextHandler = () => null;\n\nexport function withContext(Component) {\n  return function WrapperComponent(props) {\n    return (\n      <Context.Consumer>\n        {state => (\n          <Component\n            {...props}\n            context={state}\n            contextHandler={contextHandler}\n          />\n        )}\n      </Context.Consumer>\n    );\n  };\n}\n\nexport const Provider = ({ children }) => {\n  const [contextValue, setContextValue] = useState(defaultContext);\n  contextHandler = change => {\n    setContextValue(prevState => ({\n      ...prevState,\n      ...change,\n    }));\n  };\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>;\n};\nexport default Context;\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  AppBar,\n  Toolbar,\n  Button,\n  Menu,\n  MenuItem,\n} from '@material-ui/core';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport Typography from '../Typography/Typography';\nimport Link from '../Link/Link';\nimport NavLink from '../NavLink/NavLink';\nimport SearchBar from '../SearchBar/SearchBar';\nimport Logo from '../../assets/logo.png';\nimport { withContext } from '../../utility/context';\n\nconst AuthButtons = () => (\n  <Grid container justify=\"space-between\">\n    <Grid item>\n      <Link to=\"/login\">\n        <Button color=\"secondary\" variant=\"contained\">\n          Log In\n        </Button>\n      </Link>\n    </Grid>\n    <Grid item>\n      <Button color=\"secondary\" variant=\"outlined\">\n        Sign Up\n      </Button>\n    </Grid>\n  </Grid>\n);\n\nconst UserMenu = ({ contextHandler }) => {\n  const [menuState, setMenuState] = useState(null);\n  const menuOpenHandler = ({ currentTarget }) => setMenuState(currentTarget);\n  const menuCloseHandler = () => setMenuState(null);\n  const logOutHandler = () => {\n    contextHandler({ isAuthenticated: false });\n    menuCloseHandler();\n  };\n\n  return (\n    <>\n      <Button\n        aria-controls=\"simple-menu\"\n        aria-haspopup=\"true\"\n        onClick={menuOpenHandler}\n      >\n        <AccountCircleIcon />\n      </Button>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={menuState}\n        keepMounted\n        open={Boolean(menuState)}\n        onClose={menuCloseHandler}\n      >\n        <Link to=\"/profile\">\n          <MenuItem onClick={menuCloseHandler}>Profile</MenuItem>\n        </Link>\n\n        <Link to=\"/my-account\">\n          <MenuItem onClick={menuCloseHandler}>My account</MenuItem>\n        </Link>\n\n        <Link to=\"/swipe-folder\">\n          <MenuItem onClick={menuCloseHandler}>Swipe Folder</MenuItem>\n        </Link>\n\n        <Link to=\"/login\">\n          <MenuItem onClick={logOutHandler}>Logout</MenuItem>\n        </Link>\n      </Menu>\n    </>\n  );\n};\n\nconst MainNav = ({ context: { isAuthenticated }, contextHandler }) => (\n  <AppBar color=\"white\" position=\"static\">\n    <Toolbar>\n      <Grid container justify=\"space-between\">\n        <Grid item sm={8}>\n          <Grid container alignItems=\"center\" spacing={3}>\n            <Grid item>\n              <Link to=\"/\">\n                <img src={Logo} alt=\"Swipe Camp\" />\n              </Link>\n            </Grid>\n            <Grid item>\n              <NavLink to=\"/explore\">\n                <Typography color=\"light\" gutter=\"0 .4rem\">\n                  EXPLORE\n                </Typography>\n              </NavLink>\n            </Grid>\n            <Grid item>\n              <NavLink to=\"/workspace\">\n                <Typography color=\"light\" gutter=\"0 .4rem\">\n                  WORKSPACE\n                </Typography>\n              </NavLink>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item sm={4}>\n          <Grid\n            container\n            justify=\"space-between\"\n            style={{ marginTop: '.5rem' }}\n          >\n            <Grid item>\n              <SearchBar />\n            </Grid>\n            <Grid item xs={isAuthenticated ? 1 : 4}>\n              {isAuthenticated ? (\n                <UserMenu contextHandler={contextHandler} />\n              ) : (\n                <AuthButtons />\n              )}\n            </Grid>\n          </Grid>\n        </Grid>\n      </Grid>\n    </Toolbar>\n  </AppBar>\n);\n\nexport default withContext(MainNav);\n","import styled from 'styled-components';\nimport { Grid, FormControl, Select } from '@material-ui/core';\n\nexport const Container = styled(Grid)`\n  background-color: #f4f4f4;\n  padding: 1rem 2rem;\n`;\n\nexport const FormContainer = styled(FormControl)`\n  width: 110px;\n`;\n\nexport const SelectInput = styled(Select)`\n  height: 40px;\n`;\n","import React, { useState } from 'react';\nimport {\n  Grid,\n  MenuItem,\n  Button,\n  OutlinedInput,\n  Menu,\n  ButtonGroup,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  FormControl,\n  FormGroup,\n  FormLabel,\n  FormControlLabel,\n  Checkbox,\n} from '@material-ui/core';\nimport AppsIcon from '@material-ui/icons/Apps';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport VideoLabelIcon from '@material-ui/icons/VideoLabel';\nimport { Container, FormContainer, SelectInput } from './styles';\n\nconst BrowsingOptions = () => {\n  const [selectState, setSelectState] = useState('popular');\n  const selectStateHandler = ({ target: { value } }) => setSelectState(value);\n\n  const [gridEl, setGridEl] = useState(null);\n  const handleGridOpen = ({ currentTarget }) => setGridEl(currentTarget);\n  const handleGridClose = () => setGridEl(null);\n\n  const [filterDialogState, setFilterDialogState] = useState(null);\n  const filterDialogOpen = ({ currentTarget }) =>\n    setFilterDialogState(currentTarget);\n  const filterDialogClose = () => setFilterDialogState(null);\n\n  return (\n    <Container container justify=\"space-between\" alignItems=\"center\">\n      <Grid item>\n        <FormContainer variant=\"outlined\">\n          <SelectInput\n            value={selectState}\n            onChange={selectStateHandler}\n            input={<OutlinedInput name=\"age\" />}\n          >\n            <MenuItem value=\"popular\">Popular</MenuItem>\n            <MenuItem value=\"following\">Following</MenuItem>\n            <MenuItem value=\"recent\">Recent</MenuItem>\n            <MenuItem value=\"trending\">Trending</MenuItem>\n          </SelectInput>\n        </FormContainer>\n      </Grid>\n\n      <Grid item>\n        <Button color=\"primary\" variant=\"outlined\" onClick={filterDialogOpen}>\n          <FilterListIcon style={{ marginRight: '10px' }} />\n          Filter\n        </Button>\n\n        <Dialog\n          onClose={filterDialogClose}\n          aria-labelledby=\"simple-dialog-title\"\n          open={filterDialogState}\n        >\n          <DialogTitle id=\"simple-dialog-title\" align=\"center\">\n            Filter Items\n          </DialogTitle>\n          <DialogContent>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">Copy Types</FormLabel>\n              <FormGroup>\n                <FormControlLabel\n                  control={\n                    <Checkbox checked onChange={() => null} value=\"gilad\" />\n                  }\n                  label=\"Headers\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={jason}\n                      onChange={() => null}\n                      value=\"jason\"\n                    />\n                  }\n                  label=\"CTAs\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"Newsletter\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"FAQ\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"Slogans\"\n                />\n              </FormGroup>\n            </FormControl>\n            <FormControl component=\"fieldset\">\n              <FormLabel component=\"legend\">Project Types</FormLabel>\n              <FormGroup>\n                <FormControlLabel\n                  control={\n                    <Checkbox checked onChange={() => null} value=\"gilad\" />\n                  }\n                  label=\"Full Projects\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={jason}\n                      onChange={() => null}\n                      value=\"jason\"\n                    />\n                  }\n                  label=\"Email Subscriptions\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"About Pages\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"Social Media\"\n                />\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      // checked={antoine}\n                      onChange={() => null}\n                      value=\"antoine\"\n                    />\n                  }\n                  label=\"Testimonials\"\n                />\n              </FormGroup>\n            </FormControl>\n          </DialogContent>\n          <DialogActions>\n            <Button color=\"primary\" onClick={filterDialogClose}>\n              Close\n            </Button>\n          </DialogActions>\n        </Dialog>\n\n        <Button\n          color=\"primary\"\n          variant=\"outlined\"\n          style={{ marginLeft: '10px' }}\n          aria-controls=\"simple-menu\"\n          aria-haspopup=\"true\"\n          onClick={handleGridOpen}\n        >\n          <AppsIcon />\n        </Button>\n\n        <Menu\n          id=\"simple-menu\"\n          anchorEl={gridEl}\n          keepMounted\n          open={Boolean(gridEl)}\n          onClose={handleGridClose}\n        >\n          <MenuItem selected style={{ backgroundColor: '#fff' }}>\n            <ButtonGroup size=\"small\" aria-label=\"small outlined button group\">\n              <Button>\n                <VideoLabelIcon color=\"primary\" />\n              </Button>\n              <Button>\n                <VideoLabelIcon color=\"primary\" />\n              </Button>\n              <Button>\n                <VideoLabelIcon color=\"primary\" />\n              </Button>\n            </ButtonGroup>\n          </MenuItem>\n        </Menu>\n      </Grid>\n    </Container>\n  );\n};\n\nexport default BrowsingOptions;\n","import styled from 'styled-components';\nimport { Card, CardMedia, CardActions } from '@material-ui/core';\n\nexport const CardImage = styled(CardMedia)`\n  height: 250px;\n`;\n\nexport const CardInfoBar = styled(CardActions)`\n  background-color: #fff;\n  bottom: -50px;\n  left: 0;\n  position: absolute;\n  transition: bottom 0.2s;\n  width: 100%;\n`;\n\nexport const CardContainer = styled(Card)`\n  border-radius: 0;\n  margin: 0 auto;\n  max-width: 350px;\n  padding: 10px;\n  position: relative;\n  :hover {\n    ${CardInfoBar} {\n      bottom: 0;\n    }\n  }\n`;\n","import styled from 'styled-components';\nimport { Grid } from '@material-ui/core';\n\nexport const Container = styled(Grid)`\n  padding: 1rem 2rem 0.5rem;\n`;\n","import React from 'react';\nimport { Grid, Button } from '@material-ui/core';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport Typography from '../Typography/Typography';\nimport { Container } from './styles';\n\nconst ItemModalHeader = ({ title }) => (\n  <Container container alignItems=\"center\">\n    <Grid item xs={9} style={{ display: 'flex', flexDirection: 'column' }}>\n      <Typography gutter=\"0 0\" color=\"bold\" variant=\"h6\">\n        {title}\n      </Typography>\n      <Typography gutter=\"0 0\" color=\"light\" variant=\"caption\">\n        Created By: AlanBayWalker\n      </Typography>\n    </Grid>\n    <Grid item xs={3}>\n      <Button color=\"primary\" variant=\"outlined\" style={{ marginRight: '5px' }}>\n        <BookmarkIcon />\n      </Button>\n      <Button color=\"primary\" variant=\"outlined\">\n        <FavoriteIcon />\n      </Button>\n    </Grid>\n  </Container>\n);\n\nexport default ItemModalHeader;\n","import React from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogContentText,\n  Chip,\n  DialogActions,\n  Button,\n} from '@material-ui/core';\nimport Link from '../Link/Link';\nimport ItemModalHeader from '../ItemModalHeader/ItemModalHeader';\n\nconst BrowseItemModal = ({\n  dialogStatus,\n  dialogCloseHandler,\n  path,\n  title,\n  thumbnail,\n  description,\n  link,\n  categories,\n}) => {\n  const pathHandler = (originalProject, cloneProject) =>\n    path.split('/')[2] === 'browse' ? cloneProject : originalProject;\n\n  return (\n    <Dialog\n      open={dialogStatus}\n      onClose={dialogCloseHandler}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <ItemModalHeader title={title} />\n      <DialogContent>\n        <img\n          src={thumbnail}\n          alt={title}\n          style={{ height: 'auto', marginBottom: '2rem', width: '100%' }}\n        />\n        {categories.map(name => (\n          <Chip\n            color=\"primary\"\n            label={name}\n            variant=\"outlined\"\n            style={{ margin: '0 10px 2rem 0' }}\n          />\n        ))}\n        <DialogContentText>{description}</DialogContentText>\n      </DialogContent>\n      <DialogActions\n        style={{\n          justifyContent: 'space-between',\n          padding: '0 1.4rem 1.2rem 1rem',\n        }}\n      >\n        <Link to={`/explore/${link}`} onClick={dialogCloseHandler}>\n          <Button color=\"primary\" variant=\"outlined\">\n            {pathHandler('Browse Copies', 'Start Original')}\n          </Button>\n        </Link>\n        <Link to={`/workspace/${link}`}>\n          <Button color=\"primary\" variant=\"outlined\">\n            {pathHandler('Start', 'View')}\n          </Button>\n        </Link>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default BrowseItemModal;\n","import React, { useState } from 'react';\nimport { Grid, CardActionArea, Button } from '@material-ui/core';\nimport { CardContainer, CardImage, CardInfoBar } from './styles';\nimport Typography from '../Typography/Typography';\nimport BrowseItemModal from '../BrowseItemModal/BrowseItemModal';\nimport Thumbnail from '../../assets/item-thumbnail.png';\n\nconst BrowseItem = ({\n  path,\n  title,\n  thumbnail,\n  author,\n  description,\n  categories,\n  link,\n}) => {\n  const [dialogStatus, setDialogStatus] = useState(false);\n  const dialogCloseHandler = () => setDialogStatus(false);\n  const dialogOpenHandler = () => setDialogStatus(true);\n\n  const pathHandler = (originalProject, cloneProject) =>\n    path.split('/')[2] === 'browse' ? cloneProject : originalProject;\n\n  return (\n    <>\n      <CardContainer onClick={dialogOpenHandler}>\n        <CardActionArea>\n          <CardImage image={thumbnail} title={title} />\n        </CardActionArea>\n        <CardInfoBar>\n          <Grid container justify=\"space-between\" alignItems=\"center\">\n            <Grid item style={{ display: 'flex', flexDirection: 'column' }}>\n              <Typography color=\"bold\" gutter=\"0 0\" variant=\"\">\n                {title}\n              </Typography>\n              <Typography texColor=\"light\" gutter=\"0 0\" variant=\"caption\">\n                {pathHandler('Created', 'Cloned')} By: {author}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                color=\"primary\"\n                style={{ marginRight: '10px' }}\n              >\n                Save\n              </Button>\n              <Button variant=\"outlined\" size=\"small\" color=\"primary\">\n                Like\n              </Button>\n            </Grid>\n          </Grid>\n        </CardInfoBar>\n      </CardContainer>\n      <BrowseItemModal\n        dialogStatus={dialogStatus}\n        dialogCloseHandler={dialogCloseHandler}\n        path={path}\n        title={title}\n        thumbnail={thumbnail}\n        author={author}\n        description={description}\n        link={link}\n        categories={categories}\n      />\n    </>\n  );\n};\n\nexport default BrowseItem;\n","const imageUrl = 'https://res.cloudinary.com/dzv9elyyj/image/upload/';\nexport default [\n  {\n    title: 'Main Event',\n    thumbnail: `${imageUrl}v1565658278/Copywriting%20Thumbnails/MainEvent-thumbnail_e1bta5.jpg`,\n    author: 'AlanBayWalker',\n    categories: ['Social', 'Events', 'Family', 'Meetup'],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'main-event',\n  },\n  {\n    title: 'EzPay',\n    thumbnail: `${imageUrl}v1565658274/Copywriting%20Thumbnails/EzPay-thumbnail_dbukuv.png`,\n    author: 'AlanBayWalker',\n    categories: ['Financial', 'Tech', 'Ecommerce', 'Web', 'Purchasing', 'Apps'],\n    description:\n      'When Little Red Riding Hood gets to her grandmothers house, she notices some subtle changes in her grandmother appearance but ultimately ignores them and hops into bed with her. The wolf swallows her whole. He falls asleep from a massive food coma.',\n    link: 'ez-pay',\n  },\n  {\n    title: 'CarGuru',\n    thumbnail: `${imageUrl}v1565658268/Copywriting%20Thumbnails/CarGuru-thumbnail_vzzinp.png`,\n    author: 'AlanBayWalker',\n    categories: [\n      'Medical',\n      'Health',\n      'Finance',\n      'Tech',\n      'Manufacturing',\n      'Marketing',\n    ],\n    description:\n      'A hunter hears Little Red Riding Hoods screams, bursts through grandmas door, and cuts open the wolfs stomach, setting Little Red Riding Hood and her grandmother free. They then fill the wolfs body with heavy stones, and when he wakes up and tries to run away, he topples over and dies.',\n    link: 'car-guru',\n  },\n  {\n    title: 'Gratify',\n    thumbnail: `${imageUrl}v1565715193/Copywriting%20Thumbnails/gratify-thumbnail_hwtk0t.jpg`,\n    author: 'AlanBayWalker',\n    categories: ['Payment', 'Tech', 'Ecommerce', 'Start-Up', 'Web', 'Design'],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'gratify',\n  },\n  {\n    title: 'Nike',\n    thumbnail: `${imageUrl}v1565811949/Copywriting Projects/NikeSlogan_a8qrew.jpg`,\n    author: 'AlanBayWalker',\n    categories: ['Payment', 'Tech', 'Ecommerce', 'Start-Up', 'Web', 'Design'],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'nike-slogan',\n  },\n  {\n    title: 'Annual Dinner',\n    thumbnail: `${imageUrl}v1565812856/Copywriting%20Projects/AnnualDinner_bdwtbs.jpg`,\n    author: 'AlanBayWalker',\n    categories: [\n      'Service',\n      'Restaurant',\n      'Dinning',\n      'Brochure',\n      'Web',\n      'Design',\n    ],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'annual-dinner',\n  },\n  {\n    title: 'AdWriter',\n    thumbnail: `${imageUrl}v1565814564/Copywriting%20Thumbnails/AdWriter-thumbnail_nck4qu.jpg`,\n    author: 'AlanBayWalker',\n    categories: [\n      'Service',\n      'Restaurant',\n      'Dinning',\n      'Brochure',\n      'Web',\n      'Design',\n    ],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'ad-writer',\n  },\n  {\n    title: 'Zonna',\n    thumbnail: `${imageUrl}v1565813562/Copywriting%20Thumbnails/Zonna-thumbnail_z5a4dl.png`,\n    author: 'AlanBayWalker',\n    categories: ['Sales', 'Tech', 'Ecommerce', 'Start-Up', 'Web', 'Design'],\n    description:\n      \"A Big Bad Wolf approaches her, and asks where shes going. She naively tells him where her grandmothers house is, so he suggests she picks some flowers as a present for her. While shes distracted, he breaks into Little Red Riding Hoods grandmother's house, eats her, and puts on her clothes to impersonate her.\",\n    link: 'zona',\n  },\n];\n","import React from 'react';\nimport { Grid } from '@material-ui/core';\nimport _ from 'lodash';\nimport BrowseItem from '../BrowseItem/BrowseItem';\nimport projects from '../../utility/projects';\n\nconst projectsRender = path =>\n  projects.map(config => (\n    <Grid item xs={3}>\n      <BrowseItem path={path} {...config} />\n    </Grid>\n  ));\n\nconst projectCopyRender = path => {\n  const linkMatch = path.split('/')[2];\n  const [config] = projects.filter(({ link }) => link === linkMatch);\n  const result = [];\n  _.times(8, () => {\n    result.push(\n      <Grid item xs={3}>\n        <BrowseItem path={path} {...config} />\n      </Grid>\n    );\n  });\n  return result;\n};\n\nconst BrowseGrid = ({ path }) => (\n  <Grid\n    container\n    justify=\"space-between\"\n    spacing={8}\n    style={{ margin: 0, padding: '2rem 0', maxWidth: '100%' }}\n  >\n    {path.split('/').length < 3\n      ? projectsRender(path)\n      : projectCopyRender(path)}\n  </Grid>\n);\n\nexport default BrowseGrid;\n","import React from 'react';\nimport MainNav from '../MainNav/MainNav';\nimport BrowsingOptions from '../BrowsingOptions/BrowsingOptions';\nimport BrowseGrid from '../BrowseGrid/BrowseGrid';\n\nconst ExploreProjects = ({ location: { pathname } }) => (\n  <div>\n    <MainNav />\n    <BrowsingOptions />\n    <BrowseGrid path={pathname} />\n  </div>\n);\n\nexport default ExploreProjects;\n","import styled from 'styled-components';\nimport { Grid, Button } from '@material-ui/core';\nimport ProfileBackground from '../../assets/profile-background.png';\n\nexport const Header = styled.header`\n  background: #fff url(${ProfileBackground}) center center no-repeat;\n  background-size: cover;\n  height: 300px;\n  margin-bottom: 150px;\n  position: relative;\n  width: 100%;\n`;\n\nexport const HeaderContent = styled.div`\n  margin: 0;\n  position: absolute;\n  top: 80%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nexport const EditProfileButton = styled(Button)`\n  margin: 2rem 0 0 90vw;\n`;\n\nexport const ProfileAvatar = styled.img`\n  display: block;\n  height: 150px;\n  margin: 0 auto;\n  width: 150px;\n`;\n\nexport const HireButton = styled(Button)`\n  display: block;\n  margin: 0 auto;\n  width: 100px;\n`;\n\nexport const ProjectsContainer = styled(Grid)`\n  margin: 2rem 0;\n`;\n","import React from 'react';\nimport { Container, Grid } from '@material-ui/core';\nimport MainNav from '../MainNav/MainNav';\nimport BrowseItem from '../BrowseItem/BrowseItem';\nimport {\n  HeaderContent,\n  Header,\n  EditProfileButton,\n  ProfileAvatar,\n  HireButton,\n  ProjectsContainer,\n} from './styles';\nimport Typography from '../Typography/Typography';\nimport ProfileAvatarImage from '../../assets/profile-avatar.jpg';\nimport projects from '../../utility/projects';\n\nconst UserProfile = ({ location: { pathname } }) => (\n  <>\n    <MainNav />\n    <Header>\n      <EditProfileButton variant=\"outlined\">Edit Profile</EditProfileButton>\n      <HeaderContent>\n        <Typography variant=\"h4\" color=\"contrast\" align=\"center\">\n          Full Name\n        </Typography>\n        <Typography color=\"#cfcdcc\" align=\"center\">\n          @nickname\n        </Typography>\n        <ProfileAvatar src={ProfileAvatarImage} alt=\"Profile\" />\n        <Typography align=\"center\">New Orleans, Louisiana</Typography>\n        <HireButton variant=\"contained\" color=\"primary\">\n          Hire Me!\n        </HireButton>\n      </HeaderContent>\n    </Header>\n    <Container size=\"xs\">\n      <Typography color=\"light\" align=\"center\">\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n        tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n        veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\n        commodo consequat. Duis aute irure dolor in reprehenderit in voluptate\n        velit esse.\n      </Typography>\n      <ProjectsContainer container spacing={5}>\n        {projects.map(\n          (config, index) =>\n            index < 6 && (\n              <Grid item md={4}>\n                <BrowseItem path={pathname} {...config} />\n              </Grid>\n            )\n        )}\n      </ProjectsContainer>\n    </Container>\n  </>\n);\n\nexport default UserProfile;\n","import { fabric } from 'fabric';\r\n\r\nconst Arrow = fabric.util.createClass(fabric.Line, {\r\n    type: 'arrow',\r\n    superType: 'drawing',\r\n    initialize(points, options) {\r\n        options = options || {};\r\n        this.callSuper('initialize', points, options);\r\n    },\r\n    _render(ctx) {\r\n        this.callSuper('_render', ctx);\r\n        ctx.save();\r\n        const xDiff = this.x2 - this.x1;\r\n        const yDiff = this.y2 - this.y1;\r\n        const angle = Math.atan2(yDiff, xDiff);\r\n        ctx.translate((this.x2 - this.x1) / 2, (this.y2 - this.y1) / 2);\r\n        ctx.rotate(angle);\r\n        ctx.beginPath();\r\n        // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n        ctx.moveTo(5, 0);\r\n        ctx.lineTo(-5, 5);\r\n        ctx.lineTo(-5, -5);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.stroke;\r\n        ctx.fill();\r\n        ctx.restore();\r\n    },\r\n});\r\n\r\nArrow.fromObject = function (options, callback) {\r\n    return callback(new Arrow(options));\r\n};\r\n\r\nexport default Arrow;\r\n","import { fabric } from 'fabric';\r\n\r\nimport Arrow from './Arrow';\r\n\r\nexport default (mergedObjects, defaultOptions) => {\r\n    const fabricObjects = {\r\n        group: {\r\n            create: ({ objects, ...option }) => new fabric.Group(objects, {\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        'i-text': {\r\n            create: ({ text, ...option }) => new fabric.IText(text, {\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        textbox: {\r\n            create: ({ text, ...option }) => new fabric.Textbox(text, {\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        triangle: {\r\n            create: option => new fabric.Triangle({\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        circle: {\r\n            create: option => new fabric.Circle({\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        rect: {\r\n            create: option => new fabric.Rect({\r\n                ...defaultOptions,\r\n                ...option,\r\n            }),\r\n        },\r\n        image: {\r\n            create: ({ imgElement, ...option }) => new fabric.Image(imgElement, {\r\n                ...defaultOptions,\r\n                ...option,\r\n                crossOrigin: true,\r\n            }),\r\n        },\r\n        video: {\r\n            create: ({ videoElement, ...option }) => new fabric.Image(videoElement, {\r\n                ...defaultOptions,\r\n                ...option,\r\n                crossOrigin: true,\r\n            }),\r\n        },\r\n        polygon: {\r\n            create: ({ points, ...option }) => new fabric.Polygon(points, {\r\n                ...defaultOptions,\r\n                ...option,\r\n                perPixelTargetFind: true,\r\n            }),\r\n        },\r\n        line: {\r\n            create: ({ points, ...option }) => new fabric.Line(points, {\r\n                ...defaultOptions,\r\n                ...option,\r\n                points,\r\n            }),\r\n        },\r\n        arrow: {\r\n            create: ({ points, ...option }) => new Arrow(points, {\r\n                ...defaultOptions,\r\n                ...option,\r\n                points,\r\n            }),\r\n        },\r\n    };\r\n    if (mergedObjects) {\r\n        Object.assign(fabricObjects, mergedObjects);\r\n    }\r\n    return fabricObjects;\r\n};\r\n","import { fabric } from 'fabric';\r\nimport uuidv4 from 'uuid/v4';\r\n\r\nconst Link = fabric.util.createClass(fabric.Line, {\r\n    type: 'link',\r\n    superType: 'link',\r\n    initialize(fromNode, fromPort, toNode, toPort, options) {\r\n        options = options || {};\r\n        if (fromNode.type === 'BroadcastNode') {\r\n            fromPort = fromNode.fromPort[0];\r\n        }\r\n        const coords = [fromPort.left, fromPort.top, toPort.left, toPort.top];\r\n        this.callSuper('initialize', coords, options);\r\n        this.set({\r\n            strokeWidth: 4,\r\n            id: options.id || uuidv4(),\r\n            originX: 'center',\r\n            originY: 'center',\r\n            lockScalingX: true,\r\n            lockScalingY: true,\r\n            lockRotation: true,\r\n            hasRotatingPoint: false,\r\n            hasControls: false,\r\n            hasBorders: false,\r\n            perPixelTargetFind: true,\r\n            lockMovementX: true,\r\n            lockMovementY: true,\r\n            fromNode,\r\n            toNode,\r\n            selectable: false,\r\n        });\r\n    },\r\n    setPort(fromNode, fromPort, toNode, toPort) {\r\n        if (fromNode.type === 'BroadcastNode') {\r\n            fromPort = fromNode.fromPort[0];\r\n        }\r\n        fromPort.links.push(this);\r\n        toPort.links.push(this);\r\n        this.setPortEnabled(fromNode, fromPort, false);\r\n    },\r\n    setPortEnabled(node, port, enabled) {\r\n        if (node.descriptor.outPortType !== 'BROADCAST') {\r\n            port.set({\r\n                enabled,\r\n            });\r\n        } else {\r\n            if (node.toPort.id === port.id) {\r\n                return;\r\n            }\r\n            port.links.forEach((link, index) => {\r\n                link.set({\r\n                    fromPort: 'broadcastFromPort',\r\n                    fromPortIndex: index,\r\n                });\r\n            });\r\n            node.set({\r\n                configuration: {\r\n                    outputCount: port.links.length,\r\n                },\r\n            });\r\n        }\r\n    },\r\n    toObject() {\r\n        return fabric.util.object.extend(this.callSuper('toObject'), {\r\n            id: this.get('id'),\r\n            name: this.get('name'),\r\n            superType: this.get('superType'),\r\n            configuration: this.get('configuration'),\r\n            fromNode: this.get('fromNode'),\r\n            fromPort: this.get('fromPort'),\r\n            toNode: this.get('toNode'),\r\n            toPort: this.get('toPort'),\r\n        });\r\n    },\r\n    _render(ctx) {\r\n        this.callSuper('_render', ctx);\r\n        ctx.save();\r\n        const xDiff = this.x2 - this.x1;\r\n        const yDiff = this.y2 - this.y1;\r\n        const angle = Math.atan2(yDiff, xDiff);\r\n        ctx.translate((this.x2 - this.x1) / 2, (this.y2 - this.y1) / 2);\r\n        ctx.rotate(angle);\r\n        ctx.beginPath();\r\n        // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n        ctx.moveTo(5, 0);\r\n        ctx.lineTo(-5, 5);\r\n        ctx.lineTo(-5, -5);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.stroke;\r\n        ctx.fill();\r\n        ctx.restore();\r\n    },\r\n});\r\n\r\nLink.fromObject = function (options, callback) {\r\n    return callback(new Link(options));\r\n};\r\n\r\nexport default Link;\r\n","import { fabric } from 'fabric';\r\n\r\nimport Link from './Link';\r\n\r\nconst CurvedLink = fabric.util.createClass(Link, {\r\n    type: 'CurvedLink',\r\n    superType: 'link',\r\n    initialize(fromNode, fromPort, toNode, toPort, options) {\r\n        options = options || {};\r\n        this.callSuper('initialize', fromNode, fromPort, toNode, toPort, options);\r\n    },\r\n    _render(ctx) {\r\n        // Drawing curved link\r\n        const { x1, y1, x2, y2 } = this;\r\n        ctx.lineStyle = this.stroke;\r\n        const fp = { x: (x1 - x2) / 2, y: (y1 - y2) / 2 };\r\n        const sp = { x: (x2 - x1) / 2, y: (y2 - y1) / 2 };\r\n        ctx.beginPath();\r\n        ctx.moveTo(fp.x, fp.y);\r\n        ctx.bezierCurveTo(fp.x, sp.y, sp.x, fp.y, sp.x, sp.y);\r\n        ctx.stroke();\r\n        ctx.save();\r\n        const xDiff = x2 - x1;\r\n        const yDiff = y2 - y1;\r\n        const angle = Math.atan2(yDiff, xDiff);\r\n        ctx.translate((x2 - x1) / 2, (y2 - y1) / 2);\r\n        ctx.rotate(angle >= 0 ? 1.57 : -1.57);\r\n        ctx.beginPath();\r\n        // Move 5px in front of line to start the arrow so it does not have the square line end showing in front (0,0)\r\n        ctx.moveTo(5, 0);\r\n        ctx.lineTo(-5, 5);\r\n        ctx.lineTo(-5, -5);\r\n        ctx.closePath();\r\n        ctx.fillStyle = this.stroke;\r\n        ctx.fill();\r\n        ctx.restore();\r\n    },\r\n});\r\n\r\nCurvedLink.fromObject = function (options, callback)  {\r\n    return callback(new CurvedLink(options));\r\n};\r\n\r\nexport default CurvedLink;\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { fabric } from 'fabric';\r\nimport uuid from 'uuid/v4';\r\nimport debounce from 'lodash/debounce';\r\nimport interact from 'interactjs';\r\nimport anime from 'animejs';\r\n\r\nimport CanvasObjects from './CanvasObjects';\r\nimport CurvedLink from '../workflow/link/CurvedLink';\r\nimport Arrow from './Arrow';\r\n\r\nconst defaultCanvasOption = {\r\n    preserveObjectStacking: true,\r\n    width: 300,\r\n    height: 150,\r\n    selection: true,\r\n    defaultCursor: 'default',\r\n    backgroundColor: '#fff',\r\n};\r\n\r\nconst defaultWorkareaOption = {\r\n    width: 600,\r\n    height: 400,\r\n    workareaWidth: 600,\r\n    workareaHeight: 400,\r\n    lockScalingX: true,\r\n    lockScalingY: true,\r\n    scaleX: 1,\r\n    scaleY: 1,\r\n    backgroundColor: '#fff',\r\n    hasBorders: false,\r\n    hasControls: false,\r\n    selectable: false,\r\n    lockMovementX: true,\r\n    lockMovementY: true,\r\n    hoverCursor: 'default',\r\n    name: '',\r\n    id: 'workarea',\r\n    type: 'image',\r\n    layout: 'fixed', // fixed, responsive, fullscreen\r\n    link: {},\r\n    tooltip: {\r\n        enabled: false,\r\n    },\r\n    isElement: false,\r\n};\r\n\r\nconst defaultKeyboardEvent = {\r\n    move: true,\r\n    all: true,\r\n    copy: true,\r\n    paste: true,\r\n    esc: true,\r\n    del: true,\r\n    clipboard: false,\r\n    transaction: true,\r\n};\r\n\r\nclass Canvas extends Component {\r\n    static propsTypes = {\r\n        fabricObjects: PropTypes.object,\r\n        editable: PropTypes.bool,\r\n        canvasOption: PropTypes.object,\r\n        defaultOptions: PropTypes.object,\r\n        activeSelection: PropTypes.object,\r\n        tooltip: PropTypes.any,\r\n        zoomEnabled: PropTypes.bool,\r\n        minZoom: PropTypes.number,\r\n        maxZoom: PropTypes.number,\r\n        propertiesToInclude: PropTypes.array,\r\n        guidelineOption: PropTypes.obj,\r\n        workareaOption: PropTypes.obj,\r\n        gridOption: PropTypes.obj,\r\n        onModified: PropTypes.func,\r\n        onAdd: PropTypes.func,\r\n        onRemove: PropTypes.func,\r\n        onSelect: PropTypes.func,\r\n        onZoom: PropTypes.func,\r\n        onTooltip: PropTypes.func,\r\n        onLink: PropTypes.func,\r\n        onDblClick: PropTypes.func,\r\n        keyEvent: PropTypes.object,\r\n    }\r\n\r\n    static defaultProps = {\r\n        editable: true,\r\n        canvasOption: {\r\n            selection: true,\r\n        },\r\n        defaultOptions: {},\r\n        activeSelection: {\r\n            hasControls: true,\r\n        },\r\n        tooltip: null,\r\n        zoomEnabled: true,\r\n        minZoom: 0,\r\n        maxZoom: 300,\r\n        propertiesToInclude: [],\r\n        workareaOption: {},\r\n        gridOption: {\r\n            enabled: false,\r\n            grid: 10,\r\n            snapToGrid: false,\r\n        },\r\n        guidelineOption: {\r\n            enabled: true,\r\n        },\r\n        keyEvent: {},\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.fabricObjects = CanvasObjects(props.fabricObjects, props.defaultOptions);\r\n        this.container = React.createRef();\r\n        this.objects = [];\r\n        this.keyEvent = Object.assign({}, defaultKeyboardEvent, props.keyEvent);\r\n    }\r\n\r\n    state = {\r\n        id: uuid(),\r\n        clipboard: null,\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { id } = this.state;\r\n        const { editable, canvasOption, guidelineOption } = this.props;\r\n        const mergedCanvasOption = Object.assign({}, defaultCanvasOption, canvasOption);\r\n        this.canvas = new fabric.Canvas(`canvas_${id}`, mergedCanvasOption);\r\n        this.canvas.setBackgroundColor(mergedCanvasOption.backgroundColor, this.canvas.renderAll.bind(this.canvas));\r\n        this.workareaHandlers.init();\r\n        this.canvas.renderAll();\r\n        this.gridHandlers.init();\r\n        const { modified, moving, moved, scaling, rotating, mousewheel, mousedown, mousemove, mouseup, mouseout, selection, beforeRender, afterRender } = this.eventHandlers;\r\n        if (editable) {\r\n            this.transactionHandlers.init();\r\n            this.interactionMode = 'selection';\r\n            this.panning = false;\r\n            if (guidelineOption.enabled) {\r\n                this.guidelineHandlers.init();\r\n            }\r\n            this.contextmenuRef = document.createElement('div');\r\n            this.contextmenuRef.id = `${id}_contextmenu`;\r\n            this.contextmenuRef.className = 'rde-contextmenu contextmenu-hidden';\r\n            document.body.appendChild(this.contextmenuRef);\r\n            this.canvas.on({\r\n                'object:modified': modified,\r\n                'object:scaling': scaling,\r\n                'object:moving': moving,\r\n                'object:moved': moved,\r\n                'object:rotating': rotating,\r\n                'mouse:wheel': mousewheel,\r\n                'mouse:down': mousedown,\r\n                'mouse:move': mousemove,\r\n                'mouse:up': mouseup,\r\n                'selection:cleared': selection,\r\n                'selection:created': selection,\r\n                'selection:updated': selection,\r\n                'before:render': guidelineOption.enabled ? beforeRender : null,\r\n                'after:render': guidelineOption.enabled ? afterRender : null,\r\n            });\r\n        } else {\r\n            this.tooltipRef = document.createElement('div');\r\n            this.tooltipRef.id = `${id}_tooltip`;\r\n            this.tooltipRef.className = 'rde-tooltip tooltip-hidden';\r\n            document.body.appendChild(this.tooltipRef);\r\n            this.canvas.on({\r\n                'mouse:down': mousedown,\r\n                'mouse:move': mousemove,\r\n                'mouse:out': mouseout,\r\n                'mouse:up': mouseup,\r\n                'mouse:wheel': mousewheel,\r\n            });\r\n        }\r\n        this.attachEventListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (JSON.stringify(this.props.canvasOption) !== JSON.stringify(prevProps.canvasOption)) {\r\n            const { canvasOption: { width: currentWidth, height: currentHeight } } = this.props;\r\n            const { canvasOption: { width: prevWidth, height: prevHeight } } = prevProps;\r\n            if (currentWidth !== prevWidth || currentHeight !== prevHeight) {\r\n                this.eventHandlers.resize(prevWidth, prevHeight, currentWidth, currentHeight);\r\n            }\r\n            this.canvas.setBackgroundColor(this.props.canvasOption.backgroundColor, this.canvas.renderAll.bind(this.canvas));\r\n            if (typeof this.props.canvasOption.selection === 'undefined') {\r\n                this.canvas.selection = true;\r\n            } else {\r\n                this.canvas.selection = this.props.canvasOption.selection;\r\n            }\r\n        }\r\n        if (JSON.stringify(this.props.keyEvent) !== JSON.stringify(prevProps.keyEvent)) {\r\n            this.keyEvent = Object.assign({}, defaultKeyboardEvent, this.props.keyEvent);\r\n        }\r\n        if (JSON.stringify(this.props.fabricObjects) !== JSON.stringify(prevProps.fabricObjects)) {\r\n            this.fabricObjects = CanvasObjects(this.props.fabricObjects);\r\n        } else if (JSON.stringify(this.props.workareaOption) !== JSON.stringify(prevProps.workareaOption)) {\r\n            this.workarea.set({\r\n                ...this.props.workareaOption,\r\n            });\r\n        } else if (JSON.stringify(this.props.guidelineOption) !== JSON.stringify(prevProps.guidelineOption)) {\r\n            if (this.props.guidelineOption.enabled) {\r\n                this.canvas.on({\r\n                    'before:render': this.eventHandlers.beforeRender,\r\n                    'after:render': this.eventHandlers.afterRender,\r\n                });\r\n            } else {\r\n                this.canvas.off({\r\n                    'before:render': this.eventHandlers.beforeRender,\r\n                    'after:render': this.eventHandlers.afterRender,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.detachEventListener();\r\n        const { editable } = this.props;\r\n        const { modified, moving, moved, scaling, rotating, mousewheel, mousedown, mousemove, mouseup, mouseout, selection, beforeRender, afterRender } = this.eventHandlers;\r\n        if (editable) {\r\n            this.canvas.off({\r\n                'object:modified': modified,\r\n                'object:scaling': scaling,\r\n                'object:moving': moving,\r\n                'object:moved': moved,\r\n                'object:rotating': rotating,\r\n                'mouse:wheel': mousewheel,\r\n                'mouse:down': mousedown,\r\n                'mouse:move': mousemove,\r\n                'mouse:up': mouseup,\r\n                'selection:cleared': selection,\r\n                'selection:created': selection,\r\n                'selection:updated': selection,\r\n                'before:render': beforeRender,\r\n                'after:render': afterRender,\r\n            });\r\n        } else {\r\n            this.canvas.off({\r\n                'mouse:down': mousedown,\r\n                'mouse:move': mousemove,\r\n                'mouse:out': mouseout,\r\n                'mouse:up': mouseup,\r\n                'mouse:wheel': mousewheel,\r\n            });\r\n            this.handlers.getObjects().forEach((object) => {\r\n                object.off('mousedown', this.eventHandlers.object.mousedown);\r\n                if (object.anime) {\r\n                    anime.remove(object);\r\n                }\r\n            });\r\n        }\r\n        this.handlers.clear(true);\r\n        if (this.tooltipRef) {\r\n            document.body.removeChild(this.tooltipRef);\r\n        }\r\n    }\r\n\r\n    attachEventListener = () => {\r\n        // if add canvas wrapper element event, tabIndex = 1000;\r\n        this.canvas.wrapperEl.tabIndex = 1000;\r\n        document.addEventListener('keydown', this.eventHandlers.keydown, false);\r\n        document.addEventListener('keyup', this.eventHandlers.keyup, false);\r\n        document.addEventListener('mousedown', this.eventHandlers.onmousedown, false);\r\n        this.canvas.wrapperEl.addEventListener('contextmenu', this.eventHandlers.contextmenu, false);\r\n        if (this.keyEvent.clipboard) {\r\n            document.addEventListener('paste', this.eventHandlers.paste, false);\r\n        }\r\n    }\r\n\r\n    detachEventListener = () => {\r\n        document.removeEventListener('keydown', this.eventHandlers.keydown);\r\n        document.removeEventListener('keyup', this.eventHandlers.keyup);\r\n        document.removeEventListener('mousedown', this.eventHandlers.onmousedown);\r\n        this.canvas.wrapperEl.removeEventListener('contextmenu', this.eventHandlers.contextmenu);\r\n        if (this.keyEvent.clipboard) {\r\n            document.removeEventListener('paste', this.eventHandlers.paste);\r\n        }\r\n    }\r\n\r\n    /* eslint-disable react/sort-comp, react/prop-types */\r\n    handlers = {\r\n        /**\r\n         * Set the position on Object\r\n         *\r\n         * @param {fabric.Object} obj\r\n         * @param {boolean} centered\r\n         */\r\n        centerObject: (obj, centered) => {\r\n            if (centered) {\r\n                this.canvas.centerObject(obj);\r\n                obj.setCoords();\r\n            } else {\r\n                this.handlers.setByPartial(obj, {\r\n                    left: (obj.left / this.canvas.getZoom()) - (obj.width / 2) - (this.canvas.viewportTransform[4] / this.canvas.getZoom()),\r\n                    top: (obj.top / this.canvas.getZoom()) - (obj.height / 2) - (this.canvas.viewportTransform[5] / this.canvas.getZoom())\r\n                });\r\n            }\r\n        },\r\n        add: (obj, centered = true, loaded = false) => {\r\n            const { editable } = this.props;\r\n            const option = {\r\n                hasControls: editable,\r\n                hasBorders: editable,\r\n                selectable: editable,\r\n                lockMovementX: !editable,\r\n                lockMovementY: !editable,\r\n                hoverCursor: !editable ? 'pointer' : 'move',\r\n            };\r\n            if (obj.type === 'i-text') {\r\n                option.editable = false;\r\n            } else {\r\n                option.editable = editable;\r\n            }\r\n            if (editable && this.workarea.layout === 'fullscreen') {\r\n                option.scaleX = this.workarea.scaleX;\r\n                option.scaleY = this.workarea.scaleY;\r\n            }\r\n            const newOption = Object.assign({}, option, obj);\r\n            let createdObj;\r\n            if (obj.type === 'group') {\r\n                const objects = this.handlers.addGroup(newOption, centered, loaded);\r\n                const groupOption = Object.assign({}, newOption, { objects });\r\n                if (obj.type === 'image') {\r\n                    this.handlers.addImage(newOption, centered, loaded);\r\n                    return;\r\n                }\r\n                if (this.handlers.isElementType(obj.type)) {\r\n                    this.handlers.addElement(newOption, centered);\r\n                    return;\r\n                }\r\n                if (obj.type === 'svg') {\r\n                    this.handlers.addSVG(newOption, centered, loaded);\r\n                    return;\r\n                }\r\n                createdObj = this.fabricObjects[obj.type].create({ name: 'New Group', ...groupOption });\r\n                if (!editable && !this.handlers.isElementType(obj.type)) {\r\n                    createdObj.on('mousedown', this.eventHandlers.object.mousedown);\r\n                }\r\n                this.canvas.add(createdObj);\r\n                this.objects = this.handlers.getObjects();\r\n                if (obj.type !== 'polygon' && editable && !loaded) {\r\n                    this.handlers.centerObject(createdObj, centered);\r\n                }\r\n                if (!editable && createdObj.animation && createdObj.animation.autoplay) {\r\n                    this.animationHandlers.play(createdObj.id);\r\n                }\r\n                const { onAdd } = this.props;\r\n                if (onAdd && editable && !loaded) {\r\n                    onAdd(createdObj);\r\n                }\r\n                return createdObj;\r\n            }\r\n            if (obj.type === 'image') {\r\n                this.handlers.addImage(newOption, centered, loaded);\r\n                return;\r\n            }\r\n            if (this.handlers.isElementType(obj.type)) {\r\n                this.handlers.addElement(newOption, centered, loaded);\r\n                return;\r\n            }\r\n            if (obj.type === 'svg') {\r\n                this.handlers.addSVG(newOption, centered, loaded);\r\n                return;\r\n            }\r\n            if (obj.superType === 'link') {\r\n                return this.linkHandlers.create(newOption);\r\n            }\r\n            // Create canvas object\r\n            createdObj = this.fabricObjects[obj.type].create(newOption);\r\n            if (!editable && !this.handlers.isElementType(obj.type)) {\r\n                createdObj.on('mousedown', this.eventHandlers.object.mousedown);\r\n            }\r\n            if (createdObj.dbclick) {\r\n                createdObj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n            }\r\n            this.canvas.add(createdObj);\r\n            this.objects = this.handlers.getObjects();\r\n            if (\r\n                obj.superType !== 'drawing'\r\n                && obj.superType !== 'link'\r\n                && editable\r\n                && !loaded\r\n            ) {\r\n                this.handlers.centerObject(createdObj, centered);\r\n            }\r\n            if (createdObj.superType === 'node') {\r\n                this.portHandlers.create(createdObj);\r\n                if (createdObj.iconButton) {\r\n                    this.canvas.add(createdObj.iconButton);\r\n                }\r\n            }\r\n            if (!editable && createdObj.animation && createdObj.animation.autoplay) {\r\n                this.animationHandlers.play(createdObj.id);\r\n            }\r\n            const { onAdd, gridOption } = this.props;\r\n            if (onAdd && editable && !loaded) {\r\n                onAdd(createdObj);\r\n            }\r\n            if (!loaded) {\r\n                if (createdObj.superType === 'node') {\r\n                    createdObj.setShadow({\r\n                        color: createdObj.stroke,\r\n                    });\r\n                    this.nodeHandlers.highlightingNode(createdObj);\r\n                }\r\n            }\r\n            if (gridOption.enabled) {\r\n                this.gridHandlers.setCoords(createdObj);\r\n            }\r\n            return createdObj;\r\n        },\r\n        addGroup: (obj, centered = true, loaded = false) => {\r\n            return obj.objects.map((child) => {\r\n                return this.handlers.add(child, centered, loaded);\r\n            });\r\n        },\r\n        addImage: (obj, centered = true, loaded = false) => {\r\n            const { editable, defaultOptions } = this.props;\r\n            const image = new Image();\r\n            const { src, file, ...otherOption } = obj;\r\n            const createImage = (img) => {\r\n                const createdObj = new fabric.Image(img, {\r\n                    src,\r\n                    file,\r\n                    ...defaultOptions,\r\n                    ...otherOption,\r\n                });\r\n                if (!editable) {\r\n                    createdObj.on('mousedown', this.eventHandlers.object.mousedown);\r\n                }\r\n                this.canvas.add(createdObj);\r\n                this.objects = this.handlers.getObjects();\r\n                if (editable && !loaded) {\r\n                    this.handlers.centerObject(createdObj, centered);\r\n                }\r\n                if (!editable && createdObj.animation && createdObj.animation.autoplay) {\r\n                    this.animationHandlers.play(createdObj.id);\r\n                }\r\n                const { onAdd } = this.props;\r\n                if (onAdd && editable && !loaded) {\r\n                    onAdd(createdObj);\r\n                }\r\n            };\r\n            if (src) {\r\n                image.onload = () => {\r\n                    createImage(image);\r\n                };\r\n                image.src = src;\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                image.onload = () => {\r\n                    createImage(image);\r\n                };\r\n                image.src = e.target.result;\r\n            };\r\n            reader.readAsDataURL(file);\r\n        },\r\n        addElement: (obj, centered = true, loaded = false) => {\r\n            const { canvas } = this;\r\n            const { editable, defaultOptions } = this.props;\r\n            const { src, file, code, ...otherOption } = obj;\r\n            const createdObj = new fabric.Rect({\r\n                src,\r\n                file,\r\n                code,\r\n                ...defaultOptions,\r\n                ...otherOption,\r\n                fill: 'rgba(255, 255, 255, 0)',\r\n                stroke: 'rgba(255, 255, 255, 0)',\r\n            });\r\n            if (!editable) {\r\n                createdObj.on('mousedown', this.eventHandlers.object.mousedown);\r\n            }\r\n            canvas.add(createdObj);\r\n            this.objects = this.handlers.getObjects();\r\n            if (src || file || code) {\r\n                if (obj.type === 'video') {\r\n                    this.videoHandlers.set(createdObj, src || file);\r\n                } else {\r\n                    this.elementHandlers.set(createdObj, src || code);\r\n                }\r\n            }\r\n            if (editable && !loaded) {\r\n                this.handlers.centerObject(createdObj, centered);\r\n            }\r\n            const { onAdd } = this.props;\r\n            if (onAdd && editable && !loaded) {\r\n                onAdd(createdObj);\r\n            }\r\n        },\r\n        addSVG: (obj, centered = true, loaded = false) => {\r\n            const getSVGElements = (object, objects, options) => {\r\n                const createdObj = fabric.util.groupSVGElements(objects, options);\r\n                createdObj.set({ ...this.props.defaultOptions, ...object });\r\n                this.canvas.add(createdObj);\r\n                this.objects = this.handlers.getObjects();\r\n                const { onAdd, editable } = this.props;\r\n                if (!editable && !this.handlers.isElementType(obj.type)) {\r\n                    createdObj.on('mousedown', this.eventHandlers.object.mousedown);\r\n                }\r\n                if (createdObj.dbclick) {\r\n                    createdObj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                }\r\n                if (editable && !loaded) {\r\n                    this.handlers.centerObject(createdObj, centered);\r\n                }\r\n                if (!editable && createdObj.animation && createdObj.animation.autoplay) {\r\n                    this.animationHandlers.play(createdObj.id);\r\n                }\r\n                if (onAdd && !loaded && editable) {\r\n                    onAdd(obj);\r\n                }\r\n            };\r\n            if (obj.loadType === 'svg') {\r\n                fabric.loadSVGFromString(obj.svg, (objects, options) => {\r\n                    getSVGElements(obj, objects, options);\r\n                });\r\n            } else {\r\n                fabric.loadSVGFromURL(obj.svg, (objects, options) => {\r\n                    getSVGElements(obj, objects, options);\r\n                });\r\n            }\r\n        },\r\n        /**\r\n         * Remove object\r\n         *\r\n         * @param {fabric.Object} target\r\n         * @returns {any}\r\n         */\r\n        remove: (target) => {\r\n            const activeObject = target || this.canvas.getActiveObject();\r\n            if (this.prevTarget && this.prevTarget.superType === 'link') {\r\n                this.linkHandlers.remove(this.prevTarget);\r\n                return true;\r\n            }\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            if (typeof activeObject.deleted !== 'undefined' && !activeObject.deleted) {\r\n                return false;\r\n            }\r\n            if (activeObject.type !== 'activeSelection') {\r\n                this.canvas.discardActiveObject();\r\n                if (this.handlers.isElementType(activeObject.type)) {\r\n                    this.elementHandlers.removeById(activeObject.id);\r\n                    this.elementHandlers.removeStyleById(activeObject.id);\r\n                    this.elementHandlers.removeScriptById(activeObject.id);\r\n                }\r\n                if (activeObject.superType === 'link') {\r\n                    this.linkHandlers.remove(activeObject);\r\n                } else if (activeObject.superType === 'node') {\r\n                    if (activeObject.toPort) {\r\n                        if (activeObject.toPort.links.length) {\r\n                            activeObject.toPort.links.forEach((link) => {\r\n                                this.linkHandlers.remove(link, 'from');\r\n                            });\r\n                        }\r\n                        this.canvas.remove(activeObject.toPort);\r\n                    }\r\n                    if (activeObject.fromPort && activeObject.fromPort.length) {\r\n                        activeObject.fromPort.forEach((port) => {\r\n                            if (port.links.length) {\r\n                                port.links.forEach((link) => {\r\n                                    this.linkHandlers.remove(link, 'to');\r\n                                });\r\n                            }\r\n                            this.canvas.remove(port);\r\n                        });\r\n                    }\r\n                }\r\n                this.canvas.remove(activeObject);\r\n                this.handlers.removeOriginById(activeObject.id);\r\n            } else {\r\n                const { _objects: activeObjects } = activeObject;\r\n                const existDeleted = activeObjects.some(obj => typeof obj.deleted !== 'undefined' && !obj.deleted);\r\n                if (existDeleted) {\r\n                    return false;\r\n                }\r\n                this.canvas.discardActiveObject();\r\n                activeObjects.forEach((obj) => {\r\n                    if (this.handlers.isElementType(obj.type)) {\r\n                        this.elementHandlers.removeById(obj.id);\r\n                        this.elementHandlers.removeStyleById(obj.id);\r\n                        this.elementHandlers.removeScriptById(obj.id);\r\n                    } else if (obj.superType === 'node') {\r\n                        if (obj.toPort) {\r\n                            if (obj.toPort.links.length) {\r\n                                obj.toPort.links.forEach((link) => {\r\n                                    this.linkHandlers.remove(link, 'from');\r\n                                });\r\n                            }\r\n                            this.canvas.remove(obj.toPort);\r\n                        }\r\n                        if (obj.fromPort && obj.fromPort.length) {\r\n                            obj.fromPort.forEach((port) => {\r\n                                if (port.links.length) {\r\n                                    port.links.forEach((link) => {\r\n                                        this.linkHandlers.remove(link, 'to');\r\n                                    });\r\n                                }\r\n                                this.canvas.remove(port);\r\n                            });\r\n                        }\r\n                    }\r\n                    this.canvas.remove(obj);\r\n                    this.handlers.removeOriginById(obj.id);\r\n                });\r\n            }\r\n            const { onRemove } = this.props;\r\n            if (onRemove) {\r\n                onRemove(activeObject);\r\n            }\r\n        },\r\n        removeById: (id) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (findObject) {\r\n                this.handlers.remove(findObject);\r\n            }\r\n        },\r\n        duplicate: () => {\r\n            const { onAdd, propertiesToInclude, gridOption: { grid = 10 } } = this.props;\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            if (typeof activeObject.cloned !== 'undefined' && !activeObject.cloned) {\r\n                return false;\r\n            }\r\n            activeObject.clone((clonedObj) => {\r\n                this.canvas.discardActiveObject();\r\n                clonedObj.set({\r\n                    left: clonedObj.left + grid,\r\n                    top: clonedObj.top + grid,\r\n                    evented: true,\r\n                });\r\n                if (clonedObj.type === 'activeSelection') {\r\n                    clonedObj.canvas = this.canvas;\r\n                    clonedObj.forEachObject((obj) => {\r\n                        obj.set('id', uuid());\r\n                        this.canvas.add(obj);\r\n                        this.objects = this.handlers.getObjects();\r\n                        if (obj.dbclick) {\r\n                            obj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                        }\r\n                    });\r\n                    if (onAdd) {\r\n                        onAdd(clonedObj);\r\n                    }\r\n                    clonedObj.setCoords();\r\n                } else {\r\n                    if (activeObject.id === clonedObj.id) {\r\n                        clonedObj.set('id', uuid());\r\n                    }\r\n                    this.canvas.add(clonedObj);\r\n                    this.objects = this.handlers.getObjects();\r\n                    if (clonedObj.dbclick) {\r\n                        clonedObj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                    }\r\n                    if (onAdd) {\r\n                        onAdd(clonedObj);\r\n                    }\r\n                }\r\n                this.canvas.setActiveObject(clonedObj);\r\n                this.portHandlers.create(clonedObj);\r\n                this.canvas.requestRenderAll();\r\n            }, propertiesToInclude);\r\n        },\r\n        duplicateById: (id) => {\r\n            const { onAdd, propertiesToInclude, gridOption: { grid = 10 } } = this.props;\r\n            const findObject = this.handlers.findById(id);\r\n            if (findObject) {\r\n                if (typeof findObject.cloned !== 'undefined' && !findObject.cloned) {\r\n                    return false;\r\n                }\r\n                findObject.clone((cloned) => {\r\n                    cloned.set({\r\n                        left: cloned.left + grid,\r\n                        top: cloned.top + grid,\r\n                        id: uuid(),\r\n                        evented: true,\r\n                    });\r\n                    this.canvas.add(cloned);\r\n                    this.objects = this.handlers.getObjects();\r\n                    if (onAdd) {\r\n                        onAdd(cloned);\r\n                    }\r\n                    if (cloned.dbclick) {\r\n                        cloned.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                    }\r\n                    this.canvas.setActiveObject(cloned);\r\n                    this.portHandlers.create(cloned);\r\n                    this.canvas.requestRenderAll();\r\n                }, propertiesToInclude);\r\n            }\r\n        },\r\n        copyToClipboard: (value) => {\r\n            const textarea = document.createElement('textarea');\r\n            document.body.appendChild(textarea);\r\n            textarea.value = value;\r\n            textarea.select();\r\n            document.execCommand('copy');\r\n            document.body.removeChild(textarea);\r\n            this.canvas.wrapperEl.focus();\r\n        },\r\n        copy: () => {\r\n            const { propertiesToInclude } = this.props;\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject && activeObject.superType === 'link') {\r\n                return false;\r\n            }\r\n            if (activeObject) {\r\n                if (typeof activeObject.cloned !== 'undefined' && !activeObject.cloned) {\r\n                    return false;\r\n                }\r\n                if (activeObject.type === 'activeSelection') {\r\n                    if (activeObject.getObjects().some(obj => obj.superType === 'node')) {\r\n                        if (this.keyEvent.clipboard) {\r\n                            const links = [];\r\n                            const objects = activeObject.getObjects().map((obj, index) => {\r\n                                if (typeof obj.cloned !== 'undefined' && !obj.cloned) {\r\n                                    return null;\r\n                                }\r\n                                if (obj.fromPort.length) {\r\n                                    obj.fromPort.forEach((port) => {\r\n                                        if (port.links.length) {\r\n                                            port.links.forEach((link) => {\r\n                                                const linkTarget = {\r\n                                                    fromNodeIndex: index,\r\n                                                    fromPort: port.id,\r\n                                                    type: 'CurvedLink',\r\n                                                    superType: 'link',\r\n                                                };\r\n                                                const findIndex = activeObject.getObjects().findIndex(compObj => compObj.id === link.toNode.id);\r\n                                                if (findIndex >= 0) {\r\n                                                    linkTarget.toNodeIndex = findIndex;\r\n                                                    links.push(linkTarget);\r\n                                                }\r\n                                            });\r\n                                        }\r\n                                    });\r\n                                }\r\n                                return {\r\n                                    name: obj.name,\r\n                                    description: obj.description,\r\n                                    superType: obj.superType,\r\n                                    type: obj.type,\r\n                                    nodeClazz: obj.nodeClazz,\r\n                                    configuration: obj.configuration,\r\n                                    properties: {\r\n                                        left: activeObject.left + (activeObject.width / 2) + obj.left || 0,\r\n                                        top: activeObject.top + (activeObject.height / 2) + obj.top || 0,\r\n                                        iconName: obj.descriptor.icon,\r\n                                    },\r\n                                };\r\n                            });\r\n                            this.handlers.copyToClipboard(JSON.stringify(objects.concat(links), null, '\\t'));\r\n                            return;\r\n                        }\r\n                        this.setState({\r\n                            clipboard: activeObject,\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                activeObject.clone((cloned) => {\r\n                    if (this.keyEvent.clipboard) {\r\n                        if (cloned.superType === 'node') {\r\n                            const node = {\r\n                                name: cloned.name,\r\n                                description: cloned.description,\r\n                                superType: cloned.superType,\r\n                                type: cloned.type,\r\n                                nodeClazz: cloned.nodeClazz,\r\n                                configuration: cloned.configuration,\r\n                                properties: {\r\n                                    left: cloned.left || 0,\r\n                                    top: cloned.top || 0,\r\n                                    iconName: cloned.descriptor.icon,\r\n                                },\r\n                            };\r\n                            const objects = [node];\r\n                            this.handlers.copyToClipboard(JSON.stringify(objects, null, '\\t'));\r\n                            return;\r\n                        }\r\n                        this.handlers.copyToClipboard(JSON.stringify(cloned.toObject(this.props.propertiesToInclude), null, '\\t'));\r\n                        return;\r\n                    }\r\n                    this.setState({\r\n                        clipboard: cloned,\r\n                    });\r\n                }, propertiesToInclude);\r\n            }\r\n        },\r\n        paste: () => {\r\n            const { onAdd, propertiesToInclude, gridOption: { grid = 10 } } = this.props;\r\n            const { clipboard } = this.state;\r\n            if (!clipboard) {\r\n                return false;\r\n            }\r\n            if (typeof clipboard.cloned !== 'undefined' && !clipboard.cloned) {\r\n                return false;\r\n            }\r\n            if (clipboard.type === 'activeSelection') {\r\n                if (clipboard.getObjects().some(obj => obj.superType === 'node')) {\r\n                    this.canvas.discardActiveObject();\r\n                    const objects = [];\r\n                    const linkObjects = [];\r\n                    clipboard.getObjects().forEach((obj) => {\r\n                        if (typeof obj.cloned !== 'undefined' && !obj.cloned) {\r\n                            return false;\r\n                        }\r\n                        const clonedObj = obj.duplicate();\r\n                        if (clonedObj.type === 'SwitchNode') {\r\n                            clonedObj.set({\r\n                                left: obj.left + grid + grid,\r\n                                top: obj.top + grid,\r\n                            });\r\n                        } else {\r\n                            clonedObj.set({\r\n                                left: obj.left + grid,\r\n                                top: obj.top + grid,\r\n                            });\r\n                        }\r\n                        if (obj.fromPort.length) {\r\n                            obj.fromPort.forEach((port) => {\r\n                                if (port.links.length) {\r\n                                    port.links.forEach((link) => {\r\n                                        const linkTarget = {\r\n                                            fromNode: clonedObj.id,\r\n                                            fromPort: port.id,\r\n                                        };\r\n                                        const findIndex = clipboard.getObjects().findIndex(compObj => compObj.id === link.toNode.id);\r\n                                        if (findIndex >= 0) {\r\n                                            linkTarget.toNodeIndex = findIndex;\r\n                                            linkObjects.push(linkTarget);\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                        }\r\n                        if (clonedObj.dbclick) {\r\n                            clonedObj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                        }\r\n                        this.canvas.add(clonedObj);\r\n                        this.objects = this.handlers.getObjects();\r\n                        this.portHandlers.create(clonedObj);\r\n                        objects.push(clonedObj);\r\n                    });\r\n                    if (linkObjects.length) {\r\n                        linkObjects.forEach((linkObject) => {\r\n                            const { fromNode, fromPort, toNodeIndex } = linkObject;\r\n                            const toNode = objects[toNodeIndex];\r\n                            const link = {\r\n                                type: 'CurvedLink',\r\n                                fromNode,\r\n                                fromPort,\r\n                                toNode: toNode.id,\r\n                                toPort: toNode.toPort.id,\r\n                            };\r\n                            this.linkHandlers.create(link);\r\n                        });\r\n                    }\r\n                    const activeSelection = new fabric.ActiveSelection(objects, {\r\n                        canvas: this.canvas,\r\n                        ...this.props.activeSelection,\r\n                    });\r\n                    this.setState({\r\n                        clipboard: activeSelection,\r\n                    });\r\n                    this.canvas.setActiveObject(activeSelection);\r\n                    this.canvas.renderAll();\r\n                    return;\r\n                }\r\n            }\r\n            clipboard.clone((clonedObj) => {\r\n                this.canvas.discardActiveObject();\r\n                clonedObj.set({\r\n                    left: clonedObj.left + grid,\r\n                    top: clonedObj.top + grid,\r\n                    id: uuid(),\r\n                    evented: true,\r\n                });\r\n                if (clonedObj.type === 'activeSelection') {\r\n                    clonedObj.canvas = this.canvas;\r\n                    clonedObj.forEachObject((obj) => {\r\n                        obj.set('id', uuid());\r\n                        this.canvas.add(obj);\r\n                        if (obj.dbclick) {\r\n                            obj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                        }\r\n                        this.objects = this.handlers.getObjects();\r\n                    });\r\n                    if (onAdd) {\r\n                        onAdd(clonedObj);\r\n                    }\r\n                    clonedObj.setCoords();\r\n                } else {\r\n                    if (clonedObj.superType === 'node') {\r\n                        clonedObj = clonedObj.duplicate();\r\n                    } else {\r\n                        clonedObj.set('id', uuid());\r\n                    }\r\n                    this.canvas.add(clonedObj);\r\n                    if (clonedObj.dbclick) {\r\n                        clonedObj.on('mousedblclick', this.eventHandlers.object.mousedblclick);\r\n                    }\r\n                    this.objects = this.handlers.getObjects();\r\n                    if (onAdd) {\r\n                        onAdd(clonedObj);\r\n                    }\r\n                }\r\n                const newClipboard = clipboard.set({\r\n                    top: clonedObj.top,\r\n                    left: clonedObj.left,\r\n                });\r\n                this.setState({\r\n                    clipboard: newClipboard,\r\n                });\r\n                this.canvas.setActiveObject(clonedObj);\r\n                this.portHandlers.create(clonedObj);\r\n                this.canvas.requestRenderAll();\r\n            }, propertiesToInclude);\r\n        },\r\n        set: (key, value) => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            activeObject.set(key, value);\r\n            activeObject.setCoords();\r\n            this.canvas.requestRenderAll();\r\n            const { onModified } = this.props;\r\n            if (onModified) {\r\n                onModified(activeObject);\r\n            }\r\n        },\r\n        setObject: (option) => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            Object.keys(option).forEach((key) => {\r\n                if (option[key] !== activeObject[key]) {\r\n                    activeObject.set(key, option[key]);\r\n                    activeObject.setCoords();\r\n                }\r\n            });\r\n            this.canvas.requestRenderAll();\r\n            const { onModified } = this.props;\r\n            if (onModified) {\r\n                onModified(activeObject);\r\n            }\r\n        },\r\n        setByObject: (obj, key, value) => {\r\n            if (!obj) {\r\n                return;\r\n            }\r\n            obj.set(key, value);\r\n            obj.setCoords();\r\n            this.canvas.renderAll();\r\n            const { onModified } = this.props;\r\n            if (onModified) {\r\n                onModified(obj);\r\n            }\r\n        },\r\n        setById: (id, key, value) => {\r\n            const findObject = this.handlers.findById(id);\r\n            this.handlers.setByObject(findObject, key, value);\r\n        },\r\n        /**\r\n         * Set the option by partial\r\n         *\r\n         * @param {fabric.Object} object\r\n         * @param {*} option\r\n         * @returns {fabric.Object}\r\n         */\r\n        setByPartial: (object, option) => {\r\n            if (!object) {\r\n                return;\r\n            }\r\n            object.set(option);\r\n            object.setCoords();\r\n            this.canvas.renderAll();\r\n            return object;\r\n        },\r\n        setShadow: (key, value) => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            activeObject.setShadow(value);\r\n            this.canvas.requestRenderAll();\r\n            const { onModified } = this.props;\r\n            if (onModified) {\r\n                onModified(activeObject);\r\n            }\r\n        },\r\n        /**\r\n         * Load the image\r\n         *\r\n         * @param {fabric.Object} obj\r\n         * @param {string} src\r\n         */\r\n        loadImage: (obj, src) => {\r\n            fabric.util.loadImage(src, (source) => {\r\n                if (obj.type !== 'image') {\r\n                    obj.setPatternFill({\r\n                        source,\r\n                        repeat: 'repeat',\r\n                    });\r\n                    obj.setCoords();\r\n                    this.canvas.renderAll();\r\n                    return;\r\n                }\r\n                obj.setElement(source);\r\n                obj.setCoords();\r\n                this.canvas.renderAll();\r\n            });\r\n        },\r\n        /**\r\n         * Set the image\r\n         *\r\n         * @param {fabric.Object} obj\r\n         * @param {string | File} src\r\n         * @returns\r\n         */\r\n        setImage: (obj, src) => {\r\n            if (!src) {\r\n                this.handlers.loadImage(obj, null);\r\n                obj.set('file', null);\r\n                obj.set('src', null);\r\n                return;\r\n            }\r\n            if (typeof src === 'string') {\r\n                this.handlers.loadImage(obj, src);\r\n                obj.set('file', null);\r\n                obj.set('src', src);\r\n            } else {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    this.handlers.loadImage(obj, e.target.result);\r\n                    const file = {\r\n                        name: src.name,\r\n                        size: src.size,\r\n                        uid: src.uid,\r\n                        type: src.type,\r\n                    };\r\n                    obj.set('file', file);\r\n                    obj.set('src', null);\r\n                };\r\n                reader.readAsDataURL(src);\r\n            }\r\n        },\r\n        setImageById: (id, source) => {\r\n            const findObject = this.handlers.findById(id);\r\n            this.handlers.setImage(findObject, source);\r\n        },\r\n        find: obj => this.handlers.findById(obj.id),\r\n        findById: (id) => {\r\n            let findObject;\r\n            const exist = this.objects.some((obj) => {\r\n                if (obj.id === id) {\r\n                    findObject = obj;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!exist) {\r\n                console.warn('Not found object by id.');\r\n                return exist;\r\n            }\r\n            return findObject;\r\n        },\r\n        allSelect: () => {\r\n            const { canvas } = this;\r\n            canvas.discardActiveObject();\r\n            const filteredObjects = canvas.getObjects().filter((obj) => {\r\n                if (obj.id === 'workarea') {\r\n                    return false;\r\n                } else if (!obj.evented) {\r\n                    return false;\r\n                } else if (obj.superType === 'link') {\r\n                    return false;\r\n                } else if (obj.superType === 'port') {\r\n                    return false;\r\n                } else if (this.handlers.isElementType(obj.type)) {\r\n                    return false;\r\n                } else if (obj.lock) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            if (!filteredObjects.length) {\r\n                return;\r\n            }\r\n            if (filteredObjects.length === 1) {\r\n                canvas.setActiveObject(filteredObjects[0]);\r\n                canvas.renderAll();\r\n                return;\r\n            }\r\n            const activeSelection = new fabric.ActiveSelection(filteredObjects, {\r\n                canvas,\r\n                ...this.props.activeSelection,\r\n            });\r\n            canvas.setActiveObject(activeSelection);\r\n            canvas.renderAll();\r\n        },\r\n        select: (obj) => {\r\n            const findObject = this.handlers.find(obj);\r\n            if (findObject) {\r\n                this.canvas.discardActiveObject();\r\n                this.canvas.setActiveObject(findObject);\r\n                this.canvas.requestRenderAll();\r\n            }\r\n        },\r\n        selectById: (id) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (findObject) {\r\n                this.canvas.discardActiveObject();\r\n                this.canvas.setActiveObject(findObject);\r\n                this.canvas.requestRenderAll();\r\n            }\r\n        },\r\n        selectByObject: (object) => {\r\n            if (object) {\r\n                this.canvas.discardActiveObject();\r\n                this.canvas.setActiveObject(object);\r\n                this.canvas.requestRenderAll();\r\n            }\r\n        },\r\n        originScaleToResize: (obj, width, height) => {\r\n            if (obj.id === 'workarea') {\r\n                this.handlers.setByPartial(obj, {\r\n                    workareaWidth: obj.width,\r\n                    workareaHeight: obj.height,\r\n                });\r\n            }\r\n            this.handlers.setByPartial(obj, {\r\n                scaleX: width / obj.width,\r\n                scaleY: height / obj.height,\r\n            });\r\n        },\r\n        scaleToResize: (width, height) => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            const obj = {\r\n                id: activeObject.id,\r\n                scaleX: width / activeObject.width,\r\n                scaleY: height / activeObject.height,\r\n            };\r\n            this.handlers.setObject(obj);\r\n            activeObject.setCoords();\r\n            this.canvas.requestRenderAll();\r\n        },\r\n        importJSON: (json, callback) => {\r\n            if (typeof json === 'string') {\r\n                json = JSON.parse(json);\r\n            }\r\n            let prevLeft = 0;\r\n            let prevTop = 0;\r\n            this.canvas.setBackgroundColor(this.props.canvasOption.backgroundColor);\r\n            const workareaExist = json.filter(obj => obj.id === 'workarea');\r\n            if (!this.workarea) {\r\n                this.workareaHandlers.init();\r\n            }\r\n            if (!workareaExist.length) {\r\n                this.canvas.centerObject(this.workarea);\r\n                this.workarea.setCoords();\r\n                prevLeft = this.workarea.left;\r\n                prevTop = this.workarea.top;\r\n            } else {\r\n                const workarea = workareaExist[0];\r\n                prevLeft = workarea.left;\r\n                prevTop = workarea.top;\r\n                this.workarea.set(workarea);\r\n                this.canvas.centerObject(this.workarea);\r\n                this.workareaHandlers.setImage(workarea.src, true);\r\n                this.workarea.setCoords();\r\n            }\r\n            setTimeout(() => {\r\n                json.forEach((obj) => {\r\n                    if (obj.id === 'workarea') {\r\n                        return;\r\n                    }\r\n                    // if (workareaExist.length && obj.id === 'workarea') {\r\n                    //     prevLeft = obj.left;\r\n                    //     prevTop = obj.top;\r\n                    //     this.workarea.set(obj);\r\n                    //     this.canvas.centerObject(this.workarea);\r\n                    //     this.workareaHandlers.setImage(obj.src, true);\r\n                    //     this.workarea.setCoords();\r\n                    //     return;\r\n                    // }\r\n                    const canvasWidth = this.canvas.getWidth();\r\n                    const canvasHeight = this.canvas.getHeight();\r\n                    const { width, height, scaleX, scaleY, layout, left, top } = this.workarea;\r\n                    if (layout === 'fullscreen') {\r\n                        const leftRatio = canvasWidth / (width * scaleX);\r\n                        const topRatio = canvasHeight / (height * scaleY);\r\n                        obj.left *= leftRatio;\r\n                        obj.top *= topRatio;\r\n                        obj.scaleX *= leftRatio;\r\n                        obj.scaleY *= topRatio;\r\n                    } else {\r\n                        const diffLeft = left - prevLeft;\r\n                        const diffTop = top - prevTop;\r\n                        obj.left += diffLeft;\r\n                        obj.top += diffTop;\r\n                    }\r\n                    if (this.handlers.isElementType(obj.type)) {\r\n                        obj.id = uuid();\r\n                    }\r\n                    this.handlers.add(obj, false, true);\r\n                    this.canvas.renderAll();\r\n                });\r\n                if (callback) {\r\n                    callback(this.canvas);\r\n                }\r\n            }, 300);\r\n            this.canvas.setZoom(1);\r\n        },\r\n        exportJSON: () => this.canvas.toDatalessJSON(this.props.propertiesToInclude),\r\n        getObjects: () => this.canvas.getObjects().filter((obj) => {\r\n            if (obj.id === 'workarea') {\r\n                return false;\r\n            } else if (obj.id === 'grid') {\r\n                return false;\r\n            } else if (obj.superType === 'port') {\r\n                return false;\r\n            } else if (!obj.id) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }),\r\n        bringForward: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject) {\r\n                this.canvas.bringForward(activeObject);\r\n                const { onModified } = this.props;\r\n                if (onModified) {\r\n                    onModified(activeObject);\r\n                }\r\n            }\r\n        },\r\n        bringToFront: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject) {\r\n                this.canvas.bringToFront(activeObject);\r\n                const { onModified } = this.props;\r\n                if (onModified) {\r\n                    onModified(activeObject);\r\n                }\r\n            }\r\n        },\r\n        sendBackwards: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject) {\r\n                if (this.canvas.getObjects()[1].id === activeObject.id) {\r\n                    return;\r\n                }\r\n                this.canvas.sendBackwards(activeObject);\r\n                const { onModified } = this.props;\r\n                if (onModified) {\r\n                    onModified(activeObject);\r\n                }\r\n            }\r\n        },\r\n        sendToBack: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject) {\r\n                this.canvas.sendToBack(activeObject);\r\n                this.canvas.sendToBack(this.canvas.getObjects()[1]);\r\n                const { onModified } = this.props;\r\n                if (onModified) {\r\n                    onModified(activeObject);\r\n                }\r\n            }\r\n        },\r\n        clear: (workarea = false) => {\r\n            const { canvas } = this;\r\n            const ids = canvas.getObjects().reduce((prev, curr) => {\r\n                if (this.handlers.isElementType(curr.type)) {\r\n                    prev.push(curr.id);\r\n                    return prev;\r\n                }\r\n                return prev;\r\n            }, []);\r\n            this.elementHandlers.removeByIds(ids);\r\n            if (workarea) {\r\n                canvas.clear();\r\n                this.workarea = null;\r\n            } else {\r\n                canvas.getObjects().forEach((obj) => {\r\n                    if (obj.id === 'grid') {\r\n                        return;\r\n                    }\r\n                    if (obj.id !== 'workarea') {\r\n                        canvas.remove(obj);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        toGroup: () => {\r\n            const { canvas } = this;\r\n            if (!canvas.getActiveObject()) {\r\n                return;\r\n            }\r\n            if (canvas.getActiveObject().type !== 'activeSelection') {\r\n                return;\r\n            }\r\n            const group = canvas.getActiveObject().toGroup();\r\n            group.set({\r\n                id: uuid(),\r\n                name: 'New group',\r\n                ...this.props.defaultOptions,\r\n            });\r\n            const { onSelect } = this.props;\r\n            if (onSelect) {\r\n                onSelect(group);\r\n            }\r\n            canvas.renderAll();\r\n        },\r\n        toActiveSelection: () => {\r\n            const { canvas } = this;\r\n            if (!canvas.getActiveObject()) {\r\n                return;\r\n            }\r\n            if (canvas.getActiveObject().type !== 'group') {\r\n                return;\r\n            }\r\n            const activeObject = canvas.getActiveObject().toActiveSelection();\r\n            const { onSelect } = this.props;\r\n            if (onSelect) {\r\n                onSelect(activeObject);\r\n            }\r\n            canvas.renderAll();\r\n        },\r\n        isElementType: (type) => {\r\n            return type === 'video' || type === 'element' || type === 'iframe';\r\n        },\r\n        getOriginObjects: () => this.objects,\r\n        findOriginById: (id) => {\r\n            let findObject;\r\n            const exist = this.objects.some((obj) => {\r\n                if (obj.id === id) {\r\n                    findObject = obj;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!exist) {\r\n                console.warn('Not found object by id.');\r\n                return exist;\r\n            }\r\n            return findObject;\r\n        },\r\n        findOriginByIdWithIndex: (id) => {\r\n            let findObject;\r\n            let index;\r\n            const exist = this.objects.some((obj, i) => {\r\n                if (obj.id === id) {\r\n                    findObject = obj;\r\n                    index = i;\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (!exist) {\r\n                console.warn('Not found object by id.');\r\n                return exist;\r\n            }\r\n            return {\r\n                object: findObject,\r\n                index,\r\n            };\r\n        },\r\n        removeOriginById: (id) => {\r\n            const object = this.handlers.findOriginByIdWithIndex(id);\r\n            if (object) {\r\n                this.objects.splice(object.index, 1);\r\n            }\r\n        },\r\n        saveImage: (targetObject, option = { name: 'New Image', format: 'png', quality: 1 }) => {\r\n            let dataUrl;\r\n            let target = targetObject;\r\n            if (target) {\r\n                dataUrl = target.toDataURL(option);\r\n            } else {\r\n                target = this.canvas.getActiveObject();\r\n                if (target) {\r\n                    dataUrl = target.toDataURL(option);\r\n                }\r\n            }\r\n            if (dataUrl) {\r\n                const anchorEl = document.createElement('a');\r\n                anchorEl.href = dataUrl;\r\n                anchorEl.download = `${option.name}.png`;\r\n                document.body.appendChild(anchorEl); // required for firefox\r\n                anchorEl.click();\r\n                anchorEl.remove();\r\n            }\r\n        },\r\n        saveCanvasImage: (option = { name: 'New Image', format: 'png', quality: 1 }) => {\r\n            const dataUrl = this.canvas.toDataURL(option);\r\n            if (dataUrl) {\r\n                const anchorEl = document.createElement('a');\r\n                anchorEl.href = dataUrl;\r\n                anchorEl.download = `${option.name}.png`;\r\n                document.body.appendChild(anchorEl); // required for firefox\r\n                anchorEl.click();\r\n                anchorEl.remove();\r\n            }\r\n        },\r\n    }\r\n\r\n    cropHandlers = {\r\n        validType: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return true;\r\n            }\r\n            if (activeObject.type === 'image') {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n        start: () => {\r\n            if (this.cropHandlers.validType()) {\r\n                return;\r\n            }\r\n            this.interactionMode = 'crop';\r\n            this.cropObject = this.canvas.getActiveObject();\r\n            const { left, top } = this.cropObject;\r\n            this.cropRect = new fabric.Rect({\r\n                width: this.cropObject.width,\r\n                height: this.cropObject.height,\r\n                scaleX: this.cropObject.scaleX,\r\n                scaleY: this.cropObject.scaleY,\r\n                originX: 'left',\r\n                originY: 'top',\r\n                left,\r\n                top,\r\n                hasRotatingPoint: false,\r\n                fill: 'rgba(0, 0, 0, 0.2)',\r\n            });\r\n            this.canvas.add(this.cropRect);\r\n            this.canvas.setActiveObject(this.cropRect);\r\n            this.cropObject.selectable = false;\r\n            this.cropObject.evented = false;\r\n            this.canvas.renderAll();\r\n        },\r\n        finish: () => {\r\n            const { left, top, width, height, scaleX, scaleY } = this.cropRect;\r\n            const croppedImg = this.cropObject.toDataURL({\r\n                left: left - this.cropObject.left,\r\n                top: top - this.cropObject.top,\r\n                width: width * scaleX,\r\n                height: height * scaleY,\r\n            });\r\n            this.handlers.setImage(this.cropObject, croppedImg);\r\n            this.cropHandlers.cancel();\r\n        },\r\n        cancel: () => {\r\n            this.interactionMode = 'selection';\r\n            this.cropObject.selectable = true;\r\n            this.cropObject.evented = true;\r\n            this.canvas.setActiveObject(this.cropObject);\r\n            this.canvas.remove(this.cropRect);\r\n            this.cropRect = null;\r\n            // this.cropObject = null;\r\n            this.canvas.renderAll();\r\n        },\r\n        resize: (opt) => {\r\n            const { target, transform: { original, corner } } = opt;\r\n            const { left, top, width, height, scaleX, scaleY } = target;\r\n            const { left: cropLeft, top: cropTop, width: cropWidth, height: cropHeight, scaleX: cropScaleX, scaleY: cropScaleY } = this.cropObject;\r\n            if (corner === 'tl') {\r\n                if (Math.round(cropLeft) > Math.round(left)) { // left\r\n                    const originRight = Math.round(cropLeft + cropWidth);\r\n                    const targetRight = Math.round(target.getBoundingRect().left + target.getBoundingRect().width);\r\n                    const diffRightRatio = 1 - ((originRight - targetRight) / cropWidth);\r\n                    target.set({\r\n                        left: cropLeft,\r\n                        scaleX: diffRightRatio > 1 ? 1 : diffRightRatio,\r\n                    });\r\n                }\r\n                if (Math.round(cropTop) > Math.round(top)) { // top\r\n                    const originBottom = Math.round(cropTop + cropHeight);\r\n                    const targetBottom = Math.round(target.getBoundingRect().top + target.getBoundingRect().height);\r\n                    const diffBottomRatio = 1 - ((originBottom - targetBottom) / cropHeight);\r\n                    target.set({\r\n                        top: cropTop,\r\n                        scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'bl') {\r\n                if (Math.round(cropLeft) > Math.round(left)) { // left\r\n                    const originRight = Math.round(cropLeft + cropWidth);\r\n                    const targetRight = Math.round(target.getBoundingRect().left + target.getBoundingRect().width);\r\n                    const diffRightRatio = 1 - ((originRight - targetRight) / cropWidth);\r\n                    target.set({\r\n                        left: cropLeft,\r\n                        scaleX: diffRightRatio > 1 ? 1 : diffRightRatio,\r\n                    });\r\n                }\r\n                if (Math.round(cropTop + (cropHeight * cropScaleY) < Math.round(top + (height * scaleY)))) { // bottom\r\n                    const diffTopRatio = 1 - ((original.top - cropTop) / cropHeight);\r\n                    target.set({\r\n                        top: original.top,\r\n                        scaleY: diffTopRatio > 1 ? 1 : diffTopRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'tr') {\r\n                if (Math.round(cropLeft + (cropWidth * cropScaleX)) < Math.round(left + (width * scaleX))) { // right\r\n                    const diffLeftRatio = 1 - ((original.left - cropLeft) / cropWidth);\r\n                    target.set({\r\n                        left: original.left,\r\n                        scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio,\r\n                    });\r\n                }\r\n                if (Math.round(cropTop) > Math.round(top)) { // top\r\n                    const originBottom = Math.round(cropTop + cropHeight);\r\n                    const targetBottom = Math.round(target.getBoundingRect().top + target.getBoundingRect().height);\r\n                    const diffBottomRatio = 1 - ((originBottom - targetBottom) / cropHeight);\r\n                    target.set({\r\n                        top: cropTop,\r\n                        scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'br') {\r\n                if (Math.round(cropLeft + (cropWidth * cropScaleX)) < Math.round(left + (width * scaleX))) { // right\r\n                    const diffLeftRatio = 1 - ((original.left - cropLeft) / cropWidth);\r\n                    target.set({\r\n                        left: original.left,\r\n                        scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio,\r\n                    });\r\n                }\r\n                if (Math.round(cropTop + (cropHeight * cropScaleY) < Math.round(top + (height * scaleY)))) { // bottom\r\n                    const diffTopRatio = 1 - ((original.top - cropTop) / cropHeight);\r\n                    target.set({\r\n                        top: original.top,\r\n                        scaleY: diffTopRatio > 1 ? 1 : diffTopRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'ml') {\r\n                if (Math.round(cropLeft) > Math.round(left)) { // left\r\n                    const originRight = Math.round(cropLeft + cropWidth);\r\n                    const targetRight = Math.round(target.getBoundingRect().left + target.getBoundingRect().width);\r\n                    const diffRightRatio = 1 - ((originRight - targetRight) / cropWidth);\r\n                    target.set({\r\n                        left: cropLeft,\r\n                        scaleX: diffRightRatio > 1 ? 1 : diffRightRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'mt') {\r\n                if (Math.round(cropTop) > Math.round(top)) { // top\r\n                    const originBottom = Math.round(cropTop + cropHeight);\r\n                    const targetBottom = Math.round(target.getBoundingRect().top + target.getBoundingRect().height);\r\n                    const diffBottomRatio = 1 - ((originBottom - targetBottom) / cropHeight);\r\n                    target.set({\r\n                        top: cropTop,\r\n                        scaleY: diffBottomRatio > 1 ? 1 : diffBottomRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'mb') {\r\n                if (Math.round(cropTop + (cropHeight * cropScaleY) < Math.round(top + (height * scaleY)))) { // bottom\r\n                    const diffTopRatio = 1 - ((original.top - cropTop) / cropHeight);\r\n                    target.set({\r\n                        top: original.top,\r\n                        scaleY: diffTopRatio > 1 ? 1 : diffTopRatio,\r\n                    });\r\n                }\r\n            } else if (corner === 'mr') {\r\n                if (Math.round(cropLeft + (cropWidth * cropScaleX)) < Math.round(left + (width * scaleX))) { // right\r\n                    const diffLeftRatio = 1 - ((original.left - cropLeft) / cropWidth);\r\n                    target.set({\r\n                        left: original.left,\r\n                        scaleX: diffLeftRatio > 1 ? 1 : diffLeftRatio,\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        moving: (opt) => {\r\n            const { target } = opt;\r\n            const { left, top, width, height, scaleX, scaleY } = target;\r\n            const { left: cropLeft, top: cropTop, width: cropWidth, height: cropHeight } = this.cropObject.getBoundingRect();\r\n            const movedTop = () => {\r\n                if (Math.round(cropTop) >= Math.round(top)) {\r\n                    target.set({\r\n                        top: cropTop,\r\n                    });\r\n                } else if (Math.round(cropTop + cropHeight) <= Math.round(top + (height * scaleY))) {\r\n                    target.set({\r\n                        top: cropTop + cropHeight - (height * scaleY),\r\n                    });\r\n                }\r\n            };\r\n            if (Math.round(cropLeft) >= Math.round(left)) {\r\n                target.set({\r\n                    left: Math.max(left, cropLeft),\r\n                });\r\n                movedTop();\r\n            } else if (Math.round(cropLeft + cropWidth) <= Math.round(left + (width * scaleX))) {\r\n                target.set({\r\n                    left: cropLeft + cropWidth - (width * scaleX),\r\n                });\r\n                movedTop();\r\n            } else if (Math.round(cropTop) >= Math.round(top)) {\r\n                target.set({\r\n                    top: cropTop,\r\n                });\r\n            } else if (Math.round(cropTop + cropHeight) <= Math.round(top + (height * scaleY))) {\r\n                target.set({\r\n                    top: cropTop + cropHeight - (height * scaleY),\r\n                });\r\n            }\r\n        },\r\n    }\r\n\r\n    modeHandlers = {\r\n        selection: (callback) => {\r\n            if (this.interactionMode === 'selection') {\r\n                return;\r\n            }\r\n            this.interactionMode = 'selection';\r\n            if (typeof this.props.canvasOption.selection === 'undefined') {\r\n                this.canvas.selection = true;\r\n            } else {\r\n                this.canvas.selection = this.props.canvasOption.selection;\r\n            }\r\n            this.canvas.defaultCursor = 'default';\r\n            this.workarea.hoverCursor = 'default';\r\n            this.canvas.getObjects().forEach((obj) => {\r\n                if (obj.id !== 'workarea') {\r\n                    if (obj.id === 'grid') {\r\n                        obj.selectable = false;\r\n                        obj.evented = false;\r\n                        return;\r\n                    }\r\n                    if (callback) {\r\n                        const ret = callback(obj);\r\n                        if (typeof ret === 'object') {\r\n                            obj.selectable = ret.selectable;\r\n                            obj.evented = ret.evented;\r\n                        } else {\r\n                            obj.selectable = ret;\r\n                            obj.evented = ret;\r\n                        }\r\n                    } else {\r\n                        obj.selectable = true;\r\n                        obj.evented = true;\r\n                    }\r\n                }\r\n            });\r\n            this.canvas.renderAll();\r\n        },\r\n        grab: (callback) => {\r\n            if (this.interactionMode === 'grab') {\r\n                return;\r\n            }\r\n            this.interactionMode = 'grab';\r\n            this.canvas.selection = false;\r\n            this.canvas.defaultCursor = 'grab';\r\n            this.workarea.hoverCursor = 'grab';\r\n            this.canvas.getObjects().forEach((obj) => {\r\n                if (obj.id !== 'workarea') {\r\n                    if (callback) {\r\n                        const ret = callback(obj);\r\n                        if (typeof ret === 'object') {\r\n                            obj.selectable = ret.selectable;\r\n                            obj.evented = ret.evented;\r\n                        } else {\r\n                            obj.selectable = ret;\r\n                            obj.evented = ret;\r\n                        }\r\n                    } else {\r\n                        obj.selectable = false;\r\n                        obj.evented = this.props.editable ? false : true;\r\n                    }\r\n                }\r\n            });\r\n            this.canvas.renderAll();\r\n        },\r\n        drawing: (callback, type) => {\r\n            this.interactionMode = type;\r\n            this.canvas.selection = false;\r\n            this.canvas.defaultCursor = 'pointer';\r\n            this.workarea.hoverCursor = 'pointer';\r\n            this.canvas.getObjects().forEach((obj) => {\r\n                if (obj.id !== 'workarea') {\r\n                    if (callback) {\r\n                        const ret = callback(obj);\r\n                        if (typeof ret === 'object') {\r\n                            obj.selectable = ret.selectable;\r\n                            obj.evented = ret.evented;\r\n                        } else {\r\n                            obj.selectable = ret;\r\n                            obj.evented = ret;\r\n                        }\r\n                    } else {\r\n                        obj.selectable = false;\r\n                        obj.evented = this.props.editable ? false : true;\r\n                    }\r\n                }\r\n            });\r\n            this.canvas.renderAll();\r\n        },\r\n        moving: (e) => {\r\n            const delta = new fabric.Point(e.movementX, e.movementY);\r\n            this.canvas.relativePan(delta);\r\n        },\r\n    }\r\n\r\n    animationHandlers = {\r\n        play: (id, hasControls) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (!findObject) {\r\n                return;\r\n            }\r\n            if (findObject.anime) {\r\n                findObject.anime.restart();\r\n                return;\r\n            }\r\n            if (findObject.animation.type === 'none') {\r\n                return;\r\n            }\r\n            const instance = this.animationHandlers.getAnimation(findObject, hasControls);\r\n            if (instance) {\r\n                findObject.set('anime', instance);\r\n                findObject.set({\r\n                    hasControls: false,\r\n                    lockMovementX: true,\r\n                    lockMovementY: true,\r\n                    hoverCursor: 'pointer',\r\n                });\r\n                this.canvas.requestRenderAll();\r\n                instance.play();\r\n            }\r\n        },\r\n        pause: (id) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (!findObject) {\r\n                return;\r\n            }\r\n            findObject.anime.pause();\r\n        },\r\n        stop: (id, hasControls = true) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (!findObject) {\r\n                return;\r\n            }\r\n            this.animationHandlers.initAnimation(findObject, hasControls);\r\n        },\r\n        restart: (id) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (!findObject) {\r\n                return;\r\n            }\r\n            if (!findObject.anime) {\r\n                return;\r\n            }\r\n            this.animationHandlers.stop(id);\r\n            this.animationHandlers.play(id);\r\n        },\r\n        initAnimation: (obj, hasControls = true) => {\r\n            if (!obj.anime) {\r\n                return;\r\n            }\r\n            let option;\r\n            if (this.props.editable) {\r\n                option = {\r\n                    anime: null,\r\n                    hasControls,\r\n                    lockMovementX: !hasControls,\r\n                    lockMovementY: !hasControls,\r\n                    hoverCursor: hasControls ? 'move' : 'pointer',\r\n                };\r\n            } else {\r\n                option = {\r\n                    anime: null,\r\n                    hasControls: false,\r\n                    lockMovementX: true,\r\n                    lockMovementY: true,\r\n                    hoverCursor: 'pointer',\r\n                };\r\n            }\r\n            anime.remove(obj);\r\n            const { type } = obj.animation;\r\n            if (type === 'fade') {\r\n                Object.assign(option, {\r\n                    opacity: obj.originOpacity,\r\n                    originOpacity: null,\r\n                });\r\n            } else if (type === 'bounce') {\r\n                if (obj.animation.bounce === 'vertical') {\r\n                    Object.assign(option, {\r\n                        top: obj.originTop,\r\n                        originTop: null,\r\n                    });\r\n                } else {\r\n                    Object.assign(option, {\r\n                        left: obj.originLeft,\r\n                        originLeft: null,\r\n                    });\r\n                }\r\n            } else if (type === 'shake') {\r\n                if (obj.animation.shake === 'vertical') {\r\n                    Object.assign(option, {\r\n                        top: obj.originTop,\r\n                        originTop: null,\r\n                    });\r\n                } else {\r\n                    Object.assign(option, {\r\n                        left: obj.originLeft,\r\n                        originLeft: null,\r\n                    });\r\n                }\r\n            } else if (type === 'scaling') {\r\n                Object.assign(option, {\r\n                    scaleX: obj.originScaleX,\r\n                    scaleY: obj.originScaleY,\r\n                    originScaleX: null,\r\n                    originScaleY: null,\r\n                });\r\n            } else if (type === 'rotation') {\r\n                Object.assign(option, {\r\n                    angle: obj.originAngle,\r\n                    originAngle: null,\r\n                });\r\n            } else if (type === 'flash') {\r\n                Object.assign(option, {\r\n                    fill: obj.originFill,\r\n                    stroke: obj.originStroke,\r\n                    originFill: null,\r\n                    origniStroke: null,\r\n                });\r\n            } else {\r\n                console.warn('Not supported type.');\r\n            }\r\n            obj.set(option);\r\n            this.canvas.renderAll();\r\n        },\r\n        getAnimation: (obj, hasControls) => {\r\n            const { delay = 100, duration = 100, autoplay = true, loop = true, type, ...other } = obj.animation;\r\n            const option = {\r\n                targets: obj,\r\n                delay,\r\n                loop,\r\n                autoplay,\r\n                duration,\r\n                direction: 'alternate',\r\n                begin: () => {\r\n                    obj.set({\r\n                        hasControls: false,\r\n                        lockMovementX: true,\r\n                        lockMovementY: true,\r\n                        hoverCursor: 'pointer',\r\n                    });\r\n                    this.canvas.requestRenderAll();\r\n                },\r\n                update: (e) => {\r\n                    if (type === 'flash') {\r\n                        // I do not know why it works. Magic code...\r\n                        const fill = e.animations[0].currentValue;\r\n                        const stroke = e.animations[1].currentValue;\r\n                        obj.set('fill', '');\r\n                        obj.set('fill', fill);\r\n                        obj.set('stroke', stroke);\r\n                    }\r\n                    obj.setCoords();\r\n                    this.canvas.requestRenderAll();\r\n                },\r\n                complete: () => {\r\n                    this.animationHandlers.initAnimation(obj, hasControls);\r\n                },\r\n            };\r\n            if (type === 'fade') {\r\n                const { opacity = 0 } = other;\r\n                obj.set('originOpacity', obj.opacity);\r\n                Object.assign(option, {\r\n                    opacity,\r\n                    easing: 'easeInQuad',\r\n                });\r\n            } else if (type === 'bounce') {\r\n                const { offset = 1 } = other;\r\n                if (other.bounce === 'vertical') {\r\n                    obj.set('originTop', obj.top);\r\n                    Object.assign(option, {\r\n                        top: obj.top + offset,\r\n                        easing: 'easeInQuad',\r\n                    });\r\n                } else {\r\n                    obj.set('originLeft', obj.left);\r\n                    Object.assign(option, {\r\n                        left: obj.left + offset,\r\n                        easing: 'easeInQuad',\r\n                    });\r\n                }\r\n            } else if (type === 'shake') {\r\n                const { offset = 1 } = other;\r\n                if (other.shake === 'vertical') {\r\n                    obj.set('originTop', obj.top);\r\n                    Object.assign(option, {\r\n                        top: obj.top + offset,\r\n                        delay: 0,\r\n                        elasticity: 1000,\r\n                        duration: 500,\r\n                    });\r\n                } else {\r\n                    obj.set('originLeft', obj.left);\r\n                    Object.assign(option, {\r\n                        left: obj.left + offset,\r\n                        delay: 0,\r\n                        elasticity: 1000,\r\n                        duration: 500,\r\n                    });\r\n                }\r\n            } else if (type === 'scaling') {\r\n                const { scale = 1 } = other;\r\n                obj.set('originScaleX', obj.scaleX);\r\n                obj.set('originScaleY', obj.scaleY);\r\n                const scaleX = obj.scaleX * scale;\r\n                const scaleY = obj.scaleY * scale;\r\n                Object.assign(option, {\r\n                    scaleX,\r\n                    scaleY,\r\n                    easing: 'easeInQuad',\r\n                });\r\n            } else if (type === 'rotation') {\r\n                obj.set('originAngle', obj.angle);\r\n                Object.assign(option, {\r\n                    angle: other.angle,\r\n                    easing: 'easeInQuad',\r\n                });\r\n            } else if (type === 'flash') {\r\n                const { fill = obj.fill, stroke = obj.stroke } = other;\r\n                obj.set('originFill', obj.fill);\r\n                obj.set('originStroke', obj.stroke);\r\n                Object.assign(option, {\r\n                    fill,\r\n                    stroke,\r\n                    easing: 'easeInQuad',\r\n                });\r\n            } else {\r\n                console.warn('Not supported type.');\r\n                return;\r\n            }\r\n            return anime(option);\r\n        },\r\n    }\r\n\r\n    videoHandlers = {\r\n        play: () => {\r\n\r\n        },\r\n        pause: () => {\r\n\r\n        },\r\n        stop: () => {\r\n\r\n        },\r\n        create: (obj, src) => {\r\n            const { editable } = this.props;\r\n            const { id, autoplay, muted, loop } = obj;\r\n            const { left, top } = obj.getBoundingRect();\r\n            const videoElement = fabric.util.makeElement('video', {\r\n                id,\r\n                autoplay,\r\n                muted,\r\n                loop,\r\n                preload: 'none',\r\n                controls: false,\r\n            });\r\n            const { scaleX, scaleY, angle } = obj;\r\n            const zoom = this.canvas.getZoom();\r\n            const width = obj.width * scaleX * zoom;\r\n            const height = obj.height * scaleY * zoom;\r\n            const video = fabric.util.wrapElement(videoElement, 'div', {\r\n                id: `${obj.id}_container`,\r\n                style: `transform: rotate(${angle}deg);\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left}px;\r\n                        top: ${top}px;\r\n                        position: absolute;`,\r\n            });\r\n            this.container.current.appendChild(video);\r\n            if (editable) {\r\n                this.elementHandlers.draggable(video, obj);\r\n                video.addEventListener('mousedown', (e) => {\r\n                    this.canvas.setActiveObject(obj);\r\n                    this.canvas.renderAll();\r\n                }, false);\r\n            }\r\n            obj.setCoords();\r\n        },\r\n        load: (obj, src) => {\r\n            const { canvas } = this;\r\n            const { editable } = this.props;\r\n            if (editable) {\r\n                this.elementHandlers.removeById(obj.id);\r\n            }\r\n            this.videoHandlers.create(obj, src);\r\n            this.canvas.renderAll();\r\n            fabric.util.requestAnimFrame(function render() {\r\n                canvas.renderAll();\r\n                fabric.util.requestAnimFrame(render);\r\n            });\r\n        },\r\n        set: (obj, src) => {\r\n            let newSrc;\r\n            if (typeof src === 'string') {\r\n                obj.set('file', null);\r\n                obj.set('src', src);\r\n                newSrc = {\r\n                    src,\r\n                };\r\n                this.videoHandlers.load(obj, newSrc);\r\n            } else {\r\n                const reader = new FileReader();\r\n                reader.onload = (e) => {\r\n                    obj.set('file', src);\r\n                    obj.set('src', e.target.result);\r\n                    newSrc = {\r\n                        src: e.target.result,\r\n                        type: src.type,\r\n                    };\r\n                    this.videoHandlers.load(obj, newSrc);\r\n                };\r\n                reader.readAsDataURL(src);\r\n            }\r\n        },\r\n    }\r\n\r\n    elementHandlers = {\r\n        setById: (id, source) => {\r\n            const findObject = this.handlers.findById(id);\r\n            if (!findObject) {\r\n                return;\r\n            }\r\n            if (findObject.type === 'video') {\r\n                this.videoHandlers.set(findObject, source);\r\n            } else if (findObject.type === 'element') {\r\n                this.elementHandlers.set(findObject, source);\r\n            } else if (findObject.type === 'iframe') {\r\n                this.elementHandlers.set(findObject, source);\r\n            }\r\n        },\r\n        set: (obj, source) => {\r\n            if (obj.type === 'iframe') {\r\n                this.elementHandlers.createIFrame(obj, source);\r\n            } else {\r\n                this.elementHandlers.createElement(obj, source);\r\n            }\r\n        },\r\n        createElement: (obj, code) => {\r\n            obj.set('code', code);\r\n            const { editable } = this.props;\r\n            const { left, top } = obj.getBoundingRect();\r\n            const { id, scaleX, scaleY, angle } = obj;\r\n            if (editable) {\r\n                this.elementHandlers.removeById(id);\r\n                this.elementHandlers.removeStyleById(id);\r\n                this.elementHandlers.removeScriptById(id);\r\n            }\r\n            const zoom = this.canvas.getZoom();\r\n            const width = obj.width * scaleX * zoom;\r\n            const height = obj.height * scaleY * zoom;\r\n            const element = fabric.util.makeElement('div', {\r\n                id: `${id}_container`,\r\n                style: `transform: rotate(${angle}deg);\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left}px;\r\n                        top: ${top}px;\r\n                        position: absolute;`,\r\n            });\r\n            const { html, css, js } = code;\r\n            if (code.css && code.css.length) {\r\n                const styleElement = document.createElement('style');\r\n                styleElement.id = `${id}_style`;\r\n                styleElement.type = 'text/css';\r\n                styleElement.innerHTML = css;\r\n                document.head.appendChild(styleElement);\r\n            }\r\n            this.container.current.appendChild(element);\r\n            if (code.js && code.js.length) {\r\n                const script = document.createElement('script');\r\n                script.id = `${id}_script`;\r\n                script.type = 'text/javascript';\r\n                script.innerHTML = js;\r\n                element.appendChild(script);\r\n            }\r\n            element.innerHTML = html;\r\n            if (editable) {\r\n                this.elementHandlers.draggable(element, obj);\r\n                element.addEventListener('mousedown', (e) => {\r\n                    this.canvas.setActiveObject(obj);\r\n                    this.canvas.renderAll();\r\n                }, false);\r\n            }\r\n            obj.setCoords();\r\n        },\r\n        createIFrame: (obj, src) => {\r\n            obj.set('src', src);\r\n            const { editable } = this.props;\r\n            const { id, scaleX, scaleY, angle } = obj;\r\n            if (editable) {\r\n                this.elementHandlers.removeById(id);\r\n            }\r\n            const { left, top } = obj.getBoundingRect();\r\n            const iframeElement = fabric.util.makeElement('iframe', {\r\n                id,\r\n                src,\r\n                width: '100%',\r\n                height: '100%',\r\n            });\r\n            const zoom = this.canvas.getZoom();\r\n            const width = obj.width * scaleX * zoom;\r\n            const height = obj.height * scaleY * zoom;\r\n            const iframe = fabric.util.wrapElement(iframeElement, 'div', {\r\n                id: `${id}_container`,\r\n                style: `transform: rotate(${angle}deg);\r\n                        width: ${width}px;\r\n                        height: ${height}px;\r\n                        left: ${left}px;\r\n                        top: ${top}px;\r\n                        position: absolute;\r\n                        z-index: 100000;`,\r\n            });\r\n            this.container.current.appendChild(iframe);\r\n            if (editable) {\r\n                this.elementHandlers.draggable(iframe, obj);\r\n                iframe.addEventListener('mousedown', (e) => {\r\n                    this.canvas.setActiveObject(obj);\r\n                    this.canvas.renderAll();\r\n                }, false);\r\n            }\r\n            obj.setCoords();\r\n        },\r\n        findScriptById: id => document.getElementById(`${id}_script`),\r\n        findStyleById: id => document.getElementById(`${id}_style`),\r\n        findById: id => document.getElementById(`${id}_container`),\r\n        remove: (el) => {\r\n            if (!el) {\r\n                return;\r\n            }\r\n            this.container.current.removeChild(el);\r\n        },\r\n        removeStyleById: (id) => {\r\n            const style = this.elementHandlers.findStyleById(id);\r\n            if (!style) {\r\n                return;\r\n            }\r\n            document.head.removeChild(style);\r\n        },\r\n        removeScriptById: (id) => {\r\n            const style = this.elementHandlers.findScriptById(id);\r\n            if (!style) {\r\n                return;\r\n            }\r\n            document.head.removeChild(style);\r\n        },\r\n        removeById: (id) => {\r\n            const el = this.elementHandlers.findById(id);\r\n            this.elementHandlers.remove(el);\r\n        },\r\n        removeByIds: (ids) => {\r\n            ids.forEach((id) => {\r\n                this.elementHandlers.removeById(id);\r\n                this.elementHandlers.removeStyleById(id);\r\n                this.elementHandlers.removeScriptById(id);\r\n            });\r\n        },\r\n        setPosition: (el, left, top) => {\r\n            if (!el) {\r\n                return false;\r\n            }\r\n            el.style.left = `${left}px`;\r\n            el.style.top = `${top}px`;\r\n            el.style.transform = null;\r\n            el.setAttribute('data-x', 0);\r\n            el.setAttribute('data-y', 0);\r\n            return el;\r\n        },\r\n        setSize: (el, width, height) => {\r\n            if (!el) {\r\n                return false;\r\n            }\r\n            el.style.width = `${width}px`;\r\n            el.style.height = `${height}px`;\r\n            return el;\r\n        },\r\n        setScale: (el, x, y) => {\r\n            if (!el) {\r\n                return false;\r\n            }\r\n            el.style.transform = `scale(${x}, ${y})`;\r\n            return el;\r\n        },\r\n        setZoom: (el, zoom) => {\r\n            if (!el) {\r\n                return false;\r\n            }\r\n            el.style.zoom = zoom;\r\n            return el;\r\n        },\r\n        draggable: (el, obj) => {\r\n            if (!el) {\r\n                return false;\r\n            }\r\n            return interact(el)\r\n                .draggable({\r\n                    restrict: {\r\n                        restriction: 'parent',\r\n                        // elementRect: { top: 0, left: 0, bottom: 1, right: 1 },\r\n                    },\r\n                    onmove: (e) => {\r\n                        const { dx, dy, target } = e;\r\n                        // keep the dragged position in the data-x/data-y attributes\r\n                        const x = (parseFloat(target.getAttribute('data-x')) || 0) + dx;\r\n                        const y = (parseFloat(target.getAttribute('data-y')) || 0) + dy;\r\n                        // translate the element\r\n                        target.style.webkitTransform = `translate(${x}px, ${y}px)`;\r\n                        target.style.transform = `translate(${x}px, ${y}px)`;\r\n                        // update the posiion attributes\r\n                        target.setAttribute('data-x', x);\r\n                        target.setAttribute('data-y', y);\r\n                        // update canvas object the position\r\n                        obj.set({\r\n                            left: obj.left + dx,\r\n                            top: obj.top + dy,\r\n                        });\r\n                        obj.setCoords();\r\n                        this.canvas.renderAll();\r\n                    },\r\n                    onend: () => {\r\n                        if (this.props.onSelect) {\r\n                            this.props.onSelect(obj);\r\n                        }\r\n                    },\r\n                });\r\n        },\r\n    }\r\n\r\n    workareaHandlers = {\r\n        /**\r\n         * Init workarea\r\n         *\r\n         */\r\n        init: () => {\r\n            const { workareaOption } = this.props;\r\n            const mergedWorkareaOption = Object.assign({}, defaultWorkareaOption, workareaOption);\r\n            const image = new Image();\r\n            image.width = mergedWorkareaOption.width;\r\n            image.height = mergedWorkareaOption.height;\r\n            this.workarea = new fabric.Image(image, mergedWorkareaOption);\r\n            this.canvas.add(this.workarea);\r\n            this.objects = this.handlers.getObjects();\r\n            this.canvas.centerObject(this.workarea);\r\n        },\r\n        /**\r\n         * Set the layout on workarea\r\n         *\r\n         * @param {'fixed' | 'responsive' | 'fullscreen'} layout\r\n         * @returns\r\n         */\r\n        setLayout: (layout) => {\r\n            this.workarea.set('layout', layout);\r\n            const { canvas } = this;\r\n            const { _element, isElement } = this.workarea;\r\n            let scaleX = 1;\r\n            let scaleY = 1;\r\n            const isFixed = layout === 'fixed';\r\n            const isResponsive = layout === 'responsive';\r\n            const isFullscreen = layout === 'fullscreen';\r\n            if (isElement) {\r\n                if (isFixed) {\r\n                    scaleX = this.workarea.workareaWidth / _element.width;\r\n                    scaleY = this.workarea.workareaHeight / _element.height;\r\n                } else if (isResponsive) {\r\n                    scaleX = canvas.getWidth() / _element.width;\r\n                    scaleY = canvas.getHeight() / _element.height;\r\n                    if (_element.height > _element.width) {\r\n                        scaleX = scaleY;\r\n                    } else {\r\n                        scaleY = scaleX;\r\n                    }\r\n                } else {\r\n                    scaleX = canvas.getWidth() / _element.width;\r\n                    scaleY = canvas.getHeight() / _element.height;\r\n                }\r\n            }\r\n            canvas.getObjects().forEach((obj) => {\r\n                if (obj.id !== 'workarea') {\r\n                    const objScaleX = !isFullscreen ? 1 : scaleX;\r\n                    const objScaleY = !isFullscreen ? 1 : scaleY;\r\n                    const objWidth = obj.width * objScaleX * canvas.getZoom();\r\n                    const objHeight = obj.height * objScaleY * canvas.getZoom();\r\n                    const el = this.elementHandlers.findById(obj.id);\r\n                    this.elementHandlers.setSize(el, objWidth, objHeight);\r\n                    if (obj.player) {\r\n                        obj.player.setPlayerSize(objWidth, objHeight);\r\n                    }\r\n                    obj.set({\r\n                        scaleX: !isFullscreen ? 1 : objScaleX,\r\n                        scaleY: !isFullscreen ? 1 : objScaleY,\r\n                    });\r\n                }\r\n            });\r\n            if (isResponsive) {\r\n                if (isElement) {\r\n                    const center = canvas.getCenter();\r\n                    const point = {\r\n                        x: center.left,\r\n                        y: center.top,\r\n                    };\r\n                    this.workarea.set({\r\n                        scaleX: 1,\r\n                        scaleY: 1,\r\n                    });\r\n                    this.zoomHandlers.zoomToPoint(point, scaleX);\r\n                } else {\r\n                    this.workarea.set({\r\n                        width: 0,\r\n                        height: 0,\r\n                        backgroundColor: 'rgba(255, 255, 255, 0)',\r\n                    });\r\n                }\r\n                canvas.centerObject(this.workarea);\r\n                canvas.renderAll();\r\n                return;\r\n            }\r\n            if (isElement) {\r\n                this.workarea.set({\r\n                    width: _element.width,\r\n                    height: _element.height,\r\n                    scaleX,\r\n                    scaleY,\r\n                });\r\n            } else {\r\n                const width = isFixed ? this.workarea.workareaWidth : this.canvas.getWidth();\r\n                const height = isFixed ? this.workarea.workareaHeight : this.canvas.getHeight();\r\n                this.workarea.set({\r\n                    width,\r\n                    height,\r\n                    backgroundColor: 'rgba(255, 255, 255, 1)',\r\n                });\r\n                this.canvas.renderAll();\r\n                if (isFixed) {\r\n                    canvas.centerObject(this.workarea);\r\n                } else {\r\n                    this.workarea.set({\r\n                        left: 0,\r\n                        top: 0,\r\n                    });\r\n                }\r\n            }\r\n            canvas.centerObject(this.workarea);\r\n            const center = canvas.getCenter();\r\n            const point = {\r\n                x: center.left,\r\n                y: center.top,\r\n            };\r\n            canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n            this.zoomHandlers.zoomToPoint(point, 1);\r\n            canvas.renderAll();\r\n        },\r\n        /**\r\n         * Set the responsive image on Workarea\r\n         *\r\n         * @param {string} [src]\r\n         * @param {boolean} [loaded]\r\n         * @returns\r\n         */\r\n        setResponsiveImage: (src, loaded) => {\r\n            const { canvas, workarea, zoomHandlers } = this;\r\n            const { editable } = this.props;\r\n            const imageFromUrl = (source) => {\r\n                fabric.Image.fromURL(source, (img) => {\r\n                    let scaleX = canvas.getWidth() / img.width;\r\n                    let scaleY = canvas.getHeight() / img.height;\r\n                    if (img.height > img.width) {\r\n                        scaleX = scaleY;\r\n                        if (canvas.getWidth() < img.width * scaleX) {\r\n                            scaleX = scaleX * (canvas.getWidth() / (img.width * scaleX));\r\n                        }\r\n                    } else {\r\n                        scaleY = scaleX;\r\n                        if (canvas.getHeight() < img.height * scaleX) {\r\n                            scaleX = scaleX * (canvas.getHeight() / (img.height * scaleX));\r\n                        }\r\n                    }\r\n                    img.set({\r\n                        originX: 'left',\r\n                        originY: 'top',\r\n                    });\r\n                    if (!img._element) {\r\n                        workarea.set({\r\n                            isElement: false,\r\n                            selectable: false,\r\n                        });\r\n                    } else {\r\n                        workarea.set({\r\n                            ...img,\r\n                            isElement: true,\r\n                            selectable: false,\r\n                        });\r\n                    }\r\n                    if (!source) {\r\n                        scaleX = 1;\r\n                    }\r\n                    canvas.centerObject(workarea);\r\n                    if (editable && !loaded) {\r\n                        canvas.getObjects().forEach((obj) => {\r\n                            if (obj.id !== 'workarea') {\r\n                                const objWidth = obj.width * scaleX;\r\n                                const objHeight = obj.height * scaleY;\r\n                                const el = this.elementHandlers.findById(obj.id);\r\n                                this.elementHandlers.setSize(el, objWidth, objHeight);\r\n                                if (obj.player) {\r\n                                    obj.player.setPlayerSize(objWidth, objHeight);\r\n                                }\r\n                                obj.set({\r\n                                    scaleX: 1,\r\n                                    scaleY: 1,\r\n                                });\r\n                                obj.setCoords();\r\n                            }\r\n                        });\r\n                    }\r\n                    const center = canvas.getCenter();\r\n                    const point = {\r\n                        x: center.left,\r\n                        y: center.top,\r\n                    };\r\n                    canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n                    zoomHandlers.zoomToPoint(point, scaleX);\r\n                    canvas.renderAll();\r\n                });\r\n            };\r\n            if (!src) {\r\n                workarea.set({\r\n                    src,\r\n                });\r\n                imageFromUrl(src);\r\n                return;\r\n            }\r\n            if (typeof src === 'string') {\r\n                workarea.set({\r\n                    src,\r\n                });\r\n                imageFromUrl(src);\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                workarea.set({\r\n                    file: src,\r\n                });\r\n                imageFromUrl(e.target.result);\r\n            };\r\n            reader.readAsDataURL(src);\r\n        },\r\n        /**\r\n         * Set the image on Workarea\r\n         *\r\n         * @param {string} [src]\r\n         * @param {boolean} [loaded=false]\r\n         * @returns\r\n         */\r\n        setImage: (src, loaded = false) => {\r\n            const { canvas, workarea, zoomHandlers, workareaHandlers } = this;\r\n            const { editable } = this.props;\r\n            if (workarea.layout === 'responsive') {\r\n                workareaHandlers.setResponsiveImage(src, loaded);\r\n                return;\r\n            }\r\n            const imageFromUrl = (source) => {\r\n                fabric.Image.fromURL(source, (img) => {\r\n                    let width = canvas.getWidth();\r\n                    let height = canvas.getHeight();\r\n                    if (workarea.layout === 'fixed') {\r\n                        width = workarea.width * workarea.scaleX;\r\n                        height = workarea.height * workarea.scaleY;\r\n                    }\r\n                    let scaleX = 1;\r\n                    let scaleY = 1;\r\n                    if (img._element) {\r\n                        scaleX = width / img.width;\r\n                        scaleY = height / img.height;\r\n                        img.set({\r\n                            originX: 'left',\r\n                            originY: 'top',\r\n                            scaleX,\r\n                            scaleY,\r\n                        });\r\n                        workarea.set({\r\n                            ...img,\r\n                            isElement: true,\r\n                            selectable: false,\r\n                        });\r\n                    } else {\r\n                        workarea.set({\r\n                            width,\r\n                            height,\r\n                            scaleX,\r\n                            scaleY,\r\n                            isElement: false,\r\n                            selectable: false,\r\n                        });\r\n                    }\r\n                    canvas.centerObject(workarea);\r\n                    if (editable && !loaded) {\r\n                        const { layout } = workarea;\r\n                        canvas.getObjects().forEach((obj) => {\r\n                            if (obj.id !== 'workarea') {\r\n                                scaleX = layout !== 'fullscreen' ? 1 : scaleX;\r\n                                scaleY = layout !== 'fullscreen' ? 1 : scaleY;\r\n                                const objWidth = obj.width * scaleX;\r\n                                const objHeight = obj.height * scaleY;\r\n                                const el = this.elementHandlers.findById(obj.id);\r\n                                this.elementHandlers.setSize(el, width, height);\r\n                                if (obj.player) {\r\n                                    obj.player.setPlayerSize(objWidth, objHeight);\r\n                                }\r\n                                obj.set({\r\n                                    scaleX,\r\n                                    scaleY,\r\n                                });\r\n                                obj.setCoords();\r\n                            }\r\n                        });\r\n                    }\r\n                    const center = canvas.getCenter();\r\n                    const point = {\r\n                        x: center.left,\r\n                        y: center.top,\r\n                    };\r\n                    canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n                    zoomHandlers.zoomToPoint(point, 1);\r\n                    canvas.renderAll();\r\n                });\r\n            };\r\n            if (!src) {\r\n                workarea.set({\r\n                    src,\r\n                });\r\n                imageFromUrl(src);\r\n                return;\r\n            }\r\n            if (typeof src === 'string') {\r\n                workarea.set({\r\n                    src,\r\n                });\r\n                imageFromUrl(src);\r\n                return;\r\n            }\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                workarea.set({\r\n                    file: src,\r\n                });\r\n                imageFromUrl(e.target.result);\r\n            };\r\n            reader.readAsDataURL(src);\r\n        },\r\n    }\r\n\r\n    nodeHandlers = {\r\n        /**\r\n         * Get the node path by target object\r\n         *\r\n         * @param {fabric.Object} target\r\n         * @param {fabric.Object[]} [nodes=[]]\r\n         * @param {string} [direction='init']\r\n         */\r\n        getNodePath: (target, nodes = [], direction = 'init') => {\r\n            if (target) {\r\n                if (direction === 'to' || direction === 'init') {\r\n                    if (target.toPort) {\r\n                        target.toPort.links.forEach((link) => {\r\n                            if (link.fromNode) {\r\n                                nodes.push(link.fromNode);\r\n                                this.nodeHandlers.getNodePath(link.fromNode, nodes, 'to');\r\n                            }\r\n                        });\r\n                    }\r\n                    if (direction === 'init') {\r\n                        nodes.push(target);\r\n                    }\r\n                }\r\n                if (direction === 'from' || direction === 'init') {\r\n                    target.fromPort.forEach((port) => {\r\n                        port.links.forEach((link) => {\r\n                            if (link.toNode) {\r\n                                nodes.push(link.toNode);\r\n                                this.nodeHandlers.getNodePath(link.toNode, nodes, 'from');\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * Select the node path\r\n         *\r\n         * @param {string[]} path\r\n         * @returns\r\n         */\r\n        selectByPath: (path) => {\r\n            if (!path || !path.length) {\r\n                return;\r\n            }\r\n            const targetObjects = this.handlers.getOriginObjects().filter(object => path.some(id => id === object.id));\r\n            const nonTargetObjects = this.handlers.getOriginObjects().filter(object => path.some(id => id !== object.id));\r\n            nonTargetObjects.forEach((object) => {\r\n                if (object.superType === 'link') {\r\n                    const { fromNode, toNode } = object;\r\n                    if (fromNode && toNode) {\r\n                        const fromIndex = targetObjects.findIndex(obj => obj.id === fromNode.id);\r\n                        const toIndex = targetObjects.findIndex(obj => obj.id === toNode.id);\r\n                        if ((fromIndex >= 0 && targetObjects[fromIndex]) && (toIndex >= 0 && targetObjects[toIndex])) {\r\n                            object.set({\r\n                                opacity: 1,\r\n                            });\r\n                            object.setShadow({\r\n                                color: object.stroke,\r\n                            });\r\n                            this.nodeHandlers.highlightingNode(object, 300);\r\n                            this.canvas.requestRenderAll();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                object.set({\r\n                    opacity: 0.2,\r\n                });\r\n                if (object.superType === 'node') {\r\n                    if (object.toPort) {\r\n                        object.toPort.set({\r\n                            opacity: 0.2,\r\n                        });\r\n                    }\r\n                    object.fromPort.forEach((port) => {\r\n                        port.set({\r\n                            opacity: 0.2,\r\n                        });\r\n                    });\r\n                }\r\n                if (!object.isAnimated) {\r\n                    object.setShadow({\r\n                        blur: 0,\r\n                    });\r\n                }\r\n            });\r\n            targetObjects.forEach((object) => {\r\n                object.set({\r\n                    opacity: 1,\r\n                });\r\n                object.setShadow({\r\n                    color: object.fill,\r\n                });\r\n                this.nodeHandlers.highlightingNode(object, 300);\r\n                if (object.toPort) {\r\n                    object.toPort.set({\r\n                        opacity: 1,\r\n                    });\r\n                }\r\n                if (object.fromPort) {\r\n                    object.fromPort.forEach((port) => {\r\n                        port.set({\r\n                            opacity: 1,\r\n                        });\r\n                    });\r\n                }\r\n            });\r\n            this.canvas.requestRenderAll();\r\n        },\r\n        selectById: (id) => {\r\n            this.handlers.getOriginObjects().forEach((object) => {\r\n                if (id === object.id) {\r\n                    object.setShadow({\r\n                        color: object.fill,\r\n                        blur: 50,\r\n                    });\r\n                    return;\r\n                } else if (id === object.nodeId) {\r\n                    return;\r\n                }\r\n                object.setShadow({\r\n                    blur: 0,\r\n                });\r\n            });\r\n            this.canvas.requestRenderAll();\r\n        },\r\n        deselect: () => {\r\n            this.handlers.getOriginObjects().forEach((object) => {\r\n                object.set({\r\n                    opacity: 1,\r\n                });\r\n                if (object.superType === 'node') {\r\n                    if (object.toPort) {\r\n                        object.toPort.set({\r\n                            opacity: 1,\r\n                        });\r\n                    }\r\n                    object.fromPort.forEach((port) => {\r\n                        port.set({\r\n                            opacity: 1,\r\n                        });\r\n                    });\r\n                }\r\n                if (!object.isAnimated) {\r\n                    object.setShadow({\r\n                        blur: 0,\r\n                    });\r\n                }\r\n            });\r\n            this.canvas.renderAll();\r\n        },\r\n        highlightingByPath: (path) => {\r\n            if (!path || !path.length) {\r\n                return;\r\n            }\r\n            const targetObjects = this.handlers.getOriginObjects().filter(object => path.some(id => id === object.id));\r\n            const nonTargetObjects = this.handlers.getOriginObjects().filter(object => path.some(id => id !== object.id));\r\n            const lastObject = targetObjects.filter(obj => obj.id === path[path.length - 1])[0];\r\n            targetObjects.forEach((object) => {\r\n                if (lastObject) {\r\n                    object.setShadow({\r\n                        color: lastObject.fill,\r\n                    });\r\n                } else {\r\n                    object.setShadow({\r\n                        color: object.fill,\r\n                    });\r\n                }\r\n                this.nodeHandlers.highlightingNode(object);\r\n                this.canvas.requestRenderAll();\r\n            });\r\n            nonTargetObjects.forEach((object) => {\r\n                if (object.superType === 'link') {\r\n                    const { fromNode, toNode } = object;\r\n                    if (fromNode && toNode) {\r\n                        const fromIndex = targetObjects.findIndex(obj => obj.id === fromNode.id);\r\n                        const toIndex = targetObjects.findIndex(obj => obj.id === toNode.id);\r\n                        if ((fromIndex >= 0 && targetObjects[fromIndex]) && (toIndex >= 0 && targetObjects[toIndex])) {\r\n                            if (lastObject) {\r\n                                object.setShadow({\r\n                                    color: lastObject.stroke,\r\n                                });\r\n                            } else {\r\n                                object.setShadow({\r\n                                    color: object.stroke,\r\n                                });\r\n                            }\r\n                            this.nodeHandlers.highlightingNode(object);\r\n                            this.nodeHandlers.highlightingLink(object, lastObject);\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            this.canvas.requestRenderAll();\r\n        },\r\n        highlightingLink: (object, targetObject, duration = 500) => {\r\n            object.animation = {\r\n                duration,\r\n                type: 'flash',\r\n                stroke: targetObject ? targetObject.stroke : object.stroke,\r\n                loop: 1,\r\n                delay: 0,\r\n            };\r\n            this.animationHandlers.play(object.id, false);\r\n        },\r\n        highlightingNode: (object, duration = 500) => {\r\n            const maxBlur = 50;\r\n            const minBlur = 0;\r\n            const onComplete = () => {\r\n                if (object.shadow.blur === maxBlur) {\r\n                    object.isAnimated = true;\r\n                    object.animate('shadow.blur', minBlur, {\r\n                        easing: fabric.util.ease.easeInOutQuad,\r\n                        onChange: (value) => {\r\n                            object.shadow.blur = value;\r\n                            this.canvas.requestRenderAll();\r\n                        },\r\n                        onComplete: () => {\r\n                            object.isAnimated = false;\r\n                            if (object.superType === 'link') {\r\n                                object.set({\r\n                                    stroke: object.originStroke,\r\n                                });\r\n                            }\r\n                        },\r\n                    });\r\n                }\r\n            };\r\n            object.isAnimated = true;\r\n            object.animate('shadow.blur', maxBlur, {\r\n                easing: fabric.util.ease.easeInOutQuad,\r\n                duration,\r\n                onChange: (value) => {\r\n                    object.shadow.blur = value;\r\n                    this.canvas.requestRenderAll();\r\n                },\r\n                onComplete,\r\n            });\r\n        },\r\n    }\r\n\r\n    portHandlers = {\r\n        create: (target) => {\r\n            if (!target.createToPort) {\r\n                return;\r\n            }\r\n            const toPort = target.createToPort(target.left + (target.width / 2), target.top);\r\n            if (toPort) {\r\n                toPort.on('mouseover', () => {\r\n                    if (this.interactionMode === 'link' && this.activeLine && this.activeLine.class === 'line') {\r\n                        if (toPort.links.some(link => link.fromNode.id ===  this.activeLine.fromNode)) {\r\n                            toPort.set({\r\n                                fill: toPort.errorFill,\r\n                            });\r\n                            this.canvas.renderAll();\r\n                            return;\r\n                        }\r\n                        toPort.set({\r\n                            fill: toPort.hoverFill,\r\n                        });\r\n                        this.canvas.renderAll();\r\n                    }\r\n                });\r\n                toPort.on('mouseout', () => {\r\n                    toPort.set({\r\n                        fill: toPort.originFill,\r\n                    });\r\n                    this.canvas.renderAll();\r\n                });\r\n                this.canvas.add(toPort);\r\n                toPort.setCoords();\r\n                this.canvas.bringToFront(toPort);\r\n            }\r\n            const fromPort = target.createFromPort(target.left + (target.width / 2), target.top + target.height);\r\n            if (fromPort && fromPort.length) {\r\n                fromPort.forEach((port) => {\r\n                    if (port) {\r\n                        port.on('mouseover', () => {\r\n                            if (port.enabled) {\r\n                                if (this.activeLine) {\r\n                                    port.set({\r\n                                        fill: port.errorFill,\r\n                                    });\r\n                                    this.canvas.renderAll();\r\n                                    return;\r\n                                }\r\n                                port.set({\r\n                                    fill: port.hoverFill,\r\n                                });\r\n                                this.canvas.renderAll();\r\n                                return;\r\n                            }\r\n                            port.set({\r\n                                fill: port.errorFill,\r\n                            });\r\n                            this.canvas.renderAll();\r\n                        });\r\n                        port.on('mouseout', () => {\r\n                            port.set({\r\n                                fill: port.originFill,\r\n                            });\r\n                            this.canvas.renderAll();\r\n                        });\r\n                        this.canvas.add(port);\r\n                        port.setCoords();\r\n                        this.canvas.bringToFront(port);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        setCoords: (target) => {\r\n            if (target.toPort) {\r\n                const toCoords = {\r\n                    left: target.left + (target.width / 2),\r\n                    top: target.top,\r\n                };\r\n                target.toPort.set({\r\n                    ...toCoords,\r\n                });\r\n                target.toPort.setCoords();\r\n                if (target.toPort.links.length) {\r\n                    target.toPort.links.forEach((link) => {\r\n                        const fromPort = link.fromNode.fromPort.filter(port => port.id === link.fromPort)[0];\r\n                        this.linkHandlers.setCoords(fromPort.left, fromPort.top, toCoords.left, toCoords.top, link);\r\n                    });\r\n                }\r\n            }\r\n            if (target.fromPort) {\r\n                const fromCoords = {\r\n                    left: target.left + (target.width / 2),\r\n                    top: target.top + target.height,\r\n                };\r\n                target.fromPort.forEach((port) => {\r\n                    const left = port.leftDiff ? fromCoords.left + port.leftDiff : fromCoords.left;\r\n                    const top = port.topDiff ? fromCoords.top + port.topDiff : fromCoords.top;\r\n                    port.set({\r\n                        left,\r\n                        top,\r\n                    });\r\n                    port.setCoords();\r\n                    if (port.links.length) {\r\n                        port.links.forEach((link) => {\r\n                            this.linkHandlers.setCoords(left, top, link.toNode.toPort.left, link.toNode.toPort.top, link);\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        recreate: (target) => {\r\n            const { fromPort, toPort } = target;\r\n            if (target.ports) {\r\n                target.ports.forEach((port) => {\r\n                    target.removeWithUpdate(port);\r\n                    this.canvas.remove(port.fromPort);\r\n                });\r\n            }\r\n            this.canvas.remove(target.toPort);\r\n            if (target.toPort) {\r\n                target.toPort.links.forEach((link) => {\r\n                    this.linkHandlers.remove(link, 'from');\r\n                });\r\n            }\r\n            if (target.fromPort) {\r\n                target.fromPort.forEach((port) => {\r\n                    if (port.links.length) {\r\n                        port.links.forEach((link) => {\r\n                            this.linkHandlers.remove(link, 'to');\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n            this.portHandlers.create(target);\r\n            toPort.links.forEach((link) => {\r\n                link.fromNode = link.fromNode.id;\r\n                link.toNode = target.toPort.nodeId;\r\n                this.linkHandlers.create(link);\r\n            });\r\n            fromPort.filter(op => target.fromPort.some(np => np.id === op.id)).forEach((port) => {\r\n                port.links.forEach((link) => {\r\n                    if (link.fromPort === port.id) {\r\n                        link.fromNode = port.nodeId;\r\n                        link.toNode = link.toNode.id;\r\n                        this.linkHandlers.create(link);\r\n                        this.portHandlers.setCoords(target);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n    }\r\n\r\n    linkHandlers = {\r\n        init: (target) => {\r\n            if (!target.enabled) {\r\n                console.warn('A connected node already exists.');\r\n                return;\r\n            }\r\n            this.interactionMode = 'link';\r\n            const { left, top } = target;\r\n            // const points = [left, top, left, top];\r\n            const fromPort = { left, top };\r\n            const toPort = { left, top };\r\n            this.activeLine = new CurvedLink(target.nodeId, fromPort, null, toPort, {\r\n                strokeWidth: 2,\r\n                fill: '#999999',\r\n                stroke: '#999999',\r\n                class: 'line',\r\n                originX: 'center',\r\n                originY: 'center',\r\n                selectable: false,\r\n                hasBorders: false,\r\n                hasControls: false,\r\n                evented: false,\r\n                fromNode: target.nodeId,\r\n                fromPort: target.id,\r\n            });\r\n            this.canvas.add(this.activeLine);\r\n        },\r\n        finish: () => {\r\n            this.interactionMode = 'selection';\r\n            this.canvas.remove(this.activeLine);\r\n            this.activeLine = null;\r\n            this.canvas.renderAll();\r\n        },\r\n        generate: (target) => {\r\n            if (!target) {\r\n                console.warn('Does not exist target.');\r\n                return;\r\n            }\r\n            if (target.nodeId === this.activeLine.fromNode) {\r\n                console.warn('Can not select the same node.');\r\n                return;\r\n            }\r\n            const link = {\r\n                type: 'CurvedLink',\r\n                fromNode: this.activeLine.fromNode,\r\n                fromPort: this.activeLine.fromPort,\r\n                toNode: target.nodeId,\r\n                toPort: target.id,\r\n            };\r\n            this.linkHandlers.create(link, true);\r\n            this.linkHandlers.finish();\r\n        },\r\n        create: (link, init = false) => {\r\n            const fromNode = this.handlers.findById(link.fromNode);\r\n            const fromPort = fromNode.fromPort.filter(port => port.id === link.fromPort || !port.id)[0];\r\n            const toNode = this.handlers.findById(link.toNode);\r\n            const { toPort } = toNode;\r\n            const createdObj = this.fabricObjects[link.type].create(fromNode, fromPort, toNode, toPort, { ...link });\r\n            this.canvas.add(createdObj);\r\n            this.objects = this.handlers.getObjects();\r\n            const { onAdd } = this.props;\r\n            if (onAdd && this.props.editable && init) {\r\n                onAdd(createdObj);\r\n            }\r\n            this.canvas.renderAll();\r\n            createdObj.setPort(fromNode, fromPort, toNode, toPort);\r\n            this.portHandlers.setCoords(fromNode);\r\n            this.portHandlers.setCoords(toNode);\r\n            this.canvas.requestRenderAll();\r\n            return createdObj;\r\n        },\r\n        setCoords: (x1, y1, x2, y2, link) => {\r\n            link.set({\r\n                x1,\r\n                y1,\r\n                x2,\r\n                y2,\r\n            });\r\n            link.setCoords();\r\n        },\r\n        removeFrom: (link) => {\r\n            if (link.fromNode.fromPort.length) {\r\n                let index = -1;\r\n                link.fromNode.fromPort.forEach((port) => {\r\n                    if (port.links.length) {\r\n                        port.links.some((portLink, i) => {\r\n                            if (link.id === portLink.id) {\r\n                                index = i;\r\n                                return true;\r\n                            }\r\n                            return false;\r\n                        });\r\n                        if (index > -1) {\r\n                            port.links.splice(index, 1);\r\n                        }\r\n                    }\r\n                    link.setPortEnabled(link.fromNode, port, true);\r\n                });\r\n            }\r\n        },\r\n        removeTo: (link) => {\r\n            if (link.toNode.toPort.links.length) {\r\n                let index = -1;\r\n                link.toNode.toPort.links.some((portLink, i) => {\r\n                    if (link.id === portLink.id) {\r\n                        index = i;\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                });\r\n                if (index > -1) {\r\n                    link.toNode.toPort.links.splice(index, 1);\r\n                }\r\n                link.setPortEnabled(link.toNode, link.toNode.toPort, true);\r\n            }\r\n        },\r\n        removeAll: (link) => {\r\n            this.linkHandlers.removeFrom(link);\r\n            this.linkHandlers.removeTo(link);\r\n        },\r\n        remove: (link, type) => {\r\n            if (type === 'from') {\r\n                this.linkHandlers.removeFrom(link);\r\n            } else if (type === 'to') {\r\n                this.linkHandlers.removeTo(link);\r\n            } else {\r\n                this.linkHandlers.removeAll(link);\r\n            }\r\n            this.canvas.remove(link);\r\n            this.handlers.removeOriginById(link.id);\r\n        },\r\n        exception: {\r\n            alreadyConnect: (target) => {\r\n                if (!target.enabled) {\r\n                    console.warn('A connected node already exists.');\r\n                    return;\r\n                }\r\n            },\r\n            duplicate: (target) => {\r\n                if (target.links.some(link => link.fromNode.id === this.activeLine.fromNode)) {\r\n                    console.warn('Duplicate connections can not be made.');\r\n                    return;\r\n                }\r\n            },\r\n            alreadyDrawing: () => {\r\n                if (this.interactionMode === 'link' && this.activeLine) {\r\n                    console.warn('Already drawing links.');\r\n                    return;\r\n                }\r\n            },\r\n        },\r\n    }\r\n\r\n    drawingHandlers = {\r\n        polygon: {\r\n            init: () => {\r\n                this.modeHandlers.drawing(null, 'polygon');\r\n                this.pointArray = [];\r\n                this.lineArray = [];\r\n                this.activeLine = null;\r\n                this.activeShape = null;\r\n            },\r\n            finish: () => {\r\n                this.pointArray.forEach((point) => {\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.lineArray.forEach((line) => {\r\n                    this.canvas.remove(line);\r\n                });\r\n                this.canvas.remove(this.activeLine);\r\n                this.canvas.remove(this.activeShape);\r\n                this.pointArray = [];\r\n                this.lineArray = [];\r\n                this.activeLine = null;\r\n                this.activeShape = null;\r\n                this.canvas.renderAll();\r\n                this.modeHandlers.selection();\r\n            },\r\n            addPoint: (opt) => {\r\n                const id = uuid();\r\n                const { e, absolutePointer } = opt;\r\n                const { x, y } = absolutePointer;\r\n                const circle = new fabric.Circle({\r\n                    id,\r\n                    radius: 3,\r\n                    fill: '#ffffff',\r\n                    stroke: '#333333',\r\n                    strokeWidth: 0.5,\r\n                    left: x,\r\n                    top: y,\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    hoverCursor: 'pointer',\r\n                });\r\n                if (!this.pointArray.length) {\r\n                    circle.set({\r\n                        fill: 'red',\r\n                    });\r\n                }\r\n                const points = [x, y, x, y];\r\n                const line = new fabric.Line(points, {\r\n                    strokeWidth: 2,\r\n                    fill: '#999999',\r\n                    stroke: '#999999',\r\n                    class: 'line',\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    evented: false,\r\n                });\r\n                if (this.activeShape) {\r\n                    const position = this.canvas.getPointer(e);\r\n                    const activeShapePoints = this.activeShape.get('points');\r\n                    activeShapePoints.push({\r\n                        x: position.x,\r\n                        y: position.y,\r\n                    });\r\n                    const polygon = new fabric.Polygon(activeShapePoints, {\r\n                        stroke: '#333333',\r\n                        strokeWidth: 1,\r\n                        fill: '#cccccc',\r\n                        opacity: 0.1,\r\n                        selectable: false,\r\n                        hasBorders: false,\r\n                        hasControls: false,\r\n                        evented: false,\r\n                    });\r\n                    this.canvas.remove(this.activeShape);\r\n                    this.canvas.add(polygon);\r\n                    this.activeShape = polygon;\r\n                    this.canvas.renderAll();\r\n                } else {\r\n                    const polyPoint = [{ x, y }];\r\n                    const polygon = new fabric.Polygon(polyPoint, {\r\n                        stroke: '#333333',\r\n                        strokeWidth: 1,\r\n                        fill: '#cccccc',\r\n                        opacity: 0.1,\r\n                        selectable: false,\r\n                        hasBorders: false,\r\n                        hasControls: false,\r\n                        evented: false,\r\n                    });\r\n                    this.activeShape = polygon;\r\n                    this.canvas.add(polygon);\r\n                }\r\n                this.activeLine = line;\r\n                this.pointArray.push(circle);\r\n                this.lineArray.push(line);\r\n                this.canvas.add(line);\r\n                this.canvas.add(circle);\r\n            },\r\n            generate: (pointArray) => {\r\n                const points = [];\r\n                const id = uuid();\r\n                pointArray.forEach((point) => {\r\n                    points.push({\r\n                        x: point.left,\r\n                        y: point.top,\r\n                    });\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.lineArray.forEach((line) => {\r\n                    this.canvas.remove(line);\r\n                });\r\n                this.canvas.remove(this.activeShape).remove(this.activeLine);\r\n                const option = {\r\n                    id,\r\n                    points,\r\n                    type: 'polygon',\r\n                    stroke: 'rgba(0, 0, 0, 1)',\r\n                    strokeWidth: 3,\r\n                    fill: 'rgba(0, 0, 0, 0.25)',\r\n                    opacity: 1,\r\n                    objectCaching: !this.props.editable,\r\n                    name: 'New polygon',\r\n                    superType: 'drawing',\r\n                };\r\n                this.handlers.add(option, false);\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n                this.activeShape = null;\r\n                this.modeHandlers.selection();\r\n            },\r\n            // TODO... polygon resize\r\n            createResize: (target, points) => {\r\n                points.forEach((point, index) => {\r\n                    const { x, y } = point;\r\n                    const circle = new fabric.Circle({\r\n                        name: index,\r\n                        radius: 3,\r\n                        fill: '#ffffff',\r\n                        stroke: '#333333',\r\n                        strokeWidth: 0.5,\r\n                        left: x,\r\n                        top: y,\r\n                        hasBorders: false,\r\n                        hasControls: false,\r\n                        originX: 'center',\r\n                        originY: 'center',\r\n                        hoverCursor: 'pointer',\r\n                        parentId: target.id,\r\n                    });\r\n                    this.pointArray.push(circle);\r\n                });\r\n                const group = [target].concat(this.pointArray);\r\n                this.canvas.add(new fabric.Group(group, { type: 'polygon', id: uuid() }));\r\n            },\r\n            removeResize: () => {\r\n                if (this.pointArray) {\r\n                    this.pointArray.forEach((point) => {\r\n                        this.canvas.remove(point);\r\n                    });\r\n                    this.pointArray = [];\r\n                }\r\n            },\r\n            movingResize: (target, e) => {\r\n                const points = target.diffPoints || target.points;\r\n                const diffPoints = [];\r\n                points.forEach((point) => {\r\n                    diffPoints.push({\r\n                        x: point.x + e.movementX,\r\n                        y: point.y + e.movementY,\r\n                    });\r\n                });\r\n                target.set({\r\n                    diffPoints,\r\n                });\r\n                this.canvas.renderAll();\r\n            },\r\n        },\r\n        line: {\r\n            init: () => {\r\n                this.modeHandlers.drawing(null, 'line');\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n            },\r\n            finish: () => {\r\n                this.pointArray.forEach((point) => {\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.canvas.remove(this.activeLine);\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n                this.canvas.renderAll();\r\n                this.modeHandlers.selection();\r\n            },\r\n            addPoint: (opt) => {\r\n                const { absolutePointer } = opt;\r\n                const { x, y } = absolutePointer;\r\n                const circle = new fabric.Circle({\r\n                    radius: 3,\r\n                    fill: '#ffffff',\r\n                    stroke: '#333333',\r\n                    strokeWidth: 0.5,\r\n                    left: x,\r\n                    top: y,\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    hoverCursor: 'pointer',\r\n                });\r\n                if (!this.pointArray.length) {\r\n                    circle.set({\r\n                        fill: 'red',\r\n                    });\r\n                }\r\n                const points = [x, y, x, y];\r\n                this.activeLine = new fabric.Line(points, {\r\n                    strokeWidth: 2,\r\n                    fill: '#999999',\r\n                    stroke: '#999999',\r\n                    class: 'line',\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    evented: false,\r\n                });\r\n                this.pointArray.push(circle);\r\n                this.canvas.add(this.activeLine);\r\n                this.canvas.add(circle);\r\n            },\r\n            generate: (opt) => {\r\n                const { absolutePointer } = opt;\r\n                const { x, y } = absolutePointer;\r\n                let points = [];\r\n                const id = uuid();\r\n                this.pointArray.forEach((point) => {\r\n                    points = points.concat(point.left, point.top, x, y);\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.canvas.remove(this.activeLine);\r\n                const option = {\r\n                    id,\r\n                    points,\r\n                    type: 'line',\r\n                    stroke: 'rgba(0, 0, 0, 1)',\r\n                    strokeWidth: 3,\r\n                    opacity: 1,\r\n                    objectCaching: !this.props.editable,\r\n                    name: 'New line',\r\n                    superType: 'drawing',\r\n                };\r\n                this.handlers.add(option, false);\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n                this.modeHandlers.selection();\r\n            },\r\n        },\r\n        arrow: {\r\n            init: () => {\r\n                this.modeHandlers.drawing(null, 'arrow');\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n            },\r\n            finish: () => {\r\n                this.pointArray.forEach((point) => {\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.canvas.remove(this.activeLine);\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n                this.canvas.renderAll();\r\n                this.modeHandlers.selection();\r\n            },\r\n            addPoint: (opt) => {\r\n                const { absolutePointer } = opt;\r\n                const { x, y } = absolutePointer;\r\n                const circle = new fabric.Circle({\r\n                    radius: 3,\r\n                    fill: '#ffffff',\r\n                    stroke: '#333333',\r\n                    strokeWidth: 0.5,\r\n                    left: x,\r\n                    top: y,\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    hoverCursor: 'pointer',\r\n                });\r\n                if (!this.pointArray.length) {\r\n                    circle.set({\r\n                        fill: 'red',\r\n                    });\r\n                }\r\n                const points = [x, y, x, y];\r\n                this.activeLine = new Arrow(points, {\r\n                    strokeWidth: 2,\r\n                    fill: '#999999',\r\n                    stroke: '#999999',\r\n                    class: 'line',\r\n                    originX: 'center',\r\n                    originY: 'center',\r\n                    selectable: false,\r\n                    hasBorders: false,\r\n                    hasControls: false,\r\n                    evented: false,\r\n                });\r\n                this.pointArray.push(circle);\r\n                this.canvas.add(this.activeLine);\r\n                this.canvas.add(circle);\r\n            },\r\n            generate: (opt) => {\r\n                const { absolutePointer } = opt;\r\n                const { x, y } = absolutePointer;\r\n                let points = [];\r\n                const id = uuid();\r\n                this.pointArray.forEach((point) => {\r\n                    points = points.concat(point.left, point.top, x, y);\r\n                    this.canvas.remove(point);\r\n                });\r\n                this.canvas.remove(this.activeLine);\r\n                const option = {\r\n                    id,\r\n                    points,\r\n                    type: 'arrow',\r\n                    stroke: 'rgba(0, 0, 0, 1)',\r\n                    strokeWidth: 3,\r\n                    opacity: 1,\r\n                    objectCaching: !this.props.editable,\r\n                    name: 'New line',\r\n                    superType: 'drawing',\r\n                };\r\n                this.handlers.add(option, false);\r\n                this.pointArray = [];\r\n                this.activeLine = null;\r\n                this.modeHandlers.selection();\r\n            },\r\n        },\r\n        orthogonal: {\r\n\r\n        },\r\n        curve: {\r\n\r\n        },\r\n    }\r\n\r\n    alignmentHandlers = {\r\n        left: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject && activeObject.type === 'activeSelection') {\r\n                const activeObjectLeft = -(activeObject.width / 2);\r\n                activeObject.forEachObject((obj) => {\r\n                    obj.set({\r\n                        left: activeObjectLeft,\r\n                    });\r\n                    obj.setCoords();\r\n                    this.canvas.renderAll();\r\n                });\r\n            }\r\n        },\r\n        center: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject && activeObject.type === 'activeSelection') {\r\n                activeObject.forEachObject((obj) => {\r\n                    obj.set({\r\n                        left: 0 - ((obj.width * obj.scaleX) / 2),\r\n                    });\r\n                    obj.setCoords();\r\n                    this.canvas.renderAll();\r\n                });\r\n            }\r\n        },\r\n        right: () => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (activeObject && activeObject.type === 'activeSelection') {\r\n                const activeObjectLeft = (activeObject.width / 2);\r\n                activeObject.forEachObject((obj) => {\r\n                    obj.set({\r\n                        left: activeObjectLeft - (obj.width * obj.scaleX),\r\n                    });\r\n                    obj.setCoords();\r\n                    this.canvas.renderAll();\r\n                });\r\n            }\r\n        },\r\n    }\r\n\r\n    zoomHandlers = {\r\n        zoomToPoint: (point, zoom) => {\r\n            const { onZoom, minZoom, maxZoom } = this.props;\r\n            let zoomRatio = zoom;\r\n            if (zoom <= (minZoom / 100)) {\r\n                zoomRatio = minZoom / 100;\r\n            } else if (zoom >= (maxZoom / 100)) {\r\n                zoomRatio = maxZoom / 100;\r\n            }\r\n            this.canvas.zoomToPoint(point, zoomRatio);\r\n            this.canvas.getObjects().forEach((obj) => {\r\n                if (this.handlers.isElementType(obj.type)) {\r\n                    const width = obj.width * obj.scaleX * zoomRatio;\r\n                    const height = obj.height * obj.scaleY * zoomRatio;\r\n                    const el = this.elementHandlers.findById(obj.id);\r\n                    // update the element\r\n                    this.elementHandlers.setSize(el, width, height);\r\n                    const { left, top } = obj.getBoundingRect();\r\n                    this.elementHandlers.setPosition(el, left, top);\r\n                    if (obj.type === 'video' && obj.player) {\r\n                        obj.player.setPlayerSize(width, height);\r\n                    }\r\n                }\r\n            });\r\n            if (onZoom) {\r\n                onZoom(zoomRatio);\r\n            }\r\n        },\r\n        zoomOneToOne: () => {\r\n            const center = this.canvas.getCenter();\r\n            const point = {\r\n                x: center.left,\r\n                y: center.top,\r\n            };\r\n            this.canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n            this.zoomHandlers.zoomToPoint(point, 1);\r\n        },\r\n        zoomToFit: () => {\r\n            let scaleX;\r\n            let scaleY;\r\n            scaleX = this.canvas.getWidth() / this.workarea.width;\r\n            scaleY = this.canvas.getHeight() / this.workarea.height;\r\n            if (this.workarea.height > this.workarea.width) {\r\n                scaleX = scaleY;\r\n                if (this.canvas.getWidth() < this.workarea.width * scaleX) {\r\n                    scaleX = scaleX * (this.canvas.getWidth() / (this.workarea.width * scaleX));\r\n                }\r\n            } else {\r\n                scaleY = scaleX;\r\n                if (this.canvas.getHeight() < this.workarea.height * scaleX) {\r\n                    scaleX = scaleX * (this.canvas.getHeight() / (this.workarea.height * scaleX));\r\n                }\r\n            }\r\n            const center = this.canvas.getCenter();\r\n            const point = {\r\n                x: center.left,\r\n                y: center.top,\r\n            };\r\n            this.canvas.setViewportTransform([1, 0, 0, 1, 0, 0]);\r\n            this.zoomHandlers.zoomToPoint(point, scaleX);\r\n        },\r\n        zoomIn: () => {\r\n            let zoomRatio = this.canvas.getZoom();\r\n            zoomRatio += 0.05;\r\n            const center = this.canvas.getCenter();\r\n            const point = {\r\n                x: center.left,\r\n                y: center.top,\r\n            };\r\n            this.zoomHandlers.zoomToPoint(point, zoomRatio);\r\n        },\r\n        zoomOut: () => {\r\n            let zoomRatio = this.canvas.getZoom();\r\n            zoomRatio -= 0.05;\r\n            const center = this.canvas.getCenter();\r\n            const point = {\r\n                x: center.left,\r\n                y: center.top,\r\n            };\r\n            this.zoomHandlers.zoomToPoint(point, zoomRatio);\r\n        },\r\n    }\r\n\r\n    tooltipHandlers = {\r\n        show: debounce(async (target) => {\r\n            if (target.tooltip && target.tooltip.enabled) {\r\n                while (this.tooltipRef.hasChildNodes()) {\r\n                    this.tooltipRef.removeChild(this.tooltipRef.firstChild);\r\n                }\r\n                const tooltip = document.createElement('div');\r\n                tooltip.className = 'rde-tooltip-right';\r\n                let element = target.name;\r\n                const { onTooltip } = this.props;\r\n                if (onTooltip) {\r\n                    element = await onTooltip(this.tooltipRef, target);\r\n                    if (!element) {\r\n                        return;\r\n                    }\r\n                }\r\n                tooltip.innerHTML = element;\r\n                this.tooltipRef.appendChild(tooltip);\r\n                ReactDOM.render(element, tooltip);\r\n                this.tooltipRef.classList.remove('tooltip-hidden');\r\n                const zoom = this.canvas.getZoom();\r\n                const { clientHeight } = this.tooltipRef;\r\n                const { width, height, scaleX, scaleY } = target;\r\n                const { left, top } = target.getBoundingRect();\r\n                const { _offset: offset } = this.canvas.calcOffset();\r\n                const objWidthDiff = (width * scaleX) * zoom;\r\n                const objHeightDiff = (((height * scaleY) * zoom) / 2) - (clientHeight / 2);\r\n                const calcLeft = offset.left + left + objWidthDiff;\r\n                const calcTop = offset.top + top + objHeightDiff;\r\n                if (document.body.clientWidth <= (calcLeft + this.tooltipRef.offsetWidth)) {\r\n                    this.tooltipRef.style.left = `${left + offset.left - this.tooltipRef.offsetWidth}px`;\r\n                    tooltip.className = 'rde-tooltip-left';\r\n                } else {\r\n                    this.tooltipRef.style.left = `${calcLeft}px`;\r\n                }\r\n                this.tooltipRef.style.top = `${calcTop}px`;\r\n                this.target = target;\r\n            }\r\n        }, 100),\r\n        hide: debounce((target) => {\r\n            this.target = null;\r\n            if (this.tooltipRef) {\r\n                this.tooltipRef.classList.add('tooltip-hidden');\r\n            }\r\n        }, 100),\r\n    }\r\n\r\n    contextmenuHandlers = {\r\n        show: debounce(async (e, target) => {\r\n            const { onContext } = this.props;\r\n            while (this.contextmenuRef.hasChildNodes()) {\r\n                this.contextmenuRef.removeChild(this.contextmenuRef.firstChild);\r\n            }\r\n            const contextmenu = document.createElement('div');\r\n            contextmenu.className = 'rde-contextmenu-right';\r\n            const element = await onContext(this.contextmenuRef, e, target);\r\n            if (!element) {\r\n                return;\r\n            }\r\n            contextmenu.innerHTML = element;\r\n            this.contextmenuRef.appendChild(contextmenu);\r\n            ReactDOM.render(element, contextmenu);\r\n            this.contextmenuRef.classList.remove('contextmenu-hidden');\r\n            const { clientX: left, clientY: top } = e;\r\n            this.contextmenuRef.style.left = `${left}px`;\r\n            this.contextmenuRef.style.top = `${top}px`;\r\n        }),\r\n        hide: debounce((target) => {\r\n            if (this.contextmenuRef) {\r\n                this.contextmenuRef.classList.add('contextmenu-hidden');\r\n            }\r\n        }, 100),\r\n    }\r\n\r\n    guidelineHandlers = {\r\n        init: () => {\r\n            this.ctx = this.canvas.getSelectionContext();\r\n            this.aligningLineOffset = 5;\r\n            this.aligningLineMargin = 4;\r\n            this.aligningLineWidth = 1;\r\n            this.aligningLineColor = 'rgb(255, 0, 0)';\r\n            this.viewportTransform = this.canvas.viewportTransform;\r\n            this.zoom = 1;\r\n            this.verticalLines = [];\r\n            this.horizontalLines = [];\r\n        },\r\n        drawVerticalLine: (coords) => {\r\n            this.guidelineHandlers.drawLine(\r\n                coords.x + 0.5,\r\n                coords.y1 > coords.y2 ? coords.y2 : coords.y1,\r\n                coords.x + 0.5,\r\n                coords.y2 > coords.y1 ? coords.y2 : coords.y1,\r\n            );\r\n        },\r\n        drawHorizontalLine: (coords) => {\r\n            this.guidelineHandlers.drawLine(\r\n                coords.x1 > coords.x2 ? coords.x2 : coords.x1,\r\n                coords.y + 0.5,\r\n                coords.x2 > coords.x1 ? coords.x2 : coords.x1,\r\n                coords.y + 0.5,\r\n            );\r\n        },\r\n        drawLine: (x1, y1, x2, y2) => {\r\n            const { ctx, aligningLineWidth, aligningLineColor, viewportTransform, zoom } = this;\r\n            ctx.save();\r\n            ctx.lineWidth = aligningLineWidth;\r\n            ctx.strokeStyle = aligningLineColor;\r\n            ctx.beginPath();\r\n            ctx.moveTo((x1 * zoom) + viewportTransform[4], (y1 * zoom) + viewportTransform[5]);\r\n            ctx.lineTo((x2 * zoom) + viewportTransform[4], (y2 * zoom) + viewportTransform[5]);\r\n            ctx.stroke();\r\n            ctx.restore();\r\n        },\r\n        isInRange: (v1, v2) => {\r\n            const { aligningLineMargin } = this;\r\n            v1 = Math.round(v1);\r\n            v2 = Math.round(v2);\r\n            for (let i = v1 - aligningLineMargin, len = v1 + aligningLineMargin; i <= len; i++) {\r\n                if (i === v2) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n        movingGuidelines: (target) => {\r\n            const canvasObjects = this.canvas.getObjects();\r\n            const activeObjectCenter = target.getCenterPoint();\r\n            const activeObjectLeft = activeObjectCenter.x;\r\n            const activeObjectTop = activeObjectCenter.y;\r\n            const activeObjectBoundingRect = target.getBoundingRect();\r\n            const activeObjectHeight = activeObjectBoundingRect.height / this.viewportTransform[3];\r\n            const activeObjectWidth = activeObjectBoundingRect.width / this.viewportTransform[0];\r\n            let horizontalInTheRange = false;\r\n            let verticalInTheRange = false;\r\n            const { _currentTransform: transform } = this.canvas;\r\n            if (!transform) return;\r\n\r\n            // It should be trivial to DRY this up by encapsulating (repeating) creation of x1, x2, y1, and y2 into functions,\r\n            // but we're not doing it here for perf. reasons -- as this a function that's invoked on every mouse move\r\n\r\n            for (let i = canvasObjects.length; i--;) {\r\n                if (canvasObjects[i] === target\r\n                    || canvasObjects[i].superType === 'port'\r\n                    || canvasObjects[i].superType === 'link'\r\n                    || !canvasObjects[i].evented) {\r\n                    continue;\r\n                }\r\n\r\n                const objectCenter = canvasObjects[i].getCenterPoint();\r\n                const objectLeft = objectCenter.x;\r\n                const objectTop = objectCenter.y;\r\n                const objectBoundingRect = canvasObjects[i].getBoundingRect();\r\n                const objectHeight = objectBoundingRect.height / this.viewportTransform[3];\r\n                const objectWidth = objectBoundingRect.width / this.viewportTransform[0];\r\n\r\n                // snap by the horizontal center line\r\n                if (this.guidelineHandlers.isInRange(objectLeft, activeObjectLeft)) {\r\n                    verticalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const y1 = -5000;\r\n                        const y2 = 5000;\r\n                        this.verticalLines.push({\r\n                            x: objectLeft,\r\n                            y1,\r\n                            y2,\r\n                        });\r\n                    } else {\r\n                        this.verticalLines.push({\r\n                            x: objectLeft,\r\n                            y1: (objectTop < activeObjectTop)\r\n                                ? (objectTop - (objectHeight / 2) - this.aligningLineOffset)\r\n                                : (objectTop + (objectHeight / 2) + this.aligningLineOffset),\r\n                            y2: (activeObjectTop > objectTop)\r\n                                ? (activeObjectTop + (activeObjectHeight / 2) + this.aligningLineOffset)\r\n                                : (activeObjectTop - (activeObjectHeight / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(objectLeft, activeObjectTop), 'center', 'center');\r\n                }\r\n\r\n                // snap by the left edge\r\n                if (this.guidelineHandlers.isInRange(objectLeft - (objectWidth / 2), activeObjectLeft - (activeObjectWidth / 2))) {\r\n                    verticalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const y1 = -5000;\r\n                        const y2 = 5000;\r\n                        let x = objectLeft - (objectWidth / 2);\r\n                        if (canvasObjects[i].layout === 'fullscreen') {\r\n                            x = 0;\r\n                        }\r\n                        this.verticalLines.push({\r\n                            x,\r\n                            y1,\r\n                            y2,\r\n                        });\r\n                    } else {\r\n                        this.verticalLines.push({\r\n                            x: objectLeft - (objectWidth / 2),\r\n                            y1: (objectTop < activeObjectTop)\r\n                                ? (objectTop - (objectHeight / 2) - this.aligningLineOffset)\r\n                                : (objectTop + (objectHeight / 2) + this.aligningLineOffset),\r\n                            y2: (activeObjectTop > objectTop)\r\n                                ? (activeObjectTop + (activeObjectHeight / 2) + this.aligningLineOffset)\r\n                                : (activeObjectTop - (activeObjectHeight / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(objectLeft - (objectWidth / 2) + (activeObjectWidth / 2), activeObjectTop), 'center', 'center');\r\n                }\r\n\r\n                // snap by the right edge\r\n                if (this.guidelineHandlers.isInRange(objectLeft + (objectWidth / 2), activeObjectLeft + (activeObjectWidth / 2))) {\r\n                    verticalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const y1 = -5000;\r\n                        const y2 = 5000;\r\n                        let x = objectLeft + (objectWidth / 2);\r\n                        if (canvasObjects[i].layout === 'fullscreen') {\r\n                            x = this.canvas.getWidth();\r\n                        }\r\n                        this.verticalLines.push({\r\n                            x,\r\n                            y1,\r\n                            y2,\r\n                        });\r\n                    } else {\r\n                        this.verticalLines.push({\r\n                            x: objectLeft + (objectWidth / 2),\r\n                            y1: (objectTop < activeObjectTop)\r\n                                ? (objectTop - (objectHeight / 2) - this.aligningLineOffset)\r\n                                : (objectTop + (objectHeight / 2) + this.aligningLineOffset),\r\n                            y2: (activeObjectTop > objectTop)\r\n                                ? (activeObjectTop + (activeObjectHeight / 2) + this.aligningLineOffset)\r\n                                : (activeObjectTop - (activeObjectHeight / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(objectLeft + (objectWidth / 2) - (activeObjectWidth / 2), activeObjectTop), 'center', 'center');\r\n                }\r\n\r\n                // snap by the vertical center line\r\n                if (this.guidelineHandlers.isInRange(objectTop, activeObjectTop)) {\r\n                    horizontalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const x1 = -5000;\r\n                        const x2 = 5000;\r\n                        this.horizontalLines.push({\r\n                            y: objectTop,\r\n                            x1,\r\n                            x2,\r\n                        });\r\n                    } else {\r\n                        this.horizontalLines.push({\r\n                            y: objectTop,\r\n                            x1: (objectLeft < activeObjectLeft)\r\n                                ? (objectLeft - (objectWidth / 2) - this.aligningLineOffset)\r\n                                : (objectLeft + (objectWidth / 2) + this.aligningLineOffset),\r\n                            x2: (activeObjectLeft > objectLeft)\r\n                                ? (activeObjectLeft + (activeObjectWidth / 2) + this.aligningLineOffset)\r\n                                : (activeObjectLeft - (activeObjectWidth / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(activeObjectLeft, objectTop), 'center', 'center');\r\n                }\r\n\r\n                // snap by the top edge\r\n                if (this.guidelineHandlers.isInRange(objectTop - (objectHeight / 2), activeObjectTop - (activeObjectHeight / 2))) {\r\n                    horizontalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const x1 = -5000;\r\n                        const x2 = 5000;\r\n                        let y = objectTop - (objectHeight / 2);\r\n                        if (canvasObjects[i].layout === 'fullscreen') {\r\n                            y = 0;\r\n                        }\r\n                        this.horizontalLines.push({\r\n                            y,\r\n                            x1,\r\n                            x2,\r\n                        });\r\n                    } else {\r\n                        this.horizontalLines.push({\r\n                            y: objectTop - (objectHeight / 2),\r\n                            x1: (objectLeft < activeObjectLeft)\r\n                                ? (objectLeft - (objectWidth / 2) - this.aligningLineOffset)\r\n                                : (objectLeft + (objectWidth / 2) + this.aligningLineOffset),\r\n                            x2: (activeObjectLeft > objectLeft)\r\n                                ? (activeObjectLeft + (activeObjectWidth / 2) + this.aligningLineOffset)\r\n                                : (activeObjectLeft - (activeObjectWidth / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(activeObjectLeft, objectTop - (objectHeight / 2) + (activeObjectHeight / 2)), 'center', 'center');\r\n                }\r\n\r\n                // snap by the bottom edge\r\n                if (this.guidelineHandlers.isInRange(objectTop + (objectHeight / 2), activeObjectTop + (activeObjectHeight / 2))) {\r\n                    horizontalInTheRange = true;\r\n                    if (canvasObjects[i].id === 'workarea') {\r\n                        const x1 = -5000;\r\n                        const x2 = 5000;\r\n                        let y = objectTop + (objectHeight / 2);\r\n                        if (canvasObjects[i].layout === 'fullscreen') {\r\n                            y = this.canvas.getHeight();\r\n                        }\r\n                        this.horizontalLines.push({\r\n                            y,\r\n                            x1,\r\n                            x2,\r\n                        });\r\n                    } else {\r\n                        this.horizontalLines.push({\r\n                            y: objectTop + (objectHeight / 2),\r\n                            x1: (objectLeft < activeObjectLeft)\r\n                                ? (objectLeft - (objectWidth / 2) - this.aligningLineOffset)\r\n                                : (objectLeft + (objectWidth / 2) + this.aligningLineOffset),\r\n                            x2: (activeObjectLeft > objectLeft)\r\n                                ? (activeObjectLeft + (activeObjectWidth / 2) + this.aligningLineOffset)\r\n                                : (activeObjectLeft - (activeObjectWidth / 2) - this.aligningLineOffset),\r\n                        });\r\n                    }\r\n                    target.setPositionByOrigin(new fabric.Point(activeObjectLeft, objectTop + (objectHeight / 2) - (activeObjectHeight / 2)), 'center', 'center');\r\n                }\r\n            }\r\n\r\n            if (!horizontalInTheRange) {\r\n                this.horizontalLines.length = 0;\r\n            }\r\n\r\n            if (!verticalInTheRange) {\r\n                this.verticalLines.length = 0;\r\n            }\r\n        },\r\n        scalingGuidelines: (target) => {\r\n            // TODO...\r\n        },\r\n    }\r\n\r\n    gridHandlers = {\r\n        init: () => {\r\n            const { gridOption } = this.props;\r\n            if (gridOption.enabled && gridOption.grid) {\r\n                const width = 5000;\r\n                const gridLength = width / gridOption.grid;\r\n                const lineOptions = {\r\n                    stroke: '#ebebeb',\r\n                    selectable: false,\r\n                    evented: false,\r\n                    id: 'grid',\r\n                };\r\n                this.horizontalGridLines = [];\r\n                this.verticalGridLines = [];\r\n                for (let i = 0; i < gridLength; i++) {\r\n                    const distance = i * gridOption.grid;\r\n                    const fhorizontal = new fabric.Line([distance, -width, distance, width], lineOptions);\r\n                    const shorizontal = new fabric.Line([distance - width, -width, distance - width, width], lineOptions);\r\n                    this.canvas.add(fhorizontal);\r\n                    this.canvas.add(shorizontal);\r\n                    const fvertical = new fabric.Line([-width, distance - width, width, distance - width], lineOptions);\r\n                    const svertical = new fabric.Line([-width, distance, width, distance], lineOptions);\r\n                    this.canvas.add(fvertical);\r\n                    this.canvas.add(svertical);\r\n                    if (i % 5 === 0) {\r\n                        fhorizontal.set({ stroke: '#cccccc' });\r\n                        shorizontal.set({ stroke: '#cccccc' });\r\n                        fvertical.set({ stroke: '#cccccc' });\r\n                        svertical.set({ stroke: '#cccccc' });\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setCoords: (target) => {\r\n            const { gridOption: { enabled, grid, snapToGrid } } = this.props;\r\n            if (enabled && grid && snapToGrid) {\r\n                if (target.type === 'activeSelection') {\r\n                    target.set({\r\n                        left: Math.round(target.left / grid) * grid,\r\n                        top: Math.round(target.top / grid) * grid,\r\n                    });\r\n                    target.setCoords();\r\n                    target.getObjects().forEach((obj) => {\r\n                        if (obj.superType === 'node') {\r\n                            const left = target.left + obj.left + (target.width / 2);\r\n                            const top = target.top + obj.top + (target.height / 2);\r\n                            this.portHandlers.setCoords({ ...obj, left, top });\r\n                            if (obj.iconButton) {\r\n                                obj.iconButton.set({\r\n                                    left: obj.left + 5,\r\n                                    top: obj.top + 5,\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n                target.set({\r\n                    left: Math.round(target.left / grid) * grid,\r\n                    top: Math.round(target.top / grid) * grid,\r\n                });\r\n                target.setCoords();\r\n                this.portHandlers.setCoords(target);\r\n            }\r\n        },\r\n    }\r\n\r\n    eventHandlers = {\r\n        object: {\r\n            mousedown: (opt) => {\r\n                const { target } = opt;\r\n                if (target && target.link && target.link.enabled) {\r\n                    const { onLink } = this.props;\r\n                    if (onLink) {\r\n                        onLink(this.canvas, target);\r\n                    }\r\n                }\r\n            },\r\n            mousedblclick: (opt) => {\r\n                const { target } = opt;\r\n                if (target) {\r\n                    const { onDblClick } = this.props;\r\n                    if (onDblClick) {\r\n                        onDblClick(this.canvas, target);\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        modified: (opt) => {\r\n            const { target } = opt;\r\n            if (!target) {\r\n                return;\r\n            }\r\n            if (target.type === 'circle' && target.parentId) {\r\n                return;\r\n            }\r\n            const { onModified } = this.props;\r\n            if (onModified) {\r\n                onModified(target);\r\n            }\r\n        },\r\n        moving: (opt) => {\r\n            const { target } = opt;\r\n            if (this.interactionMode === 'crop') {\r\n                this.cropHandlers.moving(opt);\r\n            } else {\r\n                if (this.props.editable && this.props.guidelineOption.enabled) {\r\n                    this.guidelineHandlers.movingGuidelines(target);\r\n                }\r\n                if (target.type === 'activeSelection') {\r\n                    target.getObjects().forEach((obj) => {\r\n                        if (obj.superType === 'node') {\r\n                            const left = target.left + obj.left + (target.width / 2);\r\n                            const top = target.top + obj.top + (target.height / 2);\r\n                            this.portHandlers.setCoords({ ...obj, left, top });\r\n                            if (obj.iconButton) {\r\n                                obj.iconButton.set({\r\n                                    left: obj.left + 5,\r\n                                    top: obj.top + 5,\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n                if (target.superType === 'node') {\r\n                    this.portHandlers.setCoords(target);\r\n                    if (target.iconButton) {\r\n                        target.iconButton.set({\r\n                            left: target.left + 5,\r\n                            top: target.top + 5,\r\n                        });\r\n                    }\r\n                } else if (this.handlers.isElementType(target.type)) {\r\n                    const el = this.elementHandlers.findById(target.id);\r\n                    // update the element\r\n                    this.elementHandlers.setPosition(el, target.left, target.top);\r\n                }\r\n            }\r\n        },\r\n        moved: (opt) => {\r\n            const { target } = opt;\r\n            this.gridHandlers.setCoords(target);\r\n        },\r\n        scaling: (opt) => {\r\n            const { target } = opt;\r\n            if (this.interactionMode === 'crop') {\r\n                this.cropHandlers.resize(opt);\r\n            }\r\n            // TODO...this.guidelineHandlers.scalingGuidelines(target);\r\n            if (this.handlers.isElementType(target.type)) {\r\n                const zoom = this.canvas.getZoom();\r\n                const width = target.width * target.scaleX * zoom;\r\n                const height = target.height * target.scaleY * zoom;\r\n                const el = this.elementHandlers.findById(target.id);\r\n                // update the element\r\n                this.elementHandlers.setSize(el, width, height);\r\n                this.elementHandlers.setPosition(el, target.left, target.top);\r\n                if (target.type === 'video' && target.player) {\r\n                    target.player.setPlayerSize(width, height);\r\n                }\r\n            }\r\n        },\r\n        rotating: (opt) => {\r\n            const { target } = opt;\r\n            if (this.handlers.isElementType(target.type)) {\r\n                const el = this.elementHandlers.findById(target.id);\r\n                // update the element\r\n                el.style.transform = `rotate(${target.angle}deg)`;\r\n            }\r\n        },\r\n        arrowmoving: (e) => {\r\n            const activeObject = this.canvas.getActiveObject();\r\n            if (!activeObject) {\r\n                return false;\r\n            }\r\n            if (activeObject.id === 'workarea') {\r\n                return false;\r\n            }\r\n            if (e.keyCode === 38) {\r\n                activeObject.set('top', activeObject.top - 2);\r\n                activeObject.setCoords();\r\n                this.canvas.renderAll();\r\n            } else if (e.keyCode === 40) {\r\n                activeObject.set('top', activeObject.top + 2);\r\n                activeObject.setCoords();\r\n                this.canvas.renderAll();\r\n            } else if (e.keyCode === 37) {\r\n                activeObject.set('left', activeObject.left - 2);\r\n                activeObject.setCoords();\r\n                this.canvas.renderAll();\r\n            } else if (e.keyCode === 39) {\r\n                activeObject.set('left', activeObject.left + 2);\r\n                activeObject.setCoords();\r\n                this.canvas.renderAll();\r\n            }\r\n            if (this.props.onModified) {\r\n                this.props.onModified(activeObject);\r\n            }\r\n        },\r\n        mousewheel: (opt) => {\r\n            const { zoomEnabled } = this.props;\r\n            if (!zoomEnabled) {\r\n                return;\r\n            }\r\n            const delta = opt.e.deltaY;\r\n            let zoomRatio = this.canvas.getZoom();\r\n            if (delta > 0) {\r\n                zoomRatio -= 0.05;\r\n            } else {\r\n                zoomRatio += 0.05;\r\n            }\r\n            this.zoomHandlers.zoomToPoint(new fabric.Point(this.canvas.width / 2, this.canvas.height / 2), zoomRatio);\r\n            opt.e.preventDefault();\r\n            opt.e.stopPropagation();\r\n        },\r\n        mousedown: (opt) => {\r\n            if (opt.e.ctrlKey) {\r\n                this.modeHandlers.grab();\r\n                this.panning = true;\r\n                return;\r\n            }\r\n            if (this.interactionMode === 'grab') {\r\n                this.panning = true;\r\n                return;\r\n            }\r\n            const { editable } = this.props;\r\n            const { target } = opt;\r\n            if (editable) {\r\n                if (this.prevTarget && this.prevTarget.superType === 'link') {\r\n                    this.prevTarget.set({\r\n                        stroke: this.prevTarget.originStroke,\r\n                    });\r\n                }\r\n                if (target && target.type === 'fromPort') {\r\n                    if (this.interactionMode === 'link' && this.activeLine) {\r\n                        console.warn('Already drawing links.');\r\n                        return;\r\n                    }\r\n                    this.linkHandlers.init(target);\r\n                    return;\r\n                }\r\n                if (target && this.interactionMode === 'link' && (target.type === 'toPort' || target.superType === 'node')) {\r\n                    let toPort;\r\n                    if (target.superType === 'node') {\r\n                        toPort = target.toPort;\r\n                    } else {\r\n                        toPort = target;\r\n                    }\r\n                    if (toPort && toPort.links.some(link => link.fromNode.id === this.activeLine.fromNode)) {\r\n                        console.warn('Duplicate connections can not be made.');\r\n                        return;\r\n                    }\r\n                    this.linkHandlers.generate(toPort);\r\n                    return;\r\n                }\r\n                this.viewportTransform = this.canvas.viewportTransform;\r\n                this.zoom = this.canvas.getZoom();\r\n                if (this.interactionMode === 'selection') {\r\n                    if (target && target.superType === 'link') {\r\n                        target.set({\r\n                            stroke: target.selectedStroke || 'green',\r\n                        });\r\n                    }\r\n                    this.prevTarget = target;\r\n                    return;\r\n                }\r\n                if (this.interactionMode === 'polygon') {\r\n                    if (target && this.pointArray.length && target.id === this.pointArray[0].id) {\r\n                        this.drawingHandlers.polygon.generate(this.pointArray);\r\n                    } else {\r\n                        this.drawingHandlers.polygon.addPoint(opt);\r\n                    }\r\n                } else if (this.interactionMode === 'line') {\r\n                    if (this.pointArray.length && this.activeLine) {\r\n                        this.drawingHandlers.line.generate(opt);\r\n                    } else {\r\n                        this.drawingHandlers.line.addPoint(opt);\r\n                    }\r\n                } else if (this.interactionMode === 'arrow') {\r\n                    if (this.pointArray.length && this.activeLine) {\r\n                        this.drawingHandlers.arrow.generate(opt);\r\n                    } else {\r\n                        this.drawingHandlers.arrow.addPoint(opt);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        mousemove: (opt) => {\r\n            if (this.interactionMode === 'grab' && this.panning) {\r\n                this.modeHandlers.moving(opt.e);\r\n                this.canvas.requestRenderAll();\r\n                return;\r\n            }\r\n            if (!this.props.editable && opt.target) {\r\n                if (this.handlers.isElementType(opt.target.type)) {\r\n                    return false;\r\n                }\r\n                console.log(opt);\r\n                if (opt.target.id !== 'workarea') {\r\n                    if (opt.target !== this.target) {\r\n                        this.tooltipHandlers.show(opt.target);\r\n                    }\r\n                } else {\r\n                    this.tooltipHandlers.hide(opt.target);\r\n                }\r\n            }\r\n            if (this.interactionMode === 'polygon') {\r\n                if (this.activeLine && this.activeLine.class === 'line') {\r\n                    const pointer = this.canvas.getPointer(opt.e);\r\n                    this.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n                    const points = this.activeShape.get('points');\r\n                    points[this.pointArray.length] = {\r\n                        x: pointer.x,\r\n                        y: pointer.y,\r\n                    };\r\n                    this.activeShape.set({\r\n                        points,\r\n                    });\r\n                    this.canvas.requestRenderAll();\r\n                }\r\n            } else if (this.interactionMode === 'line') {\r\n                if (this.activeLine && this.activeLine.class === 'line') {\r\n                    const pointer = this.canvas.getPointer(opt.e);\r\n                    this.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n                }\r\n                this.canvas.requestRenderAll();\r\n            } else if (this.interactionMode === 'arrow') {\r\n                if (this.activeLine && this.activeLine.class === 'line') {\r\n                    const pointer = this.canvas.getPointer(opt.e);\r\n                    this.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n                }\r\n                this.canvas.requestRenderAll();\r\n            } else if (this.interactionMode === 'link') {\r\n                if (this.activeLine && this.activeLine.class === 'line') {\r\n                    const pointer = this.canvas.getPointer(opt.e);\r\n                    this.activeLine.set({ x2: pointer.x, y2: pointer.y });\r\n                }\r\n                this.canvas.requestRenderAll();\r\n            }\r\n        },\r\n        mouseup: (opt) => {\r\n            if (this.interactionMode === 'grab') {\r\n                this.panning = false;\r\n                return;\r\n            }\r\n            const { target, e } = opt;\r\n            if (this.interactionMode === 'selection') {\r\n                if (target && e.shiftKey && target.superType === 'node') {\r\n                    this.canvas.discardActiveObject();\r\n                    const nodes = [];\r\n                    this.nodeHandlers.getNodePath(target, nodes);\r\n                    const activeSelection = new fabric.ActiveSelection(nodes, {\r\n                        canvas: this.canvas,\r\n                        ...this.props.activeSelection,\r\n                    });\r\n                    this.canvas.setActiveObject(activeSelection);\r\n                    this.canvas.requestRenderAll();\r\n                }\r\n            }\r\n            if (this.props.editable && this.props.guidelineOption.enabled) {\r\n                this.verticalLines.length = 0;\r\n                this.horizontalLines.length = 0;\r\n            }\r\n            this.canvas.renderAll();\r\n        },\r\n        mouseout: (opt) => {\r\n            if (!opt.target) {\r\n                this.tooltipHandlers.hide();\r\n            }\r\n        },\r\n        selection: (opt) => {\r\n            const { onSelect, activeSelection } = this.props;\r\n            const { target } = opt;\r\n            if (target && target.type === 'activeSelection') {\r\n                target.set({\r\n                    ...activeSelection,\r\n                });\r\n            }\r\n            if (onSelect) {\r\n                onSelect(target);\r\n            }\r\n        },\r\n        beforeRender: (opt) => {\r\n            this.canvas.clearContext(this.ctx);\r\n        },\r\n        afterRender: (opt) => {\r\n            for (let i = this.verticalLines.length; i--;) {\r\n                this.guidelineHandlers.drawVerticalLine(this.verticalLines[i]);\r\n            }\r\n            for (let i = this.horizontalLines.length; i--;) {\r\n                this.guidelineHandlers.drawHorizontalLine(this.horizontalLines[i]);\r\n            }\r\n            this.verticalLines.length = 0;\r\n            this.horizontalLines.length = 0;\r\n        },\r\n        resize: (currentWidth, currentHeight, nextWidth, nextHeight) => {\r\n            this.currentWidth = currentWidth;\r\n            this.canvas.setWidth(nextWidth).setHeight(nextHeight);\r\n            if (!this.workarea) {\r\n                return;\r\n            }\r\n            const diffWidth = (nextWidth / 2) - (currentWidth / 2);\r\n            const diffHeight = (nextHeight / 2) - (currentHeight / 2);\r\n            if (this.workarea.layout === 'fixed') {\r\n                this.canvas.centerObject(this.workarea);\r\n                this.workarea.setCoords();\r\n                if (this.props.gridOption.enabled) {\r\n                    return;\r\n                }\r\n                this.canvas.getObjects().forEach((obj, index) => {\r\n                    if (index !== 0) {\r\n                        const left = obj.left + diffWidth;\r\n                        const top = obj.top + diffHeight;\r\n                        const el = this.elementHandlers.findById(obj.id);\r\n                        this.elementHandlers.setPosition(el, left, top);\r\n                        obj.set({\r\n                            left,\r\n                            top,\r\n                        });\r\n                        obj.setCoords();\r\n                    }\r\n                });\r\n                this.canvas.renderAll();\r\n                return;\r\n            }\r\n            let scaleX = nextWidth / this.workarea.width;\r\n            const scaleY = nextHeight / this.workarea.height;\r\n            if (this.workarea.layout === 'responsive') {\r\n                if (this.workarea.height > this.workarea.width) {\r\n                    scaleX = scaleY;\r\n                    if (nextWidth < this.workarea.width * scaleX) {\r\n                        scaleX = scaleX * (nextWidth / (this.workarea.width * scaleX));\r\n                    }\r\n                } else {\r\n                    if (nextHeight < this.workarea.height * scaleX) {\r\n                        scaleX = scaleX * (nextHeight / (this.workarea.height * scaleX));\r\n                    }\r\n                }\r\n                const deltaPoint = new fabric.Point(diffWidth, diffHeight);\r\n                this.canvas.relativePan(deltaPoint);\r\n                const center = this.canvas.getCenter();\r\n                const point = {\r\n                    x: center.left,\r\n                    y: center.top,\r\n                };\r\n                this.zoomHandlers.zoomToPoint(point, scaleX);\r\n                this.canvas.getObjects().forEach((obj) => {\r\n                    if (this.handlers.isElementType(obj.type)) {\r\n                        const width = obj.width * obj.scaleX * scaleX;\r\n                        const height = obj.height * obj.scaleY * scaleX;\r\n                        const { left, top } = obj.getBoundingRect();\r\n                        const el = this.elementHandlers.findById(obj.id);\r\n                        this.elementHandlers.setSize(el, width, height);\r\n                        this.elementHandlers.setPosition(el, left, top);\r\n                        if (obj.player) {\r\n                            obj.player.setPlayerSize(width, height);\r\n                        }\r\n                    }\r\n                });\r\n                this.canvas.renderAll();\r\n                return;\r\n            }\r\n            const diffScaleX = nextWidth / (this.workarea.width * this.workarea.scaleX);\r\n            const diffScaleY = nextHeight / (this.workarea.height * this.workarea.scaleY);\r\n            this.workarea.set({\r\n                scaleX,\r\n                scaleY,\r\n            });\r\n            this.canvas.getObjects().forEach((obj) => {\r\n                if (obj.id !== 'workarea') {\r\n                    const left = obj.left * diffScaleX;\r\n                    const top = obj.top * diffScaleY;\r\n                    const width = obj.width * scaleX;\r\n                    const height = obj.height * scaleY;\r\n                    const el = this.elementHandlers.findById(obj.id);\r\n                    this.elementHandlers.setSize(el, width, height);\r\n                    if (obj.player) {\r\n                        obj.player.setPlayerSize(width, height);\r\n                    }\r\n                    this.elementHandlers.setPosition(el, left, top);\r\n                    const newScaleX = obj.scaleX * diffScaleX;\r\n                    const newScaleY = obj.scaleY * diffScaleY;\r\n                    obj.set({\r\n                        scaleX: newScaleX,\r\n                        scaleY: newScaleY,\r\n                        left,\r\n                        top,\r\n                    });\r\n                    obj.setCoords();\r\n                }\r\n            });\r\n            this.canvas.renderAll();\r\n        },\r\n        paste: (e) => {\r\n            if (this.canvas.wrapperEl !== document.activeElement) {\r\n                return false;\r\n            }\r\n            e = e || window.event;\r\n            if (e.preventDefault) {\r\n                e.preventDefault();\r\n            }\r\n            if (e.stopPropagation) {\r\n                e.stopPropagation();\r\n            }\r\n            const clipboardData = e.clipboardData || window.clipboardData;\r\n            if (clipboardData.types.length) {\r\n                clipboardData.types.forEach((clipboardType) => {\r\n                    if (clipboardType === 'text/plain') {\r\n                        const textPlain = clipboardData.getData('text/plain');\r\n                        try {\r\n                            const objects = JSON.parse(textPlain);\r\n                            const { gridOption: { grid = 10 } } = this.props;\r\n                            if (objects && Array.isArray(objects)) {\r\n                                const filteredObjects = objects.filter(obj => obj !== null);\r\n                                if (filteredObjects.length === 1) {\r\n                                    const obj = filteredObjects[0];\r\n                                    if (typeof obj.cloned !== 'undefined' && !obj.cloned) {\r\n                                        return false;\r\n                                    }\r\n                                    obj.left = obj.properties.left + grid;\r\n                                    obj.top = obj.properties.top + grid;\r\n                                    const createdObj = this.handlers.add(obj, false, true);\r\n                                    this.canvas.setActiveObject(createdObj);\r\n                                    this.canvas.requestRenderAll();\r\n                                } else {\r\n                                    const nodes = [];\r\n                                    const targets = [];\r\n                                    objects.forEach((obj) => {\r\n                                        if (!obj) {\r\n                                            return false;\r\n                                        }\r\n                                        if (obj.superType === 'link') {\r\n                                            obj.fromNode = nodes[obj.fromNodeIndex].id;\r\n                                            obj.toNode = nodes[obj.toNodeIndex].id;\r\n                                        } else {\r\n                                            obj.left = obj.properties.left + grid;\r\n                                            obj.top = obj.properties.top + grid;\r\n                                        }\r\n                                        const createdObj = this.handlers.add(obj, false, true);\r\n                                        if (obj.superType === 'node') {\r\n                                            nodes.push(createdObj);\r\n                                        } else {\r\n                                            targets.push(createdObj);\r\n                                        }\r\n                                    });\r\n                                    const activeSelection = new fabric.ActiveSelection(nodes.length ? nodes : targets, {\r\n                                        canvas: this.canvas,\r\n                                        ...this.props.activeSelection,\r\n                                    });\r\n                                    this.canvas.setActiveObject(activeSelection);\r\n                                    this.canvas.requestRenderAll();\r\n                                }\r\n                                this.handlers.copy();\r\n                            }\r\n                        } catch (error) {\r\n                            console.log(error);\r\n                            // const item = {\r\n                            //     id: uuid(),\r\n                            //     type: 'textbox',\r\n                            //     text: textPlain,\r\n                            // };\r\n                            // this.handlers.add(item, true);\r\n                        }\r\n                    } else if (clipboardType === 'text/html') {\r\n                        // Todo ...\r\n                        // const textHtml = clipboardData.getData('text/html');\r\n                        // console.log(textHtml);\r\n                    } else if (clipboardType === 'Files') {\r\n                        // Array.from(clipboardData.files).forEach((file) => {\r\n                        //     const { type } = file;\r\n                        //     if (type === 'image/png' || type === 'image/jpeg' || type === 'image/jpg') {\r\n                        //         const item = {\r\n                        //             id: uuid(),\r\n                        //             type: 'image',\r\n                        //             file,\r\n                        //             superType: 'image',\r\n                        //         };\r\n                        //         this.handlers.add(item, true);\r\n                        //     } else {\r\n                        //         console.error('Not supported file type');\r\n                        //     }\r\n                        // });\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        /**\r\n         * Document keyboard event\r\n         *\r\n         * @param {KeyboardEvent} e\r\n         * @returns {any}\r\n         */\r\n        keydown: (e) => {\r\n            const { keyEvent } = this;\r\n            if (!Object.keys(keyEvent).length) {\r\n                return false;\r\n            }\r\n            const { editable } = this.props;\r\n            const { move, all, copy, paste, esc, del, clipboard, transaction } = keyEvent;\r\n            if (e.keyCode === 87) {\r\n                this.keyCode = e.keyCode;\r\n            } else if (e.keyCode === 81) {\r\n                this.keyCode = e.keyCode;\r\n            }\r\n            if (e.ctrlKey) {\r\n                this.canvas.defaultCursor = 'grab';\r\n                if (this.workarea.hoverCursor) {\r\n                    this.workarea.hoverCursor = 'grab';\r\n                }\r\n            }\r\n            if (e.keyCode === 27 && esc) {\r\n                if (this.interactionMode === 'selection') {\r\n                    this.canvas.discardActiveObject();\r\n                    this.canvas.renderAll();\r\n                } else if (this.interactionMode === 'polygon') {\r\n                    this.drawingHandlers.polygon.finish();\r\n                } else if (this.interactionMode === 'line') {\r\n                    this.drawingHandlers.line.finish();\r\n                } else if (this.interactionMode === 'arrow') {\r\n                    this.drawingHandlers.arrow.finish();\r\n                } else if (this.interactionMode === 'link') {\r\n                    this.linkHandlers.finish();\r\n                }\r\n                this.tooltipHandlers.hide();\r\n            }\r\n            if (this.canvas.wrapperEl !== document.activeElement) {\r\n                return false;\r\n            }\r\n            if (editable) {\r\n                if (e.keyCode === 46 && del) {\r\n                    this.handlers.remove();\r\n                } else if (e.code.includes('Arrow') && move) {\r\n                    this.eventHandlers.arrowmoving(e);\r\n                } else if (e.ctrlKey && e.keyCode === 65 && all) {\r\n                    e.preventDefault();\r\n                    this.handlers.allSelect();\r\n                } else if (e.ctrlKey && e.keyCode === 67 && copy) {\r\n                    e.preventDefault();\r\n                    this.handlers.copy();\r\n                } else if (e.ctrlKey && e.keyCode === 86 && paste && !clipboard) {\r\n                    e.preventDefault();\r\n                    this.handlers.paste();\r\n                } else if (e.keyCode === 90 && transaction) {\r\n                    e.preventDefault();\r\n                    this.transactionHandlers.undo();\r\n                } else if (e.keyCode === 88 && transaction) {\r\n                    e.preventDefault();\r\n                    this.transactionHandlers.redo();\r\n                }\r\n                return false;\r\n            }\r\n        },\r\n        keyup: (e) => {\r\n            if (this.keyCode !== 87) {\r\n                this.canvas.defaultCursor = 'default';\r\n                if (this.workarea.hoverCursor) {\r\n                    this.workarea.hoverCursor = 'default';\r\n                }\r\n                this.modeHandlers.selection();\r\n            }\r\n        },\r\n        contextmenu: (e) => {\r\n            e.preventDefault();\r\n            const { editable, onContext } = this.props;\r\n            if (editable && onContext) {\r\n                const target = this.canvas.findTarget(e);\r\n                if (target && target.type !== 'activeSelection') {\r\n                    this.handlers.select(target);\r\n                }\r\n                this.contextmenuHandlers.show(e, target);\r\n            }\r\n        },\r\n        onmousedown: (e) => {\r\n            this.contextmenuHandlers.hide();\r\n        },\r\n    }\r\n\r\n    transactionHandlers = {\r\n        /**\r\n         * Transaction init function\r\n         *\r\n         */\r\n        init: () => {\r\n            this.redos = [];\r\n            this.undos = [];\r\n        },\r\n        /**\r\n         * Transaction save function\r\n         * \r\n         * @param {fabric.Object} target\r\n         * @param {'add' | 'remove' | 'moved' | 'scaled' | 'rotated' | 'skewed'} type\r\n         * @returns {boolean}\r\n         */\r\n        save: (target, type) => {\r\n            if (!type) {\r\n                console.warn('Must enter the transaction type');\r\n                return false;\r\n            }\r\n            const { propertiesToInclude } = this.props;\r\n            const undo = { type };\r\n            if (target.superType === 'node') {\r\n                undo.target = {\r\n                    id: target.id,\r\n                    name: target.name,\r\n                    description: target.description,\r\n                    superType: target.superType,\r\n                    type: target.type,\r\n                    nodeClazz: target.nodeClazz,\r\n                    configuration: target.configuration,\r\n                    properties: {\r\n                        left: target.left || 0,\r\n                        top: target.top || 0,\r\n                        iconName: target.descriptor.icon,\r\n                    },\r\n                };\r\n            } else if (target.superType === 'link') {\r\n                undo.target = {\r\n                    id: target.id,\r\n                    type: target.type,\r\n                    superType: target.superType,\r\n                    fromNode: target.fromNode.id,\r\n                    fromPort: target.fromPort,\r\n                    toNode: target.toNode.id,\r\n                };\r\n            } else if (target.type === 'activeSelection') {\r\n\r\n            } else {\r\n\r\n            }\r\n            this.undos.push(undo);\r\n        },\r\n        /**\r\n         * Transaction undo function\r\n         * @returns {any}\r\n         */\r\n        undo: () => {\r\n            const undo = this.undos.pop();\r\n            if (!undo) {\r\n                return false;\r\n            }\r\n            const { target, type } = undo;\r\n            if (type === 'add') {\r\n                if (target.superType === 'link') {\r\n                    const findObject = this.handlers.findById(target.id);\r\n                    this.linkHandlers.remove(findObject);\r\n                } else {\r\n                    this.handlers.removeById(target.id);\r\n                }\r\n            } else if (type === 'remove') {\r\n                if (target.superType === 'node') {\r\n                    target.left = target.properties.left;\r\n                    target.top = target.properties.top;\r\n                }\r\n                this.handlers.add({ ...target, id: null }, false, true);\r\n            } else if (type === 'moved') {\r\n                \r\n            } else if (type === 'scaled') {\r\n                \r\n            } else if (type === 'rotated') {\r\n                \r\n            } else if (type === 'skewed') {\r\n                \r\n            }\r\n            this.redos.push(undo);\r\n            return undo;\r\n        },\r\n        /**\r\n         * Transaction redo function\r\n         * @returns {any}\r\n         */\r\n        redo: () => {\r\n            const redo = this.redos.pop();\r\n            if (!redo) {\r\n                return false;\r\n            }\r\n            const { target, type } = redo;\r\n            if (type === 'add') {\r\n                if (target.superType === 'link') {\r\n                    this.linkHandlers.remove(target);\r\n                } else {\r\n                    this.handlers.removeById(target.id);\r\n                }\r\n                this.redos.push({\r\n                    target,\r\n                    type: 'remove',\r\n                });\r\n            } else if (type === 'remove') {\r\n                if (target.superType === 'link') {\r\n                    \r\n                } else {\r\n                    \r\n                }\r\n            } else if (type === 'moved') {\r\n                \r\n            } else if (type === 'scaled') {\r\n                \r\n            } else if (type === 'rotated') {\r\n                \r\n            } else if (type === 'skewed') {\r\n                \r\n            }\r\n            this.undos.push(redo);\r\n            return redo;\r\n        },\r\n    }\r\n\r\n    render() {\r\n        const { id } = this.state;\r\n        return (\r\n            <div\r\n                ref={this.container}\r\n                id=\"rde-canvas\"\r\n                style={{ width: '100%', height: '100%' }}\r\n            >\r\n                <canvas id={`canvas_${id}`} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Canvas;\r\n","import styled, { css } from 'styled-components';\nimport { Button } from '@material-ui/core';\n\nimport Delete from '@material-ui/icons/Delete';\nimport Save from '@material-ui/icons/Save';\nimport FormatBold from '@material-ui/icons/FormatBold';\nimport FormatItalic from '@material-ui/icons/FormatItalic';\nimport FormatStrikethrough from '@material-ui/icons/FormatStrikethrough';\nimport FormatUnderlined from '@material-ui/icons/FormatUnderlined';\nimport FormatAlignCenter from '@material-ui/icons/FormatAlignCenter';\nimport FormatAlignJustify from '@material-ui/icons/FormatAlignJustify';\nimport FormatAlignLeft from '@material-ui/icons/FormatAlignLeft';\nimport FormatAlignRight from '@material-ui/icons/FormatAlignRight';\nimport FormatColorText from '@material-ui/icons/FormatColorText';\n\nexport const WorkspaceSideMenu = styled.div`\n  border-left: gray solid 4px;\n  height: 100vh;\n  /* padding: 2rem; */\n`;\n\nexport const FooterToolbarContainer = styled.div`\n  background-color: #fff;\n  border-radius: 15px;\n  bottom: 50px;\n  margin: 0;\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 5000;\n`;\n\nexport const VerticalDivider = styled.span`\n  position: relative;\n  :after {\n    background-color: rgba(0, 0, 0, 0.4);\n    content: '';\n    height: 1rem;\n    width: 1px;\n    margin: 0;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n`;\n\nexport const Content = styled.div`\n  align-items: center;\n  display: flex;\n  flex-direction: row;\n  height: 40px;\n  justify-content: center;\n`;\n\nexport const FormatButton = styled(Button)`\n  ${({ active }) =>\n    active &&\n    css`\n      background-color: rgb(46, 204, 113, 0.05);\n\n      .font-format-icon {\n        fill: rgb(46, 204, 113, 0.5);\n      }\n    `}\n`;\n\nconst IconStyles = css`\n  fill: rgba(0, 0, 0, 0.6);\n`;\n\nexport const DeleteIcon = styled(Delete)`\n  ${IconStyles}\n`;\nexport const SaveIcon = styled(Save)`\n  ${IconStyles}\n`;\nexport const FormatBoldIcon = styled(FormatBold)`\n  ${IconStyles}\n`;\nexport const FormatItalicIcon = styled(FormatItalic)`\n  ${IconStyles}\n`;\nexport const FormatStrikethroughIcon = styled(FormatStrikethrough)`\n  ${IconStyles}\n`;\nexport const FormatUnderlinedIcon = styled(FormatUnderlined)`\n  ${IconStyles}\n`;\nexport const FormatAlignCenterIcon = styled(FormatAlignCenter)`\n  ${IconStyles}\n`;\nexport const FormatAlignLeftIcon = styled(FormatAlignLeft)`\n  ${IconStyles}\n`;\nexport const FormatAlignRightIcon = styled(FormatAlignRight)`\n  ${IconStyles}\n`;\nexport const FormatAlignJustifyIcon = styled(FormatAlignJustify)`\n  ${IconStyles}\n`;\nexport const FormatColorTextIcon = styled(FormatColorText)`\n  ${IconStyles}\n`;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button, Switch, Tooltip } from '@material-ui/core';\r\nimport NearMeIcon from '@material-ui/icons/NearMe';\r\nimport PanToolIcon from '@material-ui/icons/PanTool';\r\nimport ZoomOutIcon from '@material-ui/icons/ZoomOut';\r\nimport ZoomInIcon from '@material-ui/icons/ZoomIn';\r\nimport ZoomOutMapIcon from '@material-ui/icons/ZoomOutMap';\r\nimport { FooterToolbarContainer } from './styles';\r\n\r\nclass ImageMapFooterToolbar extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    preview: PropTypes.bool,\r\n    onChangePreview: PropTypes.func,\r\n    zoomRatio: PropTypes.number,\r\n  };\r\n\r\n  state = {\r\n    interactionMode: 'selection',\r\n    preview: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { canvasRef } = this.props;\r\n    this.waitForCanvasRender(canvasRef);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { canvasRef } = this.props;\r\n    this.detachEventListener(canvasRef);\r\n  }\r\n\r\n  previewInputHandler = () => {\r\n    this.setState(({ preview }) => ({\r\n      preview: !preview,\r\n    }));\r\n  };\r\n\r\n  waitForCanvasRender = canvas => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        this.attachEventListener(canvas);\r\n        return;\r\n      }\r\n      const { canvasRef } = this.props;\r\n      this.waitForCanvasRender(canvasRef);\r\n    }, 5);\r\n  };\r\n\r\n  attachEventListener = canvasRef => {\r\n    canvasRef.canvas.wrapperEl.addEventListener(\r\n      'keydown',\r\n      this.events.keydown,\r\n      false\r\n    );\r\n  };\r\n\r\n  detachEventListener = canvasRef => {\r\n    canvasRef.canvas.wrapperEl.removeEventListener(\r\n      'keydown',\r\n      this.events.keydown\r\n    );\r\n  };\r\n\r\n  /* eslint-disable react/sort-comp, react/prop-types */\r\n  handlers = {\r\n    selection: () => {\r\n      this.props.canvasRef.modeHandlers.selection(obj => ({\r\n        selectable: obj.superType !== 'port',\r\n        evented: true,\r\n      }));\r\n      this.setState({ interactionMode: 'selection' });\r\n    },\r\n    grab: () => {\r\n      this.props.canvasRef.modeHandlers.grab();\r\n      this.setState({ interactionMode: 'grab' });\r\n    },\r\n  };\r\n\r\n  events = {\r\n    keydown: e => {\r\n      if (this.props.canvasRef.canvas.wrapperEl !== document.activeElement) {\r\n        return false;\r\n      }\r\n      if (e.keyCode === 81) {\r\n        this.handlers.selection();\r\n      } else if (e.keyCode === 87) {\r\n        this.handlers.grab();\r\n      }\r\n    },\r\n  };\r\n\r\n  render() {\r\n    const { canvasRef, preview, zoomRatio, onChangePreview } = this.props;\r\n    const { interactionMode } = this.state;\r\n    const { selection, grab } = this.handlers;\r\n    if (!canvasRef) {\r\n      return null;\r\n    }\r\n    const zoomValue = parseInt((zoomRatio * 100).toFixed(2), 10);\r\n    return (\r\n      <FooterToolbarContainer>\r\n        <Tooltip title=\"Selection Mode\">\r\n          <Button onClick={selection}>\r\n            <NearMeIcon style={{ transform: 'scaleX(-1)' }} />\r\n          </Button>\r\n        </Tooltip>\r\n        <Tooltip title=\"Grab Mode\">\r\n          <Button onClick={grab}>\r\n            <PanToolIcon />\r\n          </Button>\r\n        </Tooltip>\r\n        <Tooltip title=\"Zoom Out\">\r\n          <Button onClick={canvasRef.zoomHandlers.zoomOut}>\r\n            <ZoomOutIcon />\r\n          </Button>\r\n        </Tooltip>\r\n        <Button\r\n          onClick={canvasRef.zoomHandlers.zoomOneToOne}\r\n        >{`${zoomValue}%`}</Button>\r\n        <Tooltip title=\"Scale to Fit\">\r\n          <Button onClick={canvasRef.zoomHandlers.zoomToFit}>1:1</Button>\r\n        </Tooltip>\r\n        <Tooltip title=\"Zoom In\">\r\n          <Button onClick={canvasRef.zoomHandlers.zoomIn}>\r\n            <ZoomInIcon />\r\n          </Button>\r\n        </Tooltip>\r\n        <Tooltip title=\"Preview\">\r\n          <Button onClick={() => onChangePreview(!preview)}>\r\n            <ZoomOutMapIcon />\r\n          </Button>\r\n        </Tooltip>\r\n      </FooterToolbarContainer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapFooterToolbar;\r\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport { SketchPicker } from 'react-color';\n\nexport default function MenuListComposition({ button, onChangeComplete }) {\n  const [open, setOpen] = React.useState(false);\n  const anchorRef = React.useRef(null);\n\n  function handleToggle() {\n    setOpen(prevOpen => !prevOpen);\n  }\n\n  function handleClose(event) {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  }\n\n  const handleChangeComplete = (color, event) => {\n    console.log(color, event);\n  };\n\n  return (\n    <>\n      <Button\n        ref={anchorRef}\n        aria-controls=\"menu-list-grow\"\n        aria-haspopup=\"true\"\n        onClick={handleToggle}\n      >\n        {button}\n      </Button>\n      <Popper open={open} anchorEl={anchorRef.current} transition>\n        {({ TransitionProps, placement }) => (\n          <Grow\n            {...TransitionProps}\n            style={{\n              transformOrigin: 'center bottom',\n            }}\n          >\n            <Paper>\n              <ClickAwayListener onClickAway={handleClose}>\n                <SketchPicker onChangeComplete={onChangeComplete} />\n              </ClickAwayListener>\n            </Paper>\n          </Grow>\n        )}\n      </Popper>\n    </>\n  );\n}\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport {\r\n  Snackbar,\r\n  Button,\r\n  Tooltip,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n} from '@material-ui/core';\r\nimport uuid from 'uuid/v4';\r\nimport {\r\n  VerticalDivider,\r\n  Content,\r\n  FormatButton,\r\n  DeleteIcon,\r\n  SaveIcon,\r\n  FormatBoldIcon,\r\n  FormatItalicIcon,\r\n  FormatStrikethroughIcon,\r\n  FormatUnderlinedIcon,\r\n  FormatAlignCenterIcon,\r\n  FormatAlignJustifyIcon,\r\n  FormatAlignLeftIcon,\r\n  FormatAlignRightIcon,\r\n  FormatColorTextIcon,\r\n} from './styles';\r\nimport ColorPicker from '../ColorPicker/Colorpicker';\r\n\r\nclass ImageMapItems extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n  };\r\n\r\n  state = {\r\n    warning: false,\r\n    warningMessage: '',\r\n    colorPickerMenu: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { canvasRef } = this.props;\r\n    this.waitForCanvasRender(canvasRef);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { canvasRef } = this.props;\r\n    this.detachEventListener(canvasRef);\r\n  }\r\n\r\n  waitForCanvasRender = canvas => {\r\n    setTimeout(() => {\r\n      if (canvas) {\r\n        this.attachEventListener(canvas);\r\n        return;\r\n      }\r\n      const { canvasRef } = this.props;\r\n      this.waitForCanvasRender(canvasRef);\r\n    }, 5);\r\n  };\r\n\r\n  attachEventListener = canvas => {\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      'dragenter',\r\n      this.events.onDragEnter,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      'dragover',\r\n      this.events.onDragOver,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener(\r\n      'dragleave',\r\n      this.events.onDragLeave,\r\n      false\r\n    );\r\n    canvas.canvas.wrapperEl.addEventListener('drop', this.events.onDrop, false);\r\n  };\r\n\r\n  detachEventListener = canvas => {\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      'dragenter',\r\n      this.events.onDragEnter\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      'dragover',\r\n      this.events.onDragOver\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener(\r\n      'dragleave',\r\n      this.events.onDragLeave\r\n    );\r\n    canvas.canvas.wrapperEl.removeEventListener('drop', this.events.onDrop);\r\n  };\r\n\r\n  /* eslint-disable react/sort-comp, react/prop-types */\r\n  handlers = {\r\n    onAddItem: (item, centered) => {\r\n      const { canvasRef } = this.props;\r\n      if (canvasRef.workarea.layout === 'responsive') {\r\n        if (!canvasRef.workarea.isElement) {\r\n          this.materialUI.warningOpenHandler(\r\n            'Please your select background image'\r\n          );\r\n          return;\r\n        }\r\n      }\r\n      if (canvasRef.interactionMode === 'polygon') {\r\n        this.materialUI.warningOpenHandler('Already drawing');\r\n        return;\r\n      }\r\n      const id = uuid();\r\n      const option = Object.assign({}, item.option, { id });\r\n      if (item.option.type === 'svg' && item.type === 'default') {\r\n        this.handlers.onSVGModalVisible(item.option);\r\n        return;\r\n      }\r\n      canvasRef.handlers.add(option, centered);\r\n    },\r\n  };\r\n\r\n  events = {\r\n    onDragStart: (e, item) => {\r\n      this.item = item;\r\n      const { target } = e;\r\n      target.classList.add('dragging');\r\n    },\r\n    onDragOver: e => {\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n      e.dataTransfer.dropEffect = 'copy';\r\n      return false;\r\n    },\r\n    onDragEnter: e => {\r\n      const { target } = e;\r\n      target.classList.add('over');\r\n    },\r\n    onDragLeave: e => {\r\n      const { target } = e;\r\n      target.classList.remove('over');\r\n    },\r\n    onDrop: e => {\r\n      e = e || window.event;\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n      if (e.stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n      const { layerX, layerY } = e;\r\n      const dt = e.dataTransfer;\r\n      if (dt.types.length && dt.types[0] === 'Files') {\r\n        const { files } = dt;\r\n        Array.from(files).forEach(file => {\r\n          file.uid = uuid();\r\n          const { type } = file;\r\n          if (\r\n            type === 'image/png' ||\r\n            type === 'image/jpeg' ||\r\n            type === 'image/jpg'\r\n          ) {\r\n            const item = {\r\n              option: {\r\n                type: 'image',\r\n                file,\r\n                left: layerX,\r\n                top: layerY,\r\n              },\r\n            };\r\n            this.handlers.onAddItem(item, false);\r\n          } else {\r\n            this.materialUI.warningOpenHandler('Not supported file type');\r\n          }\r\n        });\r\n        return false;\r\n      }\r\n      const option = Object.assign({}, this.item.option, {\r\n        left: layerX,\r\n        top: layerY,\r\n      });\r\n      const newItem = Object.assign({}, this.item, { option });\r\n      this.handlers.onAddItem(newItem, false);\r\n      return false;\r\n    },\r\n    onDragEnd: e => {\r\n      this.item = null;\r\n      e.target.classList.remove('dragging');\r\n    },\r\n  };\r\n\r\n  materialUI = {\r\n    warningOpenHandler: warningMessage => {\r\n      this.setState({ warning: true, warningMessage });\r\n    },\r\n    warningCloseHandler: () => {\r\n      this.setState({ warning: false });\r\n    },\r\n    colorPickerMenuOpenHandler: ({ currentTarget }) => {\r\n      this.setState(() => ({ colorPickerMenu: currentTarget }));\r\n    },\r\n    colorPickerMenuCloseHandler: () => {\r\n      this.setState(() => ({ colorPickerMenu: null }));\r\n    },\r\n  };\r\n\r\n  textHandlers = {\r\n    fontSizeHandler: ({ target: { value } }) => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { fontSize: value };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    fontWeightHandler: () => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { fontWeight: selectedItem.fontWeight !== 'bold' };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    fontStyleHandler: () => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { fontStyle: selectedItem.fontStyle !== 'italic' };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    lineThroughHandler: () => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { linethrough: !selectedItem.linethrough };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    underlineHandler: () => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { underline: !selectedItem.underline };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    textAlignHandler: direction => () => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = {\r\n        textAlign: {},\r\n      };\r\n      change.textAlign[direction] = true;\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    opacityHandler: ({ target: { value } }) => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { opacity: value };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n    fontColorHandler: ({ hex }) => {\r\n      const { onChange, selectedItem } = this.props;\r\n      const change = { fill: hex, stroke: hex };\r\n      onChange(selectedItem, change, this.getTextValue());\r\n    },\r\n  };\r\n\r\n  checkTextValue = value => {\r\n    const { selectedItem } = this.props;\r\n    return selectedItem ? selectedItem[value] : null;\r\n  };\r\n\r\n  getTextValue = () => ({\r\n    charSpacing: this.checkTextValue('charSpacing'),\r\n    fontFamily: this.checkTextValue('fontFamily'),\r\n    fontSize: this.checkTextValue('fontSize'),\r\n    fontStyle: this.checkTextValue('fontStyle'),\r\n    fontWeight: this.checkTextValue('fontWeight'),\r\n    lineHeight: this.checkTextValue('lineHeight'),\r\n    linethrough: this.checkTextValue('linethrough'),\r\n    textAlign: this.checkTextValue('textAlign'),\r\n    underline: this.checkTextValue('underline'),\r\n    fill: this.checkTextValue('fill'),\r\n    opacity: this.checkTextValue('opacity'),\r\n    stroke: this.checkTextValue('stroke'),\r\n    strokeWidth: this.checkTextValue('strokeWidth'),\r\n  });\r\n\r\n  render() {\r\n    const { onAddItem } = this.handlers;\r\n    const { onDragStart, onDragEnd } = this.events;\r\n    const { warning, warningMessage, colorPickerMenu } = this.state;\r\n    const { onSaveImage, onDeleteText, selectedItem } = this.props;\r\n\r\n    const item = {\r\n      name: 'Text',\r\n      description: '',\r\n      type: 'text',\r\n      icon: {\r\n        prefix: 'fas',\r\n        name: 'font',\r\n      },\r\n      option: {\r\n        type: 'textbox',\r\n        text: '',\r\n        width: 60,\r\n        height: 30,\r\n        fontSize: 32,\r\n        name: 'New text',\r\n      },\r\n    };\r\n\r\n    const generalValues = {\r\n      height: this.checkTextValue('height'),\r\n      left: this.checkTextValue('left'),\r\n      lock: this.checkTextValue('lock'),\r\n      name: this.checkTextValue('name'),\r\n      top: this.checkTextValue('top'),\r\n      visible: this.checkTextValue('visible'),\r\n      width: this.checkTextValue('width'),\r\n    };\r\n    const textValues = {\r\n      charSpacing: this.checkTextValue('charSpacing'),\r\n      fontFamily: this.checkTextValue('fontFamily'),\r\n      fontSize: this.checkTextValue('fontSize'),\r\n      fontStyle: this.checkTextValue('fontStyle'),\r\n      fontWeight: this.checkTextValue('fontWeight'),\r\n      lineHeight: this.checkTextValue('lineHeight'),\r\n      linethrough: this.checkTextValue('linethrough'),\r\n      textAlign: this.checkTextValue('textAlign'),\r\n      underline: this.checkTextValue('underline'),\r\n    };\r\n    const styleValues = {\r\n      fill: this.checkTextValue('fill'),\r\n      opacity: this.checkTextValue('opacity'),\r\n      stroke: this.checkTextValue('stroke'),\r\n      strokeWidth: this.checkTextValue('strokeWidth'),\r\n    };\r\n\r\n    const centered = true;\r\n\r\n    const fontFormatItems = {\r\n      bold: {\r\n        title: 'bold',\r\n        onClick: this.textHandlers.fontWeightHandler,\r\n        Icon: FormatBoldIcon,\r\n        active: {\r\n          property: 'fontWeight',\r\n          value: 'bold',\r\n        },\r\n      },\r\n      italic: {\r\n        title: 'italic',\r\n        onClick: this.textHandlers.fontStyleHandler,\r\n        Icon: FormatItalicIcon,\r\n        active: {\r\n          property: 'fontStyle',\r\n          value: 'italic',\r\n        },\r\n      },\r\n      linethrough: {\r\n        title: 'Linethrough',\r\n        onClick: this.textHandlers.lineThroughHandler,\r\n        Icon: FormatStrikethroughIcon,\r\n        active: {\r\n          property: 'linethrough',\r\n          value: true,\r\n        },\r\n      },\r\n      underline: {\r\n        title: 'Underline',\r\n        onClick: this.textHandlers.underlineHandler,\r\n        Icon: FormatUnderlinedIcon,\r\n        active: {\r\n          property: 'underline',\r\n          value: true,\r\n        },\r\n      },\r\n    };\r\n\r\n    const alignFontItems = {\r\n      alignCenter: {\r\n        title: 'Align Center',\r\n        onClick: this.textHandlers.textAlignHandler('center'),\r\n        Icon: FormatAlignCenterIcon,\r\n        active: {\r\n          property: 'textAlign',\r\n          value: 'center',\r\n        },\r\n      },\r\n      alignJustify: {\r\n        title: 'Align Justify',\r\n        onClick: this.textHandlers.textAlignHandler('justify'),\r\n        Icon: FormatAlignJustifyIcon,\r\n        active: {\r\n          property: 'textAlign',\r\n          value: 'justify',\r\n        },\r\n      },\r\n      alignLeft: {\r\n        title: 'Align Left',\r\n        onClick: this.textHandlers.textAlignHandler('left'),\r\n        Icon: FormatAlignLeftIcon,\r\n        active: {\r\n          property: 'textAlign',\r\n          value: 'left',\r\n        },\r\n      },\r\n      alignRight: {\r\n        title: 'Align Right',\r\n        onClick: this.textHandlers.textAlignHandler('right'),\r\n        Icon: FormatAlignRightIcon,\r\n        active: {\r\n          property: 'textAlign',\r\n          value: 'right',\r\n        },\r\n      },\r\n    };\r\n\r\n    const renderItems = items => {\r\n      const res = [];\r\n\r\n      _.map(items, ({ title, onClick, Icon, active }) => {\r\n        res.push(\r\n          <Tooltip title={title}>\r\n            <FormatButton\r\n              onClick={onClick}\r\n              active={this.getTextValue()[active.property] === active.value}\r\n            >\r\n              <Icon className=\"font-format-icon\" />\r\n            </FormatButton>\r\n          </Tooltip>\r\n        );\r\n      });\r\n      return res;\r\n    };\r\n\r\n    return (\r\n      <Content>\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: 'bottom',\r\n            horizontal: 'left',\r\n          }}\r\n          open={warning}\r\n          autoHideDuration={3000}\r\n          onClose={this.materialUI.warningCloseHandler}\r\n          ContentProps={{\r\n            'aria-describedby': 'message-id',\r\n          }}\r\n          message={warningMessage}\r\n        />\r\n        <span\r\n          draggable\r\n          onClick={e => onAddItem(item, centered)}\r\n          onDragStart={e => onDragStart(e, item)}\r\n          onDragEnd={e => onDragEnd(e, item)}\r\n        >\r\n          {item.name}\r\n        </span>\r\n        {renderItems(fontFormatItems)}\r\n\r\n        <VerticalDivider />\r\n\r\n        {renderItems(alignFontItems)}\r\n\r\n        <VerticalDivider />\r\n\r\n        <Tooltip title=\"Font Size\">\r\n          <Select\r\n            value={textValues.fontSize}\r\n            onChange={this.textHandlers.fontSizeHandler}\r\n            inputProps={{\r\n              name: 'age',\r\n              id: 'age-simple',\r\n            }}\r\n            style={{ margin: '0 10px' }}\r\n          >\r\n            {_.times(60, i => (\r\n              <MenuItem value={i}>{i}</MenuItem>\r\n            ))}\r\n          </Select>\r\n        </Tooltip>\r\n\r\n        <Tooltip title=\"Opacity\">\r\n          <TextField\r\n            id=\"standard-number\"\r\n            value={selectedItem ? selectedItem.opacity : null}\r\n            onChange={this.textHandlers.opacityHandler}\r\n            type=\"number\"\r\n            InputProps={{ inputProps: { min: 0, max: 1, step: '0.1' } }}\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n          />\r\n        </Tooltip>\r\n        <Tooltip title=\"Color\">\r\n          <ColorPicker\r\n            button={<FormatColorTextIcon />}\r\n            onChangeComplete={this.textHandlers.fontColorHandler}\r\n          />\r\n        </Tooltip>\r\n\r\n        <VerticalDivider />\r\n\r\n        <Tooltip title=\"Save\">\r\n          <Button onClick={onSaveImage}>\r\n            <SaveIcon />\r\n          </Button>\r\n        </Tooltip>\r\n        <Tooltip title=\"Delete\">\r\n          <Button\r\n            disabled={\r\n              this.canvasRef ? this.canvasRef.interactionMode === 'crop' : false\r\n            }\r\n            onClick={onDeleteText}\r\n          >\r\n            <DeleteIcon />\r\n          </Button>\r\n        </Tooltip>\r\n      </Content>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapItems;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Button } from '@material-ui/core';\r\nimport { ResizeSensor } from 'css-element-queries';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Canvas from '../canvas/Canvas';\r\n\r\nclass ImageMapPreview extends Component {\r\n  static propTypes = {\r\n    preview: PropTypes.bool,\r\n    onChangePreview: PropTypes.func,\r\n    onTooltip: PropTypes.func,\r\n    onAction: PropTypes.func,\r\n  };\r\n\r\n  state = {\r\n    canvasRect: {\r\n      width: 0,\r\n      height: 0,\r\n    },\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.resizeSensor = new ResizeSensor(this.container, e => {\r\n      const { canvasRect: currentCanvasRect } = this.state;\r\n      const canvasRect = Object.assign({}, currentCanvasRect, {\r\n        width: this.container.clientWidth,\r\n        height: this.container.clientHeight,\r\n      });\r\n      this.setState({\r\n        canvasRect,\r\n      });\r\n    });\r\n    this.setState({\r\n      canvasRect: {\r\n        width: this.container.clientWidth,\r\n        height: this.container.clientHeight,\r\n      },\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { canvasRect } = this.state;\r\n    const { onChangePreview, onTooltip, onLink, preview } = this.props;\r\n    return (\r\n      <div\r\n        style={\r\n          preview\r\n            ? {\r\n                top: 0,\r\n                left: 0,\r\n                position: 'absolute',\r\n                transition: 'transform 0.3s linear',\r\n                transformOrigin: 'bottom right',\r\n                width: '100%',\r\n                height: '100%',\r\n                transform: 'scale(1)',\r\n                background: '#fff',\r\n              }\r\n            : {\r\n                display: 'none',\r\n              }\r\n        }\r\n      >\r\n        <div\r\n          ref={c => {\r\n            this.container = c;\r\n          }}\r\n          style={{\r\n            height: '100vh',\r\n          }}\r\n        >\r\n          <Canvas\r\n            ref={c => {\r\n              this.canvasRef = c;\r\n            }}\r\n            editable={false}\r\n            canvasOption={{\r\n              width: canvasRect.width,\r\n              height: canvasRect.height,\r\n              backgroundColor: '#f3f3f3',\r\n              selection: false,\r\n            }}\r\n            onTooltip={onTooltip}\r\n            onLink={onLink}\r\n          />\r\n        </div>\r\n        <Button\r\n          onClick={onChangePreview}\r\n          style={{ position: 'absolute', right: 0, top: 0 }}\r\n        >\r\n          <CloseIcon />\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapPreview;\r\n","import React from 'react';\nimport Typography from '../Typography/Typography';\n\nconst BrandStory = () => (\n  <>\n    <Typography color=\"bold\" variant=\"h6\" align=\"center\" gutter=\"2rem 1rem\">\n      PROJECT NAME\n    </Typography>\n    <Typography style={{ padding: '2rem 1rem 0' }}>\n      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\n      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate\n      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id\n      est laborum.\n    </Typography>\n    <Typography style={{ padding: '1rem' }}>\n      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod\n      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim\n      veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea\n      commodo consequat. Duis aute irure dolor in reprehenderit in voluptate\n      velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n      cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id\n      est laborum.\n    </Typography>\n    <ul>\n      <li>Feature number one</li>\n      <li>Feature number two</li>\n      <li>Feature number three</li>\n      <li>Feature number four</li>\n    </ul>\n  </>\n);\n\nexport default BrandStory;\n","import React from 'react';\nimport { TextField } from '@material-ui/core';\n\nconst BrainStorm = () => (\n  <>\n    <TextField\n      id=\"standard-multiline-flexible\"\n      label=\"Who is the target audience?\"\n      multiline\n      rows=\"7\"\n      rowsMax=\"10\"\n      value=\"\"\n      onChange={() => null}\n      margin=\"normal\"\n      fullWidth\n    />\n    <TextField\n      id=\"standard-multiline-flexible\"\n      label=\"What makes this special?\"\n      multiline\n      rows=\"7\"\n      rowsMax=\"10\"\n      value=\"\"\n      onChange={() => null}\n      margin=\"normal\"\n      fullWidth\n    />\n    <TextField\n      id=\"standard-multiline-flexible\"\n      label=\"What are some negative qualities about it?\"\n      multiline\n      rows=\"7\"\n      rowsMax=\"10\"\n      value=\"\"\n      onChange={() => null}\n      margin=\"normal\"\n      fullWidth\n    />\n    <TextField\n      id=\"standard-multiline-flexible\"\n      label=\"What painpoint is this product solving?\"\n      multiline\n      rows=\"7\"\n      rowsMax=\"10\"\n      value=\"\"\n      onChange={() => null}\n      margin=\"normal\"\n      fullWidth\n    />\n    <TextField\n      id=\"standard-multiline-flexible\"\n      label=\"What's the sales offer here?\"\n      multiline\n      rows=\"4\"\n      rowsMax=\"10\"\n      value=\"\"\n      onChange={() => null}\n      margin=\"normal\"\n      fullWidth\n    />\n  </>\n);\n\nexport default BrainStorm;\n","import React, { useState } from 'react';\nimport { Tabs, Tab } from '@material-ui/core';\nimport BrandStory from '../BrandStory/BrandStory';\nimport BrainStorm from '../BrainStorm/BrainStorm';\n\nconst SelectedProject = () => {\n  const [sectionState, setSectionState] = useState(0);\n  const sectionHandler = (e, value) => setSectionState(value);\n\n  return (\n    <>\n      <Tabs\n        name=\"Switch\"\n        value={sectionState}\n        onChange={sectionHandler}\n        aria-label=\"simple tabs example\"\n      >\n        <Tab\n          label=\"Brand Story\"\n          id=\"simple-tab-0\"\n          aria-controls=\"simple-tabpanel-0\"\n        />\n        <Tab\n          label=\"WorkSpace\"\n          id=\"simple-tab-1\"\n          aria-controls=\"simple-tabpanel-1\"\n        />\n        <Tab\n          label=\"Benefits\"\n          id=\"simple-tab-2\"\n          aria-controls=\"simple-tabpanel-2\"\n        />\n      </Tabs>\n      <div style={{ padding: '0 2rem' }}>\n        {sectionState === 0 ? <BrandStory /> : <BrainStorm />}\n      </div>\n    </>\n  );\n};\n\nexport default SelectedProject;\n","import React from 'react';\nimport SearchBar from '../SearchBar/SearchBar';\nimport BrowseItem from '../BrowseItem/BrowseItem';\n\nconst ItemRender = path => {\n  const res = [];\n  for (let i = 0; i < 6; i++) {\n    res.push(<BrowseItem path={path} />);\n  }\n  return res;\n};\n\nconst WorkspaceBrowser = ({ path }) => (\n  <>\n    <SearchBar />\n    {ItemRender(path)}\n  </>\n);\n\nexport default WorkspaceBrowser;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport SelectedProject from '../SelectedProject/SelectedProject';\r\nimport WorkspaceBrowser from '../WorkspaceBrowser/WorkspaceBrowser';\r\nimport { WorkspaceSideMenu } from './styles';\r\n\r\nclass ImageMapConfigurations extends Component {\r\n  static propTypes = {\r\n    canvasRef: PropTypes.any,\r\n    selectedItem: PropTypes.object,\r\n    onChange: PropTypes.func,\r\n  };\r\n\r\n  // componentDidMount() {\r\n  //   this.mapHandler();\r\n  //   this.urlHandler();\r\n  // }\r\n\r\n  checkMapValue = value => {\r\n    const { canvasRef } = this.props;\r\n    return canvasRef ? canvasRef[value] : null;\r\n  };\r\n\r\n  checkTextValue = value => {\r\n    const { selectedItem } = this.props;\r\n    return selectedItem ? selectedItem[value] : null;\r\n  };\r\n\r\n  mapHandler = () => {\r\n    const { selectedItem, onChange } = this.props;\r\n    const map = {\r\n      workarea: {\r\n        name: this.checkMapValue('name'),\r\n        layout: this.checkMapValue('layout'),\r\n        width: this.checkMapValue('width'),\r\n        height: this.checkMapValue('height'),\r\n      },\r\n    };\r\n    const change = {\r\n      layout: 'responsive',\r\n    };\r\n    const allData = { workarea: { ...map.workarea, width: 900 } };\r\n    onChange(selectedItem, change, allData);\r\n    console.log(selectedItem, change, allData, 'Makeshift');\r\n  };\r\n\r\n  urlHandler = () => {\r\n    const { selectedItem, onChange } = this.props;\r\n    const change = {\r\n      src:\r\n        'https://res.cloudinary.com/dzv9elyyj/image/upload/v1565814499/Copywriting%20Projects/AdWriter_zorl4d.jpg',\r\n    };\r\n    const allData = {\r\n      workarea: {\r\n        imageLoadType: 'src',\r\n        src: '',\r\n        url: '',\r\n      },\r\n    };\r\n    onChange(selectedItem, change, allData);\r\n    console.log(selectedItem, change, allData, 'Makeshift');\r\n  };\r\n\r\n  render() {\r\n    const { onChange, selectedItem, canvasRef, path } = this.props;\r\n\r\n    const map = {\r\n      workarea: {\r\n        name: this.checkMapValue('name'),\r\n        layout: this.checkMapValue('layout'),\r\n        width: this.checkMapValue('width'),\r\n        height: this.checkMapValue('height'),\r\n      },\r\n    };\r\n\r\n    const generalValues = {\r\n      height: this.checkTextValue('height'),\r\n      left: this.checkTextValue('left'),\r\n      lock: this.checkTextValue('lock'),\r\n      name: this.checkTextValue('name'),\r\n      top: this.checkTextValue('top'),\r\n      visible: this.checkTextValue('visible'),\r\n      width: this.checkTextValue('width'),\r\n    };\r\n    const textValues = {\r\n      charSpacing: this.checkTextValue('charSpacing'),\r\n      fontFamily: this.checkTextValue('fontFamily'),\r\n      fontSize: this.checkTextValue('fontSize'),\r\n      fontStyle: this.checkTextValue('fontStyle'),\r\n      fontWeight: this.checkTextValue('fontWeight'),\r\n      lineHeight: this.checkTextValue('lineHeight'),\r\n      linethrough: this.checkTextValue('linethrough'),\r\n      textAlign: this.checkTextValue('textAlign'),\r\n      underline: this.checkTextValue('underline'),\r\n    };\r\n    const styleValues = {\r\n      fill: this.checkTextValue('fill'),\r\n      opacity: this.checkTextValue('opacity'),\r\n      stroke: this.checkTextValue('stroke'),\r\n      strokeWidth: this.checkTextValue('strokeWidth'),\r\n    };\r\n\r\n    const fileHandler = ({ currentTarget: { files } }) => {\r\n      const change = {\r\n        file: files[0],\r\n      };\r\n      const allData = {\r\n        workarea: {\r\n          imageLoadType: 'file',\r\n          file: null,\r\n        },\r\n      };\r\n      onChange(selectedItem, change, allData);\r\n      console.log(selectedItem, change, allData, 'Makeshift', files[0]);\r\n    };\r\n\r\n    const textHandler = () => {\r\n      const change = {\r\n        opacity: 0.2,\r\n      };\r\n      onChange(selectedItem, change, styleValues);\r\n    };\r\n\r\n    const pathHandler = (originalProject, cloneProject) =>\r\n      path.split('/')[2] === 'browse' ? cloneProject : originalProject;\r\n\r\n    return (\r\n      <WorkspaceSideMenu>\r\n        {pathHandler(<SelectedProject />, <WorkspaceBrowser path={path} />)}\r\n      </WorkspaceSideMenu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapConfigurations;\r\n","import React, { Component } from 'react';\r\nimport { ResizeSensor } from 'css-element-queries';\r\nimport debounce from 'lodash/debounce';\r\nimport { Grid, Button, Badge } from '@material-ui/core';\r\nimport Canvas from '../canvas/Canvas';\r\nimport ImageMapFooterToolbar from './ImageMapFooterToolbar';\r\nimport ImageMapItems from './ImageMapItems';\r\nimport ImageMapPreview from './ImageMapPreview';\r\nimport ImageMapConfigurations from './ImageMapConfigurations';\r\n\r\nconst propertiesToInclude = [\r\n  'id',\r\n  'name',\r\n  'lock',\r\n  'file',\r\n  'src',\r\n  'link',\r\n  'tooltip',\r\n  'animation',\r\n  'layout',\r\n  'workareaWidth',\r\n  'workareaHeight',\r\n  'videoLoadType',\r\n  'autoplay',\r\n  'shadow',\r\n  'muted',\r\n  'loop',\r\n  'code',\r\n  'icon',\r\n  'userProperty',\r\n  'trigger',\r\n  'configuration',\r\n  'superType',\r\n  'points',\r\n  'svg',\r\n  'loadType',\r\n];\r\n\r\nconst defaultOptions = {\r\n  fill: 'rgba(0, 0, 0, 1)',\r\n  stroke: 'rgba(255, 255, 255, 0)',\r\n  strokeUniform: true,\r\n  resource: {},\r\n  link: {\r\n    enabled: false,\r\n    type: 'resource',\r\n    state: 'new',\r\n    dashboard: {},\r\n  },\r\n  tooltip: {\r\n    enabled: true,\r\n    type: 'resource',\r\n    template: '<div>{{message.name}}</div>',\r\n  },\r\n  animation: {\r\n    type: 'none',\r\n    loop: true,\r\n    autoplay: true,\r\n    delay: 100,\r\n    duration: 1000,\r\n  },\r\n  userProperty: {},\r\n  trigger: {\r\n    enabled: false,\r\n    type: 'alarm',\r\n    script: 'return message.value > 0;',\r\n    effect: 'style',\r\n  },\r\n};\r\n\r\nclass ImageMapEditor extends Component {\r\n  state = {\r\n    selectedItem: null,\r\n    zoomRatio: 1,\r\n    canvasRect: {\r\n      width: 300,\r\n      height: 150,\r\n    },\r\n    preview: false,\r\n    loading: false,\r\n    progress: 0,\r\n    animations: [],\r\n    styles: [],\r\n    dataSources: [],\r\n    editing: false,\r\n    descriptors: {},\r\n    uploadDialog: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.resizeSensor = new ResizeSensor(this.container, () => {\r\n      const { canvasRect: currentCanvasRect } = this.state;\r\n      const canvasRect = Object.assign({}, currentCanvasRect, {\r\n        width: this.container.clientWidth,\r\n        height: this.container.clientHeight,\r\n      });\r\n      this.setState({\r\n        canvasRect,\r\n      });\r\n    });\r\n    this.setState({\r\n      canvasRect: {\r\n        width: this.container.clientWidth,\r\n        height: this.container.clientHeight,\r\n      },\r\n      selectedItem: null,\r\n    });\r\n\r\n    if (this.props.location.pathname.split('/').length > 2) {\r\n      const { objects } = require(`../../projects/${\r\n        this.props.location.pathname.split('/')[2]\r\n      }.json`);\r\n      this.canvasRef.handlers.importJSON(JSON.stringify(objects));\r\n    }\r\n  }\r\n\r\n  canvasHandlers = {\r\n    onAdd: target => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      if (target.type === 'activeSelection') {\r\n        this.canvasHandlers.onSelect(null);\r\n        return;\r\n      }\r\n      this.canvasRef.handlers.select(target);\r\n    },\r\n    onSelect: target => {\r\n      if (\r\n        target &&\r\n        target.id &&\r\n        target.id !== 'workarea' &&\r\n        target.type !== 'activeSelection'\r\n      ) {\r\n        if (\r\n          this.state.selectedItem &&\r\n          target.id === this.state.selectedItem.id\r\n        ) {\r\n          return;\r\n        }\r\n        this.canvasRef.handlers.getObjects().forEach(obj => {\r\n          if (obj) {\r\n            this.canvasRef.animationHandlers.initAnimation(obj, true);\r\n          }\r\n        });\r\n        this.setState({\r\n          selectedItem: target,\r\n        });\r\n        return;\r\n      }\r\n      this.canvasRef.handlers.getObjects().forEach(obj => {\r\n        if (obj) {\r\n          this.canvasRef.animationHandlers.initAnimation(obj, true);\r\n        }\r\n      });\r\n      this.setState({\r\n        selectedItem: null,\r\n      });\r\n    },\r\n    onRemove: target => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.canvasHandlers.onSelect(null);\r\n    },\r\n    onModified: debounce(target => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      if (\r\n        target &&\r\n        target.id &&\r\n        target.id !== 'workarea' &&\r\n        target.type !== 'activeSelection'\r\n      ) {\r\n        this.canvasRef.transactionHandlers.save(target, 'modified');\r\n        this.setState({\r\n          selectedItem: target,\r\n        });\r\n        return;\r\n      }\r\n      this.setState({\r\n        selectedItem: null,\r\n      });\r\n    }, 300),\r\n    onZoom: zoom => {\r\n      this.setState({\r\n        zoomRatio: zoom,\r\n      });\r\n    },\r\n    onChange: (selectedItem, changedValues, allValues) => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      const changedKey = Object.keys(changedValues)[0];\r\n      const changedValue = changedValues[changedKey];\r\n      if (allValues.workarea) {\r\n        this.canvasHandlers.onChangeWokarea(\r\n          changedKey,\r\n          changedValue,\r\n          allValues.workarea\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === 'width' || changedKey === 'height') {\r\n        this.canvasRef.handlers.scaleToResize(\r\n          allValues.width,\r\n          allValues.height\r\n        );\r\n        this.canvasRef.transactionHandlers.save(selectedItem, 'modified');\r\n        return;\r\n      }\r\n      if (changedKey === 'lock') {\r\n        this.canvasRef.handlers.setObject({\r\n          lockMovementX: changedValue,\r\n          lockMovementY: changedValue,\r\n          hasControls: !changedValue,\r\n          hoverCursor: changedValue ? 'pointer' : 'move',\r\n          editable: !changedValue,\r\n          lock: changedValue,\r\n        });\r\n        return;\r\n      }\r\n      if (\r\n        changedKey === 'file' ||\r\n        changedKey === 'src' ||\r\n        changedKey === 'code'\r\n      ) {\r\n        if (selectedItem.type === 'image') {\r\n          this.canvasRef.handlers.setImageById(selectedItem.id, changedValue);\r\n        } else if (this.canvasRef.handlers.isElementType(selectedItem.type)) {\r\n          this.canvasRef.elementHandlers.setById(selectedItem.id, changedValue);\r\n        }\r\n        return;\r\n      }\r\n      if (changedKey === 'link') {\r\n        const link = Object.assign({}, defaultOptions.link, allValues.link);\r\n        this.canvasRef.handlers.set(changedKey, link);\r\n        return;\r\n      }\r\n      if (changedKey === 'tooltip') {\r\n        const tooltip = Object.assign(\r\n          {},\r\n          defaultOptions.tooltip,\r\n          allValues.tooltip\r\n        );\r\n        this.canvasRef.handlers.set(changedKey, tooltip);\r\n        return;\r\n      }\r\n      if (changedKey === 'animation') {\r\n        const animation = Object.assign(\r\n          {},\r\n          defaultOptions.animation,\r\n          allValues.animation\r\n        );\r\n        this.canvasRef.handlers.set(changedKey, animation);\r\n        return;\r\n      }\r\n      if (changedKey === 'icon') {\r\n        const { unicode, styles } = changedValue[Object.keys(changedValue)[0]];\r\n        const uni = parseInt(unicode, 16);\r\n        if (styles[0] === 'brands') {\r\n          this.canvasRef.handlers.set('fontFamily', 'Font Awesome 5 Brands');\r\n        } else if (styles[0] === 'regular') {\r\n          this.canvasRef.handlers.set('fontFamily', 'Font Awesome 5 Regular');\r\n        } else {\r\n          this.canvasRef.handlers.set('fontFamily', 'Font Awesome 5 Free');\r\n        }\r\n        this.canvasRef.handlers.set('text', String.fromCodePoint(uni));\r\n        this.canvasRef.handlers.set('icon', changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === 'shadow') {\r\n        if (allValues.shadow.enabled) {\r\n          this.canvasRef.handlers.setShadow(changedKey, allValues.shadow);\r\n        } else {\r\n          this.canvasRef.handlers.setShadow(changedKey, null);\r\n        }\r\n        return;\r\n      }\r\n      if (changedKey === 'fontWeight') {\r\n        this.canvasRef.handlers.set(\r\n          changedKey,\r\n          changedValue ? 'bold' : 'normal'\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === 'fontStyle') {\r\n        this.canvasRef.handlers.set(\r\n          changedKey,\r\n          changedValue ? 'italic' : 'normal'\r\n        );\r\n        return;\r\n      }\r\n      if (changedKey === 'textAlign') {\r\n        console.log(Object.keys(changedValue), 'keys');\r\n        this.canvasRef.handlers.set(changedKey, Object.keys(changedValue)[0]);\r\n        return;\r\n      }\r\n      if (changedKey === 'trigger') {\r\n        const trigger = Object.assign(\r\n          {},\r\n          defaultOptions.trigger,\r\n          allValues.trigger\r\n        );\r\n        this.canvasRef.handlers.set(changedKey, trigger);\r\n        return;\r\n      }\r\n      this.canvasRef.handlers.set(changedKey, changedValue);\r\n    },\r\n    onChangeWokarea: (changedKey, changedValue, allValues) => {\r\n      if (changedKey === 'layout') {\r\n        this.canvasRef.workareaHandlers.setLayout(changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === 'file' || changedKey === 'src') {\r\n        this.canvasRef.workareaHandlers.setImage(changedValue);\r\n        return;\r\n      }\r\n      if (changedKey === 'width' || changedKey === 'height') {\r\n        this.canvasRef.handlers.originScaleToResize(\r\n          this.canvasRef.workarea,\r\n          allValues.width,\r\n          allValues.height\r\n        );\r\n        this.canvasRef.canvas.centerObject(this.canvasRef.workarea);\r\n        return;\r\n      }\r\n      this.canvasRef.workarea.set(changedKey, changedValue);\r\n      this.canvasRef.canvas.requestRenderAll();\r\n    },\r\n    onTooltip: (ref, target) => {\r\n      console.log(target, 'target');\r\n      const value = Math.random() * 10 + 1;\r\n      const { animations, styles } = this.state;\r\n      // const { code } = target.trigger;\r\n      // const compile = SandBox.compile(code);\r\n      // const result = compile(value, animations, styles, target.userProperty);\r\n      // console.log(result);\r\n      return <div>{target.name}</div>;\r\n    },\r\n    onLink: (canvas, target) => {\r\n      const { link } = target;\r\n      if (link.state === 'current') {\r\n        document.location.href = link.url;\r\n        return;\r\n      }\r\n      window.open(link.url);\r\n    },\r\n    onContext: (ref, event, target) => null,\r\n  };\r\n\r\n  handlers = {\r\n    onChangePreview: checked => {\r\n      this.setState(\r\n        {\r\n          preview: typeof checked === 'object' ? false : checked,\r\n        },\r\n        () => {\r\n          if (this.state.preview) {\r\n            const data = this.canvasRef.handlers\r\n              .exportJSON()\r\n              .objects.filter(obj => {\r\n                if (!obj.id) {\r\n                  return false;\r\n                }\r\n                return true;\r\n              });\r\n            this.preview.canvasRef.handlers.importJSON(data);\r\n            return;\r\n          }\r\n          this.preview.canvasRef.handlers.clear();\r\n        }\r\n      );\r\n    },\r\n    onProgress: progress => {\r\n      this.setState({\r\n        progress,\r\n      });\r\n    },\r\n    onImport: files => {\r\n      if (files) {\r\n        this.showLoading(true);\r\n        setTimeout(() => {\r\n          const reader = new FileReader();\r\n          reader.onprogress = e => {\r\n            if (e.lengthComputable) {\r\n              const progress = parseInt((e.loaded / e.total) * 100, 10);\r\n              this.handlers.onProgress(progress);\r\n            }\r\n          };\r\n          reader.onload = e => {\r\n            const { objects, animations, styles, dataSources } = JSON.parse(\r\n              e.target.result\r\n            );\r\n            this.setState({\r\n              animations,\r\n              styles,\r\n              dataSources,\r\n            });\r\n            if (objects) {\r\n              this.canvasRef.handlers.clear(true);\r\n              const data = objects.filter(obj => {\r\n                if (!obj.id) {\r\n                  return false;\r\n                }\r\n                return true;\r\n              });\r\n              this.canvasRef.handlers.importJSON(JSON.stringify(data));\r\n            }\r\n          };\r\n          reader.onloadend = () => {\r\n            this.showLoading(false);\r\n          };\r\n          reader.onerror = () => {\r\n            this.showLoading(false);\r\n          };\r\n          reader.readAsText(files[0]);\r\n        }, 500);\r\n      }\r\n    },\r\n    onUpload: () => {\r\n      const inputEl = document.createElement('input');\r\n      inputEl.accept = '.json';\r\n      inputEl.type = 'file';\r\n      inputEl.hidden = true;\r\n      inputEl.onchange = e => {\r\n        this.handlers.onImport(e.target.files);\r\n      };\r\n      document.body.appendChild(inputEl); // required for firefox\r\n      inputEl.click();\r\n      inputEl.remove();\r\n    },\r\n    onDownload: () => {\r\n      this.showLoading(true);\r\n      const objects = this.canvasRef.handlers\r\n        .exportJSON()\r\n        .objects.filter(obj => {\r\n          if (!obj.id) {\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n      const { animations, styles, dataSources } = this.state;\r\n      const exportDatas = {\r\n        objects,\r\n        animations,\r\n        styles,\r\n        dataSources,\r\n      };\r\n      const anchorEl = document.createElement('a');\r\n      anchorEl.href = `data:text/json;charset=utf-8,${encodeURIComponent(\r\n        JSON.stringify(exportDatas, null, '\\t')\r\n      )}`;\r\n      anchorEl.download = `${this.canvasRef.workarea.name || 'sample'}.json`;\r\n      document.body.appendChild(anchorEl); // required for firefox\r\n      anchorEl.click();\r\n      anchorEl.remove();\r\n      this.showLoading(false);\r\n    },\r\n    onChangeAnimations: animations => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        animations,\r\n      });\r\n    },\r\n    onChangeStyles: styles => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        styles,\r\n      });\r\n    },\r\n    onChangeDataSources: dataSources => {\r\n      if (!this.state.editing) {\r\n        this.changeEditing(true);\r\n      }\r\n      this.setState({\r\n        dataSources,\r\n      });\r\n    },\r\n    onSaveImage: () => {\r\n      this.canvasRef.handlers.saveCanvasImage();\r\n    },\r\n    onDeleteText: () => {\r\n      this.canvasRef.handlers.remove();\r\n    },\r\n  };\r\n\r\n  transformList = () =>\r\n    Object.values(this.state.descriptors).reduce(\r\n      (prev, curr) => prev.concat(curr),\r\n      []\r\n    );\r\n\r\n  showLoading = loading => {\r\n    this.setState({\r\n      loading,\r\n    });\r\n  };\r\n\r\n  changeEditing = editing => {\r\n    this.setState({\r\n      editing,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      preview,\r\n      selectedItem,\r\n      canvasRect,\r\n      zoomRatio,\r\n      loading,\r\n      progress,\r\n      animations,\r\n      styles,\r\n      dataSources,\r\n      editing,\r\n      descriptors,\r\n      uploadDialog,\r\n    } = this.state;\r\n    const {\r\n      onAdd,\r\n      onRemove,\r\n      onSelect,\r\n      onModified,\r\n      onChange,\r\n      onZoom,\r\n      onTooltip,\r\n      onLink,\r\n      onContext,\r\n    } = this.canvasHandlers;\r\n    const {\r\n      onChangePreview,\r\n      onDownload,\r\n      onUpload,\r\n      onChangeAnimations,\r\n      onChangeStyles,\r\n      onChangeDataSources,\r\n      onSaveImage,\r\n      onDeleteText,\r\n    } = this.handlers;\r\n    return (\r\n      <Grid container>\r\n        <Grid item md={9} style={{ height: '95.5vh' }}>\r\n          <ImageMapItems\r\n            ref={c => {\r\n              this.itemsRef = c;\r\n            }}\r\n            canvasRef={this.canvasRef}\r\n            descriptors={descriptors}\r\n            onSaveImage={onSaveImage}\r\n            onDeleteText={onDeleteText}\r\n            onChange={onChange}\r\n            selectedItem={selectedItem}\r\n            path={this.props.location.pathname}\r\n          />\r\n          <div\r\n            ref={c => {\r\n              this.container = c;\r\n            }}\r\n            style={{ height: '100%', position: 'relative', width: '100%' }}\r\n          >\r\n            <Canvas\r\n              ref={c => {\r\n                this.canvasRef = c;\r\n              }}\r\n              canvasOption={{\r\n                width: canvasRect.width,\r\n                height: canvasRect.height,\r\n                backgroundColor: '#f3f3f3',\r\n                selection: true,\r\n              }}\r\n              minZoom={30}\r\n              defaultOptions={defaultOptions}\r\n              propertiesToInclude={propertiesToInclude}\r\n              onModified={onModified}\r\n              onAdd={onAdd}\r\n              onRemove={onRemove}\r\n              onSelect={onSelect}\r\n              onZoom={onZoom}\r\n              onTooltip={onTooltip}\r\n              onLink={onLink}\r\n              onContext={onContext}\r\n            />\r\n            <ImageMapFooterToolbar\r\n              canvasRef={this.canvasRef}\r\n              preview={preview}\r\n              onChangePreview={onChangePreview}\r\n              zoomRatio={zoomRatio}\r\n            />\r\n            <ImageMapPreview\r\n              ref={c => {\r\n                this.preview = c;\r\n              }}\r\n              preview={preview}\r\n              onChangePreview={onChangePreview}\r\n              onTooltip={onTooltip}\r\n              onLink={onLink}\r\n            />\r\n          </div>\r\n        </Grid>\r\n        <Grid item md={3}>\r\n          <ImageMapConfigurations\r\n            canvasRef={this.canvasRef}\r\n            onChange={onChange}\r\n            selectedItem={selectedItem}\r\n            path={this.props.location.pathname}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ImageMapEditor;\r\n","import styled from 'styled-components';\nimport { Paper } from '@material-ui/core';\n\nexport const FormContainer = styled(Paper)`\n  padding: 2rem;\n  margin: 0;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n","import React, { useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport {\n  Container,\n  TextField,\n  InputAdornment,\n  Button,\n} from '@material-ui/core';\nimport LockIcon from '@material-ui/icons/Lock';\nimport PersonIcon from '@material-ui/icons/Person';\nimport { FormContainer } from './styles';\nimport Typography from '../Typography/Typography';\nimport { withContext } from '../../utility/context';\nimport passwordEnv from '../../utility/password';\n\nconst LogIn = ({ contextHandler, context: { isAuthenticated } }) => {\n  const [usernameState, setUsernameState] = useState('admin');\n  const usernameHandler = ({ target: { value } }) => setUsernameState(value);\n\n  const [passwordState, setPasswordState] = useState('password');\n  const passwordHandler = ({ target: { value } }) => setPasswordState(value);\n\n  const loginHandler = () => {\n    if (usernameState === 'admin' && passwordState === passwordEnv) {\n      contextHandler({ isAuthenticated: true });\n    }\n  };\n\n  if (isAuthenticated) return <Redirect to=\"/explore\" />;\n\n  return (\n    <Container maxWidth=\"sm\">\n      <FormContainer>\n        <Typography\n          color=\"bold\"\n          variant=\"h4\"\n          component=\"h1\"\n          align=\"center\"\n          paragraph\n        >\n          LOG IN TO SWIPE CAMP\n        </Typography>\n        <Typography align=\"center\" paragraph>\n          Unlock your life one sale at the time!\n        </Typography>\n        <TextField\n          fullWidth\n          label=\"Username\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <PersonIcon color=\"disabled\" />\n              </InputAdornment>\n            ),\n          }}\n          value={usernameState}\n          onChange={usernameHandler}\n        />\n        <TextField\n          type=\"password\"\n          fullWidth\n          label=\"Password\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position=\"start\">\n                <LockIcon color=\"disabled\" />\n              </InputAdornment>\n            ),\n          }}\n          value={passwordState}\n          onChange={passwordHandler}\n        />\n        <Typography color=\"light\" align=\"right\">\n          Forgot your Password?\n        </Typography>\n        <Button color=\"primary\" variant=\"contained\" onClick={loginHandler}>\n          Log In\n        </Button>\n      </FormContainer>\n    </Container>\n  );\n};\n\nexport default withContext(LogIn);\n","export default 'password';\n","import React from 'react';\nimport {\n  Container,\n  Table,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableBody,\n} from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport Link from '../Link/Link';\nimport MainNav from '../MainNav/MainNav';\n\nconst createData = (name, itemCount, created) => ({ name, itemCount, created });\n\nconst rows = [\n  createData('Newspaper Copy', 159, '09/24/19'),\n  createData('Call to Action', 237, '09/24/19'),\n  createData('Unique', 262, '09/24/19'),\n  createData('Direct Marketing', 305, '09/24/19'),\n  createData('Slogans', 356, '09/24/19'),\n];\n\nconst SwipeFolder = () => (\n  <>\n    <MainNav />\n    <Container style={{ paddingTop: '4rem' }}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Name</TableCell>\n            <TableCell align=\"right\">Item Count</TableCell>\n            <TableCell align=\"right\">Created</TableCell>\n            <TableCell align=\"right\">Actions</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows.map(({ name, itemCount, created }) => (\n            <TableRow key={name}>\n              <Link\n                to=\"/swipe-folder/newspaper-copy\"\n                //   style={{ display: '', width: '100%' }}\n              >\n                <TableCell component=\"th\" scope=\"row\">\n                  <FolderIcon style={{ margin: '0 1rem -.5rem 0' }} />\n                  {name}\n                </TableCell>\n              </Link>\n              <TableCell align=\"right\">{itemCount}</TableCell>\n              <TableCell align=\"right\">{created}</TableCell>\n              <TableCell align=\"right\">\n                <DeleteIcon />\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </Container>\n  </>\n);\n\nexport default SwipeFolder;\n","import React from 'react';\nimport MainNav from '../MainNav/MainNav';\nimport BrowseGrid from '../BrowseGrid/BrowseGrid';\nimport Typography from '../Typography/Typography';\n\nconst SelectedSwipeFolder = ({ location: { pathname } }) => (\n  <div>\n    <MainNav />\n    <Typography variant=\"h3\" align=\"center\" gutter=\"4rem 0 0\">\n      Newspaper Copy Folder\n    </Typography>\n    <BrowseGrid path={pathname} />\n  </div>\n);\n\nexport default SelectedSwipeFolder;\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport history from '../../utility/history';\nimport ExploreProjects from '../ExploreProjects/ExploreProjects';\nimport UserProfile from '../UserProfile/UserProfile';\nimport ImageMapEditor from '../imagemap/ImageMapEditor';\nimport LogIn from '../LogIn/LogIn';\nimport SwipeFolder from '../SwipeFolder/SwipeFolder';\nimport SelectedSwipeFolder from '../SelectedSwipeFolder/SelectedSwipeFolder';\nimport { withContext } from '../../utility/context';\n\nconst PrivateRoute = withContext(({ component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={props =>\n      rest.context.isAuthenticated ? (\n        <Component {...props} />\n      ) : (\n        <Redirect\n          to={{\n            pathname: '/login',\n            state: { from: props.location },\n          }}\n        />\n      )\n    }\n  />\n));\n\nconst Routes = () => (\n  <Router history={history}>\n    <Route exact path=\"/\" render={() => <Redirect to=\"/explore\" />} />\n    <Route exact path=\"/login\" component={LogIn} />\n    <Route path=\"/explore\" component={ExploreProjects} />\n    <PrivateRoute exact path=\"/swipe-folder\" component={SwipeFolder} />\n    <PrivateRoute\n      exact\n      path=\"/swipe-folder/:id\"\n      component={SelectedSwipeFolder}\n    />\n    <PrivateRoute path=\"/workspace\" component={ImageMapEditor} />\n    <PrivateRoute exact path=\"/profile\" component={UserProfile} />\n  </Router>\n);\n\nexport default Routes;\n","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider, StylesProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport Routes from '../Routes/Routes';\nimport { Provider } from '../../utility/context';\n\nconst theme = createMuiTheme({\n  palette: {\n    // type: 'dark',\n    primary: {\n      main: '#2ecc71',\n      contrastText: '#fff',\n    },\n    secondary: {\n      main: '#27ae60',\n      contrastText: '#fff',\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n  typography: {\n    fontFamily: [\n      'Lato',\n      '-apple-system',\n      'BlinkMacSystemFont',\n      '\"Segoe UI\"',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(','),\n  },\n});\n\nfunction App() {\n  return (\n    <Provider>\n      <ThemeProvider theme={theme}>\n        <StylesProvider injectFirst>\n          <CssBaseline />\n          <Routes />\n        </StylesProvider>\n      </ThemeProvider>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}